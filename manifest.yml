---
applications:
  # Backend Application (Express.js API)
  - name: pe-manager-backend
    memory: 512M
    instances: 1
    buildpacks:
      - nodejs_buildpack
    command: npm start
    path: .
    env:
      NODE_ENV: production
      AUTH_MODE: development
      JWT_SECRET: pe-manager-jwt-secret-key-2024-secure
      JWT_EXPIRES_IN: 7d
    services:
      - pe-manager-db3       # PostgreSQL service binding
    routes:
      - route: pe-manager-backend.cfapps.eu01-canary.hana.ondemand.com

  # Frontend Application (React Static Files)
  - name: pe-manager-frontend
    memory: 128M
    instances: 1
    buildpacks:
      - staticfile_buildpack
    path: dist
    env:
      FORCE_HTTPS: true
    routes:
      - route: pe-manager-frontend.cfapps.eu01-canary.hana.ondemand.com

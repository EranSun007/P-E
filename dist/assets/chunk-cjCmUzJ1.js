import{j as e,Y as $,aB as G}from"./chunk-8WlaufA8.js";import{a as x}from"./chunk-pjYta8vt.js";import{L as p,I as N,B as b}from"./index-BK5E59O8.js";import{D as E,a as I,b as P,c as T}from"./chunk-Cg2ZZDgQ.js";import{T as V}from"./chunk-DSRmHbBO.js";import{R as q,a as A,A as k,P as B}from"./chunk-Bw8oe1_L.js";import{o as f}from"./chunk-BQPSriyy.js";import{S as L,a as O,b as H,c as R,d as u}from"./chunk-DktN3Kjy.js";const U=({teamMemberId:S,onSubmit:d,initialData:s=null,sourceItem:i=null,onCancel:g})=>{const[t,o]=x.useState({title:"",description:"",priority:"2",tags:""}),[m,v]=x.useState(!1),[l,j]=x.useState({});x.useEffect(()=>{s?o({title:s.title||"",description:s.description||"",priority:s.priority?.toString()||"2",tags:Array.isArray(s.tags)?s.tags.join(", "):""}):i&&o({title:i.title||"",description:i.description||i.text||"",priority:"2",tags:""})},[s,i]);const h=r=>{const{name:a,value:c}=r.target;o(n=>({...n,[a]:c})),l[a]&&j(n=>({...n,[a]:null}))},F=r=>{o(a=>({...a,priority:r}))},C=()=>{const r={};return t.title.trim()||(r.title="Title is required"),j(r),Object.keys(r).length===0},y=async r=>{if(r.preventDefault(),!!C()){v(!0);try{const a=t.tags?t.tags.split(",").map(w=>w.trim()).filter(Boolean):[],c={teamMemberId:S,title:t.title.trim(),description:t.description.trim(),priority:parseInt(t.priority,10),tags:a,status:"pending"};let n;s?.id?(n=await k.update(s.id,c),f.success("Agenda item updated successfully")):(n=await k.create(c),f.success("Agenda item added to next 1:1 meeting")),s||o({title:"",description:"",priority:"2",tags:""}),d&&d(n)}catch(a){console.error("Error saving agenda item:",a),f.error("Failed to save agenda item")}finally{v(!1)}}};return e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"Title"}),e.jsx(N,{id:"title",name:"title",value:t.title,onChange:h,placeholder:"Enter agenda item title",className:l.title?"border-red-500":""}),l.title&&e.jsx("p",{className:"text-sm text-red-500",children:l.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"description",children:"Description"}),e.jsx(V,{id:"description",name:"description",value:t.description,onChange:h,placeholder:"Enter details about this agenda item",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Priority"}),e.jsxs(q,{value:t.priority,onValueChange:F,className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{value:"1",id:"priority-high"}),e.jsx(p,{htmlFor:"priority-high",children:"High"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{value:"2",id:"priority-medium"}),e.jsx(p,{htmlFor:"priority-medium",children:"Medium"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{value:"3",id:"priority-low"}),e.jsx(p,{htmlFor:"priority-low",children:"Low"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"tags",children:"Tags (comma separated)"}),e.jsx(N,{id:"tags",name:"tags",value:t.tags,onChange:h,placeholder:"e.g. feedback, project-x, career"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[g&&e.jsx(b,{type:"button",variant:"outline",onClick:g,disabled:m,children:"Cancel"}),e.jsx(b,{type:"submit",disabled:m,children:m?"Saving...":s?"Update Item":"Add to Agenda"})]})]})},Y=({teamMemberId:S,onSubmit:d,initialData:s=null,sourceItem:i=null,onCancel:g})=>{const[t,o]=x.useState({title:"",notes:"",category:"achievement",tags:"",importance:"3"}),[m,v]=x.useState(!1),[l,j]=x.useState({});x.useEffect(()=>{s?o({title:s.title||"",notes:s.notes||"",category:s.category||"achievement",tags:Array.isArray(s.tags)?s.tags.join(", "):"",importance:s.importance?.toString()||"3"}):i&&o({title:i.title||"",notes:i.description||i.text||"",category:"achievement",tags:"",importance:"3"})},[s,i]);const h=r=>{const{name:a,value:c}=r.target;o(n=>({...n,[a]:c})),l[a]&&j(n=>({...n,[a]:null}))},F=(r,a)=>{o(c=>({...c,[r]:a})),l[r]&&j(c=>({...c,[r]:null}))},C=()=>{const r={};return t.title.trim()||(r.title="Title is required"),j(r),Object.keys(r).length===0},y=async r=>{if(r.preventDefault(),!!C()){v(!0);try{const a=t.tags?t.tags.split(",").map(w=>w.trim()).filter(Boolean):[],c={teamMemberId:S,title:t.title.trim(),notes:t.notes.trim(),category:t.category,tags:a,importance:parseInt(t.importance,10),sourceType:i?.type||"manual",sourceId:i?.id||null};let n;s?.id?(n=await B.update(s.id,c),f.success("Personal file item updated successfully")):(n=await B.create(c),f.success("Item saved to personal file")),s||o({title:"",notes:"",category:"achievement",tags:"",importance:"3"}),d&&d(n)}catch(a){console.error("Error saving personal file item:",a),f.error("Failed to save personal file item")}finally{v(!1)}}};return e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"Title"}),e.jsx(N,{id:"title",name:"title",value:t.title,onChange:h,placeholder:"Enter a title for this item",className:l.title?"border-red-500":""}),l.title&&e.jsx("p",{className:"text-sm text-red-500",children:l.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"notes",children:"Notes"}),e.jsx(V,{id:"notes",name:"notes",value:t.notes,onChange:h,placeholder:"Enter detailed notes about this item",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"category",children:"Category"}),e.jsxs(L,{value:t.category,onValueChange:r=>F("category",r),children:[e.jsx(O,{id:"category",children:e.jsx(H,{placeholder:"Select a category"})}),e.jsxs(R,{children:[e.jsx(u,{value:"achievement",children:"Achievement"}),e.jsx(u,{value:"feedback",children:"Feedback"}),e.jsx(u,{value:"concern",children:"Concern"}),e.jsx(u,{value:"goal",children:"Goal"}),e.jsx(u,{value:"improvement",children:"Improvement"}),e.jsx(u,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"importance",children:"Importance"}),e.jsxs(L,{value:t.importance,onValueChange:r=>F("importance",r),children:[e.jsx(O,{id:"importance",children:e.jsx(H,{placeholder:"Select importance level"})}),e.jsxs(R,{children:[e.jsx(u,{value:"1",children:"Low"}),e.jsx(u,{value:"2",children:"Medium-Low"}),e.jsx(u,{value:"3",children:"Medium"}),e.jsx(u,{value:"4",children:"Medium-High"}),e.jsx(u,{value:"5",children:"High"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"tags",children:"Tags (comma separated)"}),e.jsx(N,{id:"tags",name:"tags",value:t.tags,onChange:h,placeholder:"e.g. leadership, communication, project-x"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[g&&e.jsx(b,{type:"button",variant:"outline",onClick:g,disabled:m,children:"Cancel"}),e.jsx(b,{type:"submit",disabled:m,children:m?"Saving...":s?"Update Item":"Save to Personal File"})]})]})},M=({teamMemberId:S,teamMemberName:d,sourceItem:s,variant:i="outline",size:g="sm",showAgendaAction:t=!0,showPersonalFileAction:o=!0,onActionComplete:m})=>{const[v,l]=x.useState(!1),[j,h]=x.useState(!1),F=y=>{l(!1),f.success(`Item added to ${d}'s 1:1 agenda`),m&&m("agenda",y)},C=y=>{h(!1),f.success(`Item saved to ${d}'s personal file`),m&&m("personalFile",y)};return!t&&!o?null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2",children:[t&&e.jsxs(b,{variant:i,size:g,onClick:()=>l(!0),title:`Add to ${d}'s 1:1 agenda`,children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"Add to 1:1"]}),o&&e.jsxs(b,{variant:i,size:g,onClick:()=>h(!0),title:`Save to ${d}'s personal file`,children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"Save to File"]})]}),e.jsx(E,{open:v,onOpenChange:l,children:e.jsxs(I,{children:[e.jsx(P,{children:e.jsxs(T,{children:["Add to ",d,"'s 1:1 Agenda"]})}),e.jsx(U,{teamMemberId:S,onSubmit:F,onCancel:()=>l(!1),sourceItem:s})]})}),e.jsx(E,{open:j,onOpenChange:h,children:e.jsxs(I,{children:[e.jsx(P,{children:e.jsxs(T,{children:["Save to ",d,"'s Personal File"]})}),e.jsx(Y,{teamMemberId:S,onSubmit:C,onCancel:()=>h(!1),sourceItem:s})]})})]})};export{M as A,Y as P,U as a};

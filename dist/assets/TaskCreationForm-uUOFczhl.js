import{j as e,J as Pe,X as K,Y as U,bj as Ee,b8 as $,n as te,d as Ie,aU as Fe,ad as re}from"./chunk-DHGN2BiO.js";import{a as l}from"./chunk-pjYta8vt.js";import{I as Re}from"./chunk-KzYfAQy1.js";import{c as E,S as oe,e as me,I as w,B as y,g as le,i as ne,j as ie,h as ce,l as Te,P as Le,E as Ve,L as qe}from"./index-ByFAet0J.js";import{T as D}from"./chunk-Dt0Bnklg.js";import{S as A,a as _,b as G,c as M,d}from"./chunk-D3uHh-f_.js";import{P as ue,a as he,b as xe,C as ze}from"./chunk-Cwmy-p0V.js";import{_ as j,f as Be}from"./chunk-CZDJnSNg.js";import{B as pe,D as De,a as He,b as Oe,c as Ke}from"./chunk-C6AVtkQH.js";import{s as S}from"./chunk-BdHZTqfh.js";import{E as de}from"./chunk-DSBO3d0u.js";import{T as Ue}from"./chunk-BxZc7glH.js";const ge=l.forwardRef(({className:n,...a},c)=>e.jsx(j,{ref:c,className:E("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...a}));ge.displayName=j.displayName;const je=l.forwardRef(({className:n,...a},c)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(j.Input,{ref:c,className:E("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...a})]}));je.displayName=j.Input.displayName;const $e=l.forwardRef(({className:n,...a},c)=>e.jsx(j.List,{ref:c,className:E("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...a}));$e.displayName=j.List.displayName;const fe=l.forwardRef((n,a)=>e.jsx(j.Empty,{ref:a,className:"py-6 text-center text-sm",...n}));fe.displayName=j.Empty.displayName;const W=l.forwardRef(({className:n,...a},c)=>e.jsx(j.Group,{ref:c,className:E("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...a}));W.displayName=j.Group.displayName;const We=l.forwardRef(({className:n,...a},c)=>e.jsx(j.Separator,{ref:c,className:E("-mx-1 h-px bg-border",n),...a}));We.displayName=j.Separator.displayName;const J=l.forwardRef(({className:n,...a},c)=>e.jsx(j.Item,{ref:c,className:E("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n),...a}));J.displayName=j.Item.displayName;function Je({metadata:n={},onChange:a}){const c={location:"",participants:[],agenda:[],...n},[m,u]=l.useState([]),[N,F]=l.useState([]),[v,k]=l.useState([]),[p,r]=l.useState(!1),[b,R]=l.useState("");l.useEffect(()=>{Array.isArray(c.agenda)&&R(c.agenda.join(`
`))},[]),l.useEffect(()=>{k(S(n?.participants))},[n]),l.useEffect(()=>{T()},[]);const T=async()=>{try{const[i,h]=await Promise.all([oe.list().catch(()=>[]),me.list().catch(()=>[])]);u(S(i)),F(S(h))}catch(i){console.error("Error loading participants:",i),u([]),F([])}},C=(i,h)=>{a({...c,[i]:h})},L=i=>{const h=i.target.value;R(h);const f=h.split(`
`).map(I=>I.trim()).filter(Boolean);C("agenda",f)},V=i=>{if(!v.includes(i)){const h=[...v,i];k(h),C("participants",h)}r(!1)},q=i=>{const h=v.filter(f=>f!==i);k(h),C("participants",h)};return e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Meeting Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),e.jsx(w,{value:c.location||"",onChange:i=>C("location",i.target.value),placeholder:"Meeting location or link"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Participants"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-1 p-1 border rounded-md min-h-10",children:S(v).map(i=>e.jsxs(pe,{variant:"secondary",className:"flex items-center gap-1",children:[i,e.jsx("button",{type:"button",onClick:()=>q(i),className:"ml-1 rounded-full hover:bg-gray-200 p-0.5",children:e.jsx(K,{className:"h-3 w-3"})})]},i))}),e.jsxs(ue,{open:p,onOpenChange:r,children:[e.jsx(he,{asChild:!0,children:e.jsxs(y,{variant:"outline",size:"sm",className:"w-full justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Add participants"]}),e.jsx(Ee,{className:"h-4 w-4 opacity-50"})]})}),e.jsx(xe,{className:"p-0",align:"start",children:e.jsxs(ge,{children:[e.jsx(je,{placeholder:"Search participants..."}),e.jsx(fe,{children:"No participants found."}),S(N).length>0&&e.jsx(W,{heading:"Team Members",children:S(N).map(i=>e.jsxs(J,{onSelect:()=>V(i.name),children:[e.jsx($,{className:`mr-2 h-4 w-4 ${v.includes(i.name)?"opacity-100":"opacity-0"}`}),i.name]},i.id))}),S(m).length>0&&e.jsx(W,{heading:"Stakeholder Groups",children:S(m).map(i=>e.jsxs(J,{onSelect:()=>V(i.name),children:[e.jsx($,{className:`mr-2 h-4 w-4 ${v.includes(i.name)?"opacity-100":"opacity-0"}`}),i.name]},i.id))})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Agenda Items"}),e.jsx(D,{value:b,onChange:L,placeholder:"Enter agenda items (one per line)",className:"h-24"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter each agenda item on a new line"})]})]})]})}function Qe({metadata:n={},onChange:a}){const c=(m,u)=>{a({...n,[m]:u})};return e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Metric Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"KPI Name"}),e.jsx(w,{value:n.kpi_name||"",onChange:m=>c("kpi_name",m.target.value),placeholder:"e.g. Monthly Active Users"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Current Value"}),e.jsx(w,{value:n.current_value||"",onChange:m=>c("current_value",m.target.value),placeholder:"Current metric value"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Target Value"}),e.jsx(w,{value:n.target_value||"",onChange:m=>c("target_value",m.target.value),placeholder:"Target metric value"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Measurement Frequency"}),e.jsxs(A,{value:n.measurement_frequency||"",onValueChange:m=>c("measurement_frequency",m),children:[e.jsx(_,{children:e.jsx(G,{placeholder:"Select frequency"})}),e.jsxs(M,{children:[e.jsx(d,{value:"daily",children:"Daily"}),e.jsx(d,{value:"weekly",children:"Weekly"}),e.jsx(d,{value:"biweekly",children:"Bi-weekly"}),e.jsx(d,{value:"monthly",children:"Monthly"}),e.jsx(d,{value:"quarterly",children:"Quarterly"})]})]})]})]})]})}function Xe({metadata:n={},onChange:a}){const c=(u,N)=>{a({...n,[u]:N})},m=u=>{c("dependencies",u.split(",").map(N=>N.trim()).filter(Boolean))};return e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Action Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Expected Outcome"}),e.jsx(D,{value:n.outcome||"",onChange:u=>c("outcome",u.target.value),placeholder:"What should be accomplished by this action item",className:"h-24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dependencies"}),e.jsx(w,{value:n.dependencies?.join(", ")||"",onChange:u=>m(u.target.value),placeholder:"Comma-separated list of dependencies"})]})]})]})}function os({onCreateTask:n,initialTaskData:a=null}){const[c,m]=l.useState(""),[u,N]=l.useState(!1),[F,v]=l.useState(!!a),k={title:"",description:"",type:"generic",status:"todo",priority:"medium",project:"",due_date:"",assignee:"",estimated_hours:"",actual_hours:"",stakeholders:[],tags:[],strategic:!1,reminders:[],subtasks:[],relatedGoals:[],metadata:{meeting:{participants:[],agenda:[],location:""},metric:{kpi_name:"",current_value:"",target_value:"",measurement_frequency:""},action:{outcome:"",dependencies:[]}}};let p={...k};a&&(p={...p,...a},p.stakeholders=Array.isArray(a.stakeholders)?[...a.stakeholders]:[],p.tags=Array.isArray(a.tags)?[...a.tags]:[],p.reminders=Array.isArray(a.reminders)?[...a.reminders]:[],p.subtasks=Array.isArray(a.subtasks)?[...a.subtasks]:[],p.relatedGoals=Array.isArray(a.relatedGoals)?[...a.relatedGoals]:[],p.metadata={...k.metadata,...a.metadata||{}},a.metadata?.meeting&&(p.metadata.meeting={...k.metadata.meeting,...a.metadata.meeting,participants:Array.isArray(a.metadata.meeting.participants)?[...a.metadata.meeting.participants]:[],agenda:Array.isArray(a.metadata.meeting.agenda)?[...a.metadata.meeting.agenda]:[]}),a.metadata?.action?.dependencies&&(p.metadata.action.dependencies=Array.isArray(a.metadata.action.dependencies)?[...a.metadata.action.dependencies]:[]));const[r,b]=l.useState(p),[R,T]=l.useState([]),[C,L]=l.useState([]),[V,q]=l.useState([]),[i,h]=l.useState([]),[f,I]=l.useState(""),[z,B]=l.useState(""),[H,Q]=l.useState(""),[P,X]=l.useState(p.relatedGoals||[]),[ye,O]=l.useState(!1),[Y,ve]=l.useState([]),[Z,ee]=l.useState(!1);l.useEffect(()=>{const s=async()=>{try{const g=await Le.list();T(g||[])}catch(g){console.error("Error loading projects:",g),T([])}},t=async()=>{try{const g=await oe.list();L(g||[])}catch(g){console.error("Error loading stakeholders:",g),L([])}},o=async()=>{try{const[g,Me]=await Promise.all([me.list(),Ve.list()]);q(g||[]),h(Me||[])}catch{q([]),h([])}};s(),t(),o()},[]),l.useEffect(()=>{a&&a.assignee&&typeof a.assignee=="object"?(I(a.assignee.type),B(a.assignee.id)):(I(""),B(""))},[a]);const se=async()=>{if(c.trim()){N(!0);try{const s=await Re(),t={...s,stakeholders:Array.isArray(s.stakeholders)?s.stakeholders:[],tags:Array.isArray(s.tags)?s.tags:[],metadata:{...s.metadata||{},meeting:{...s.metadata?.meeting||{},participants:Array.isArray(s.metadata?.meeting?.participants)?s.metadata.meeting.participants:[],agenda:Array.isArray(s.metadata?.meeting?.agenda)?s.metadata.meeting.agenda:[]}}},o={...k,...t};b(o),v(!0)}catch(s){console.error("Error processing natural language input:",s),b({...k,title:c}),v(!0)}finally{N(!1)}}},be=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),se())},x=(s,t)=>{if(s==="tags"||s==="stakeholders"||s==="reminders"){const o=Array.isArray(t)?t:[];b(g=>({...g,[s]:o}))}else b(o=>({...o,[s]:t}))},Ne=async()=>{if(!(!r.title&&!r.description)){ee(!0);try{const s=r.title+" "+r.description,t=await de.findRelatedGoals(s);ve(t),O(t.length>0)}catch(s){console.error("Error loading goal suggestions:",s)}finally{ee(!1)}}},ke=s=>{if(!P.find(t=>t.id===s.id)){const t=[...P,s];X(t),x("relatedGoals",t)}O(!1)},we=s=>{const t=P.filter(o=>o.id!==s);X(t),x("relatedGoals",t)},Se=async()=>{if(!(!z||f!=="team_member"))try{const s=await de.suggestTasksFromGoals(z);s.length>0&&console.log("Task suggestions for assignee:",s.slice(0,3))}catch(s){console.error("Error loading task suggestions:",s)}},Ce=s=>{s.preventDefault(),n(r),m(""),b({title:"",description:"",type:"generic",status:"todo",priority:"medium",project:"",due_date:"",assignee:"",estimated_hours:"",actual_hours:"",stakeholders:[],tags:[],strategic:!1,reminders:[],subtasks:[],metadata:{meeting:{participants:[],agenda:[],location:""},metric:{kpi_name:"",current_value:"",target_value:"",measurement_frequency:""},action:{outcome:"",dependencies:[]}}}),v(!1)},Ae=()=>{const s=r.metadata||{};switch(r.type){case"meeting":return e.jsx(Je,{metadata:s.meeting||{participants:[],agenda:[],location:""},onChange:t=>b(o=>({...o,metadata:{...o.metadata,meeting:t}}))});case"metric":return e.jsx(Qe,{metadata:s.metric||{},onChange:t=>b(o=>({...o,metadata:{...o.metadata,metric:t}}))});case"action":return e.jsx(Xe,{metadata:s.action||{},onChange:t=>b(o=>({...o,metadata:{...o.metadata,action:t}}))});default:return null}},ae=()=>{H.trim()&&(b(s=>({...s,subtasks:[...Array.isArray(s.subtasks)?s.subtasks:[],{title:H.trim(),done:!1}]})),Q(""))},_e=s=>{b(t=>({...t,subtasks:t.subtasks.filter((o,g)=>g!==s)}))},Ge=()=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(qe,{children:"Subtasks"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:H,onChange:s=>Q(s.target.value),placeholder:"Add a subtask",onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),ae())}}),e.jsx(y,{type:"button",onClick:ae,children:e.jsx(U,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"space-y-2 mt-2",children:Array.isArray(r.subtasks)&&r.subtasks.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[e.jsx("span",{className:"flex-1 text-sm",children:s.title}),e.jsx(y,{type:"button",variant:"ghost",size:"sm",onClick:()=>_e(t),children:e.jsx(K,{className:"h-4 w-4"})})]},t))})]});return e.jsx("div",{className:"w-full",children:F?e.jsxs(le,{children:[e.jsx(ne,{children:e.jsx(ie,{children:a?"Edit Task":"Task Details"})}),e.jsx(ce,{children:e.jsxs("form",{onSubmit:Ce,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),e.jsx(w,{value:r.title,onChange:s=>x("title",s.target.value),placeholder:"Task title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx(D,{value:r.description||"",onChange:s=>x("description",s.target.value),placeholder:"Task description",className:"h-20"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Task Type"}),e.jsxs(A,{value:r.type,onValueChange:s=>x("type",s),children:[e.jsx(_,{children:e.jsx(G,{placeholder:"Select type"})}),e.jsxs(M,{children:[e.jsx(d,{value:"generic",children:"Generic"}),e.jsx(d,{value:"meeting",children:"Meeting"}),e.jsx(d,{value:"metric",children:"Metric"}),e.jsx(d,{value:"action",children:"Action"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Priority"}),e.jsxs(A,{value:r.priority,onValueChange:s=>x("priority",s),children:[e.jsx(_,{children:e.jsx(G,{placeholder:"Select priority"})}),e.jsxs(M,{children:[e.jsx(d,{value:"low",children:"Low"}),e.jsx(d,{value:"medium",children:"Medium"}),e.jsx(d,{value:"high",children:"High"}),e.jsx(d,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Project"}),e.jsxs(A,{value:r.project||"",onValueChange:s=>x("project",s),children:[e.jsx(_,{children:e.jsx(G,{placeholder:"Select project"})}),e.jsxs(M,{children:[e.jsx(d,{value:null,children:"No Project"}),R.map(s=>e.jsx(d,{value:s.name,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Due Date & Time"}),e.jsxs(ue,{children:[e.jsx(he,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),r.due_date?Be(new Date(r.due_date),"PPP p"):e.jsx("span",{children:"Pick a date & time"})]})}),e.jsx(xe,{className:"w-auto p-0",children:e.jsx(ze,{mode:"single",selected:r.due_date?new Date(r.due_date):void 0,onSelect:s=>{if(s){const t=new Date(s),o=new Date;t.setHours(o.getHours()),t.setMinutes(o.getMinutes()),x("due_date",t.toISOString())}}})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Assignee Type"}),e.jsxs(A,{value:f,onValueChange:s=>{I(s),B(""),x("assignee","")},children:[e.jsx(_,{children:e.jsx(G,{placeholder:"Select type"})}),e.jsxs(M,{children:[e.jsx(d,{value:"stakeholder",children:"Stakeholder"}),e.jsx(d,{value:"member",children:"Team Member"}),e.jsx(d,{value:"peer",children:"Peer"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Assignee"}),e.jsxs(A,{value:z,onValueChange:s=>{B(s),x("assignee",s?{type:f,id:s}:"")},disabled:!f,children:[e.jsx(_,{children:e.jsx(G,{placeholder:f?"Select assignee":"Select type first"})}),e.jsxs(M,{children:[f==="stakeholder"&&C.map(s=>e.jsx(d,{value:s.id,children:s.name},s.id)),f==="member"&&V.map(s=>e.jsx(d,{value:s.id,children:s.name},s.id)),f==="peer"&&i.map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Strategic"}),e.jsxs(y,{type:"button",variant:r.strategic?"default":"outline",className:"w-full justify-start",onClick:()=>x("strategic",!r.strategic),children:[r.strategic&&e.jsx($,{className:"mr-2 h-4 w-4"}),r.strategic?"Strategic Task":"Tactical Task"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Estimated Hours"}),e.jsx(w,{type:"number",step:"0.5",min:"0",value:r.estimated_hours||"",onChange:s=>x("estimated_hours",s.target.value),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Actual Hours"}),e.jsx(w,{type:"number",step:"0.5",min:"0",value:r.actual_hours||"",onChange:s=>x("actual_hours",s.target.value),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tags"}),e.jsx(Ue,{value:Array.isArray(r.tags)?r.tags:[],onChange:s=>x("tags",s),placeholder:"Add tags to categorize your task"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Stakeholders"}),e.jsxs(A,{value:(r.stakeholders||[])[0]||"",onValueChange:s=>{x("stakeholders",s?[s]:[])},children:[e.jsx(_,{children:e.jsx(G,{placeholder:"Select a stakeholder"})}),e.jsxs(M,{children:[e.jsx(d,{value:null,children:"None"}),C.map(s=>e.jsxs(d,{value:s.name,children:[s.name," ",s.role&&`(${s.role})`]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Related Goals"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{type:"button",variant:"outline",size:"sm",onClick:Ne,disabled:Z||!r.title&&!r.description,className:"flex items-center gap-1",children:[Z?e.jsx(te,{className:"h-3 w-3 animate-spin"}):e.jsx(Fe,{className:"h-3 w-3"}),"Suggest Goals"]}),z&&f==="team_member"&&e.jsxs(y,{type:"button",variant:"outline",size:"sm",onClick:Se,className:"flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3"}),"Get Ideas"]})]})]}),P.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:P.map(s=>e.jsxs(pe,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3"}),s.title,e.jsx(y,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 ml-1",onClick:()=>we(s.id),children:e.jsx(K,{className:"h-3 w-3"})})]},s.id))}),e.jsx(De,{open:ye,onOpenChange:O,children:e.jsxs(He,{children:[e.jsx(Oe,{children:e.jsx(Ke,{children:"Related Goal Suggestions"})}),e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[Y.map(s=>e.jsxs("div",{className:"flex items-start justify-between p-3 border rounded-lg hover:bg-muted/50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:s.title}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-1",children:[e.jsx("strong",{children:"Focus:"})," ",s.developmentNeed]}),s.developmentActivity&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Activity:"})," ",s.developmentActivity.substring(0,100),s.developmentActivity.length>100&&"..."]})]}),e.jsx(y,{type:"button",size:"sm",variant:"outline",onClick:()=>ke(s),disabled:P.find(t=>t.id===s.id),children:e.jsx(U,{className:"h-3 w-3"})})]},s.id)),Y.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No related goals found. Try updating the task title or description."})]})]})})]})]}),Ge(),Ae(),e.jsx(Te,{className:"px-0 pt-4",children:e.jsxs("div",{className:"flex justify-end gap-2 w-full",children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>{a?n(null):v(!1)},children:"Cancel"}),e.jsx(y,{type:"submit",children:a?"Update Task":"Create Task"})]})})]})})]}):e.jsxs(le,{children:[e.jsx(ne,{children:e.jsx(ie,{children:"Create New Task"})}),e.jsx(ce,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(D,{placeholder:"Enter task naturally: 'Schedule quarterly review meeting with design team next Tuesday at 2pm'",value:c,onChange:s=>m(s.target.value),onKeyDown:be,className:"h-24",disabled:u})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{variant:"outline",onClick:()=>v(!0),children:"Enter Details Manually"}),e.jsx(y,{onClick:se,disabled:!c.trim()||u,className:"relative",children:u?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Create Task"})]})]})})]})})}export{os as default};

import{A as U,j as e,B as p,C as g,e as x,f as y,g as C,h as T,i as _,T as A,l as h}from"./index-_IHT-c74.js";import{r as c}from"./chunk-BtLBHxfC.js";import{B as F,D as S,a as L,b as R,c as B}from"./chunk-D86Ln6ud.js";import K from"./TaskCreationForm-DevYnV9o.js";import{w as N,f as O,G as z,J as W,K as X}from"./chunk-DM9eM2r-.js";import{R as Y,L as q,X as J,Y as $,T as I,a as f}from"./chunk-D29Z_lJG.js";import{f as w}from"./chunk-Da4zzxcD.js";import"./chunk-KzYfAQy1.js";import"./chunk-BtP79rFL.js";import"./chunk-lcksmgkV.js";import"./chunk-BTSnrFdK.js";import"./chunk-DntrI-0R.js";function ne(){const{tasks:n,refreshAll:k}=c.useContext(U),[Q,D]=c.useState([]),[j,E]=c.useState([]),[v,u]=c.useState(!1);c.useEffect(()=>{const t=Array.isArray(n)?n:[];D(t);const s=t.filter(r=>r.type==="metric");E(s)},[n]);const M=async()=>{try{await k()}catch(t){h.error("Failed to refresh tasks (metrics)",{error:String(t)})}},P=async t=>{if(!t){u(!1);return}try{await A.create({...t,type:"metric"}),await M(),u(!1)}catch(s){h.error("Failed to create metric",{error:String(s)})}},b=j.reduce((t,s)=>{const r=s.metadata?.metric?.kpi_name;return r&&(t[r]||(t[r]=[]),t[r].push(s)),t},{}),V=t=>{if(!t||t.length<2)return{trend:"neutral",percentage:0};const s=[...t].sort((d,G)=>new Date(d.created_date)-new Date(G.created_date)),r=s[s.length-1],o=s[s.length-2],a=parseFloat(r.metadata?.metric?.current_value)||0,i=parseFloat(o.metadata?.metric?.current_value)||0;if(a===i)return{trend:"neutral",percentage:0};const m=a-i,l=i!==0?Math.abs(Math.round(m/i*100)):0;return{trend:m>0?"up":"down",percentage:l}},H=t=>t.filter(s=>s.metadata?.metric?.current_value).map(s=>({date:w(new Date(s.created_date),"MMM dd"),value:parseFloat(s.metadata?.metric?.current_value)||0,target:parseFloat(s.metadata?.metric?.target_value)||void 0})).sort((s,r)=>new Date(s.date)-new Date(r.date));return e.jsxDEV("div",{className:"p-6",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Metrics Dashboard"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:107,columnNumber:11},this),e.jsxDEV(p,{onClick:()=>u(!0),children:[e.jsxDEV(N,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:109,columnNumber:13},this),"Track New Metric"]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:108,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:106,columnNumber:9},this),Object.keys(b).length===0?e.jsxDEV(g,{className:"bg-gray-50 border-dashed",children:e.jsxDEV(x,{className:"flex flex-col items-center justify-center h-64",children:[e.jsxDEV(O,{className:"h-12 w-12 text-gray-400 mb-4"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:117,columnNumber:15},this),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No metrics being tracked"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:118,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-500 text-center mb-4",children:"Start tracking your key product metrics to monitor performance"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:119,columnNumber:15},this),e.jsxDEV(p,{onClick:()=>u(!0),children:[e.jsxDEV(N,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:121,columnNumber:17},this),"Add First Metric"]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:120,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:116,columnNumber:13},this)},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:115,columnNumber:11},this):e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(b).map(([t,s])=>{const r=V(s),o=H(s),a=s.sort((l,d)=>new Date(d.created_date)-new Date(l.created_date))[0],i=a.metadata?.metric?.current_value,m=a.metadata?.metric?.target_value;return e.jsxDEV(g,{className:"overflow-hidden",children:[e.jsxDEV(y,{className:"pb-2",children:e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{children:[e.jsxDEV(C,{children:t},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:143,columnNumber:25},this),e.jsxDEV(T,{children:a.metadata?.metric?.measurement_frequency||"Tracked periodically"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:144,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:142,columnNumber:23},this),e.jsxDEV(F,{variant:"outline",children:[s.length," updates"]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:148,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:141,columnNumber:21},this)},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:140,columnNumber:19},this),e.jsxDEV(x,{className:"pb-0",children:[e.jsxDEV("div",{className:"flex items-baseline justify-between",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:i},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:153,columnNumber:23},this),r.percentage>0&&e.jsxDEV("div",{className:`flex items-center ${r.trend==="up"?"text-green-600":"text-red-600"}`,children:[r.trend==="up"?e.jsxDEV(z,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:159,columnNumber:29},this):e.jsxDEV(W,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:161,columnNumber:29},this),r.percentage,"%"]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:155,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:152,columnNumber:21},this),m&&e.jsxDEV("div",{className:"flex items-center mt-1",children:[e.jsxDEV(X,{className:"h-3 w-3 mr-1 text-gray-400"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:170,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm text-gray-500",children:["Target: ",m]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:171,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:169,columnNumber:23},this),e.jsxDEV("div",{className:"h-36 mt-4",children:e.jsxDEV(Y,{width:"100%",height:"100%",children:e.jsxDEV(q,{data:o,children:[e.jsxDEV(J,{dataKey:"date",tick:{fontSize:12},tickLine:!1,axisLine:!1},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:178,columnNumber:27},this),e.jsxDEV($,{tick:{fontSize:12},tickLine:!1,axisLine:!1,width:30},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:184,columnNumber:27},this),e.jsxDEV(I,{},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:190,columnNumber:27},this),e.jsxDEV(f,{type:"monotone",dataKey:"value",stroke:"#6366F1",strokeWidth:2,dot:{r:3},activeDot:{r:5}},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:191,columnNumber:27},this),o.some(l=>l.target!==void 0)&&e.jsxDEV(f,{type:"monotone",dataKey:"target",stroke:"#E5E7EB",strokeWidth:1,strokeDasharray:"4 4",dot:!1},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:200,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:177,columnNumber:25},this)},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:176,columnNumber:23},this)},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:175,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:151,columnNumber:19},this),e.jsxDEV(_,{className:"pt-4",children:e.jsxDEV("div",{className:"text-xs text-gray-500",children:["Last updated: ",w(new Date(a.created_date),"PPp")]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:214,columnNumber:21},this)},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:213,columnNumber:19},this)]},t,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:139,columnNumber:17},this)})},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:127,columnNumber:11},this),e.jsxDEV(S,{open:v,onOpenChange:u,children:e.jsxDEV(L,{className:"sm:max-w-lg",children:[e.jsxDEV(R,{children:e.jsxDEV(B,{children:"Track New Metric"},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:228,columnNumber:15},this)},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:227,columnNumber:13},this),e.jsxDEV(K,{onCreateTask:P,initialTaskData:{status:"todo",priority:"medium",type:"metric",metadata:{metric:{}}}},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:230,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:226,columnNumber:11},this)},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:225,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:105,columnNumber:7},this)},void 0,!1,{fileName:"/Users/i306072/Documents/GitHub/P-E/.auto-claude/worktrees/tasks/002-add-team-member-clustering-with-expandable-groups-/src/pages/Metrics.jsx",lineNumber:104,columnNumber:5},this)}export{ne as default};

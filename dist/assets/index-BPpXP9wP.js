const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Tasks-DAPgbdhG.js","assets/chunk-BlD_ekKQ.js","assets/chunk-BKwDNIOR.js","assets/TaskCreationForm-Prd0TgOH.js","assets/chunk-KzYfAQy1.js","assets/chunk-DBni0BOz.js","assets/chunk-D12Apl6f.js","assets/chunk-P_BNsj9B.js","assets/chunk-CmitwiBI.js","assets/chunk-BdHZTqfh.js","assets/chunk-B-ktFKGP.js","assets/chunk-CeaKTvYS.js","assets/chunk-D-Q6W0fT.js","assets/chunk-D_ZZ1PTM.js","assets/chunk-Bhq-Vrg0.js","assets/chunk-fsVcrzvE.js","assets/chunk-C_wS6JmM.js","assets/chunk-NOAukTlf.js","assets/Calendar-CLPDnjHe.js","assets/chunk-uiVOWrDz.js","assets/chunk-BugMYHNG.js","assets/chunk-DVqya-Gr.js","assets/Metrics-CERSLd8q.js","assets/chunk-A9iCQE3I.js","assets/chunk-Ct3-qmTO.js","assets/Stakeholders-CpNlfmTH.js","assets/chunk-CmVL7815.js","assets/Projects-Bd2ZDYny.js","assets/chunk-CdPUXhzC.js","assets/chunk-Dptei7s9.js","assets/Settings-CHnq07nq.js","assets/chunk-COZz_0DJ.js","assets/chunk-DMX850LI.js","assets/Team-B7dAHZQN.js","assets/ProjectDetails-CYBrFNaG.js","assets/TeamMemberProfile-Brrj1wOR.js","assets/Peers-C0E3lYSD.js","assets/chunk-CFkj9Kyo.js","assets/PeerProfile-vRnxdXZm.js","assets/chunk-BHBPFuFx.js","assets/Duties-CSF4tw5w.js","assets/chunk-CZG1sOuO.js","assets/GitHubRepos-Dt82xaTT.js","assets/JiraIssues-CnG4h1QO.js","assets/Services-b2-kKXF5.js","assets/Roadmap-DBzVashU.js","assets/Backlog-CYaAggIu.js","assets/Analytics-DLzc4XPg.js","assets/Feedback-DHWks-hX.js","assets/Releases-Qf1P4qcK.js","assets/CaptureInbox-DPCspqq0.js","assets/CaptureRules-DFIwMbAY.js","assets/BugDashboard-CY96wKZP.js"])))=>i.map(i=>d[i]);
import{j as e,b as mt,F as pt,I as ht,S as Ms,d as ft,V as Ls,e as Fs,f as xt,g as Us,U as gt,B as zs,h as Vs,L as yt,i as Bs,M as Js,k as bt,l as le,m as Gs,n as Hs,X as ke,o as Ue,T as Ks,p as vt,q as wt,r as ze,s as Ws,t as qs,v as Ys,w as jt,x as Xs,y as Ye,z as Nt,A as Qs,D as Zs,E as ea,G as ta,H as sa,J as aa,K as at,N as ra,Q as na,W as oa,Y as ia,Z as la,_ as ca,$ as da,a0 as ua,a1 as ma,a2 as pa,a3 as ha,a4 as fa,a5 as xa,a6 as Tt,a7 as ga,a8 as ya,a9 as ba,aa as va,ab as wa,ac as Z,ad as Ee,P as ce,ae as St,af as ja,ag as Na,ah as Et,ai as Ta,aj as Sa,ak as Ea,al as Ca}from"./chunk-BlD_ekKQ.js";import{f as _a,g as ka,a as o,u as Ct,h as Aa,L as rt,B as Pa,i as Ra,j as I,b as Ia,d as U}from"./chunk-BKwDNIOR.js";import{t as Da,c as Oa,a as Ae,f as $a}from"./chunk-P_BNsj9B.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();var ve={},nt;function Ma(){if(nt)return ve;nt=1;var a=_a();return ve.createRoot=a.createRoot,ve.hydrateRoot=a.hydrateRoot,ve}var La=Ma();const Fa=ka(La),Ua="modulepreload",za=function(a){return"/"+a},ot={},$=function(t,s,r){let n=Promise.resolve();if(s&&s.length>0){let m=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),x=u?.nonce||u?.getAttribute("nonce");n=m(s.map(p=>{if(p=za(p),p in ot)return;ot[p]=!0;const y=p.endsWith(".css"),N=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${N}`))return;const i=document.createElement("link");if(i.rel=y?"stylesheet":Ua,y||(i.as="script"),i.crossOrigin="",i.href=p,x&&i.setAttribute("nonce",x),document.head.appendChild(i),y)return new Promise((S,b)=>{i.addEventListener("load",S),i.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(m){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=m,window.dispatchEvent(u),!u.defaultPrevented)throw m}return n.then(m=>{for(const u of m||[])u.status==="rejected"&&l(u.reason);return t().catch(l)})};function L(a){return"/"+a.toLowerCase().replace(/ /g,"-")}function c(...a){return Da(Oa(a))}const Ie="auth_token",De="auth_user",we="https://pe-manager-backend.cfapps.eu01-canary.hana.ondemand.com/api";class Q{static async login(t,s){try{const r=await fetch(`${we}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:s})}),n=await r.json();return r.ok?(this.storeToken(n.token),this.storeUser(n.user),{success:!0,user:n.user}):{success:!1,error:n.message||"Login failed"}}catch(r){return console.error("Login error:",r),{success:!1,error:"Network error. Please check your connection."}}}static storeToken(t){try{localStorage.setItem(Ie,t)}catch(s){throw console.error("Failed to store token:",s),s}}static storeUser(t){try{localStorage.setItem(De,JSON.stringify(t))}catch(s){console.error("Failed to store user:",s)}}static getToken(){try{return localStorage.getItem(Ie)}catch(t){return console.error("Failed to get token:",t),null}}static getStoredUser(){try{const t=localStorage.getItem(De);return t?JSON.parse(t):null}catch(t){return console.error("Failed to get user:",t),null}}static isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])).exp*1e3;return Date.now()<r}catch{return!1}}static clearAuthData(){try{return localStorage.removeItem(Ie),localStorage.removeItem(De),!0}catch(t){return console.error("Failed to clear auth data:",t),!1}}static async changePassword(t,s){try{const r=this.getToken();if(!r)return{success:!1,error:"Not authenticated"};const n=await fetch(`${we}/auth/change-password`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({currentPassword:t,newPassword:s})}),l=await n.json();return n.ok?{success:!0}:{success:!1,error:l.message||"Failed to change password"}}catch(r){return console.error("Change password error:",r),{success:!1,error:"Network error. Please try again."}}}static async fetchCurrentUser(){try{const t=this.getToken();if(!t)return null;const s=await fetch(`${we}/auth/me`,{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)return s.status===401&&this.clearAuthData(),null;const r=await s.json();return this.storeUser(r),r}catch(t){return console.error("Fetch user error:",t),null}}static async setupInitialAdmin(t){try{const s=await fetch(`${we}/auth/setup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})}),r=await s.json();return s.ok?{success:!0,user:r.user}:{success:!1,error:r.message||"Setup failed"}}catch(s){return console.error("Setup error:",s),{success:!1,error:"Network error. Please try again."}}}}const Va={},oe={DEBUG:0,INFO:1,WARN:2,ERROR:3};class Ba{constructor(){const t=typeof import.meta<"u"&&Va&&!0;this.level=t?oe.WARN:oe.DEBUG}setLevel(t){typeof t=="number"&&(this.level=t)}debug(t,s={}){this.level<=oe.DEBUG&&console.debug("[DEBUG]",t,s)}info(t,s={}){this.level<=oe.INFO&&console.info("[INFO]",t,s)}warn(t,s={}){this.level<=oe.WARN&&console.warn("[WARN]",t,s)}error(t,s={}){this.level<=oe.ERROR&&(console.error("[ERROR]",t,s),this.reportError(t,s))}reportError(t,s){try{const r="pe_manager_error_log",n=JSON.parse(localStorage.getItem(r)||"[]");n.unshift({message:t,context:s,ts:new Date().toISOString()}),localStorage.setItem(r,JSON.stringify(n.slice(0,10)))}catch{}}}const F=new Ba,h="https://pe-manager-backend.cfapps.eu01-canary.hana.ondemand.com/api";function Ja(a,t){if(!a.ok){const s=new Error(`HTTP ${a.status} - ${a.statusText} at ${t}`);throw s.status=a.status,F.error("HTTP request failed",{endpoint:t,status:a.status,statusText:a.statusText}),a.status===401&&Q.clearAuthData(),s}}async function f(a,t={}){const s={"Content-Type":"application/json",...t.headers},r=Q.getToken();r&&(s.Authorization=`Bearer ${r}`);try{const n=await fetch(a,{...t,headers:s});return Ja(n,a),n.status===204?null:await n.json()}catch(n){throw F.error("API request failed",{url:a,error:String(n)}),n}}function A(a){return{async list(){return f(`${h}${a}`)},async get(t){return f(`${h}${a}/${t}`)},async create(t){return f(`${h}${a}`,{method:"POST",body:JSON.stringify(t)})},async update(t,s){return f(`${h}${a}/${t}`,{method:"PUT",body:JSON.stringify(s)})},async delete(t){return await f(`${h}${a}/${t}`,{method:"DELETE"}),!0}}}function Ga(){return{...A("/work-items"),async listByTeamMember(t,s=null){let r=`${h}/work-items?team_member_id=${t}`;return s&&(r+=`&status=${s}`),f(r)},async addInsight(t,s){return f(`${h}/work-items/${t}/insights`,{method:"POST",body:JSON.stringify(s)})}}}function Ha(){return{...A("/developer-goals"),async list(t,s=null){let r=`${h}/developer-goals?team_member_id=${t}`;return s&&(r+=`&year=${s}`),f(r)}}}function Ka(){return{...A("/performance-evaluations"),async list(t){return f(`${h}/performance-evaluations?team_member_id=${t}`)},async getByYear(t,s){return f(`${h}/performance-evaluations/by-year?team_member_id=${t}&year=${s}`)}}}function Wa(){return{...A("/task-attributes"),async bulkCreate(t){const s=[];for(const r of t)try{const n=await f(`${h}/task-attributes`,{method:"POST",body:JSON.stringify(r)});s.push(n)}catch(n){console.warn("Failed to create attribute:",r.name,n)}return s}}}function qa(){return{...A("/devops-duties"),async listByTeamMember(t){return f(`${h}/devops-duties/team-member/${t}`)},async addInsight(t,s){return f(`${h}/devops-duties/${t}/insights`,{method:"POST",body:JSON.stringify({insight:s})})},async complete(t,s){return f(`${h}/devops-duties/${t}/complete`,{method:"POST",body:JSON.stringify(s)})}}}function Ya(){return{...A("/duty-schedule"),async listUpcoming(t=null){let s=`${h}/duty-schedule/upcoming`;return t&&(s+=`?team=${encodeURIComponent(t)}`),f(s)},async listByDateRange(t,s,r={}){let n=`${h}/duty-schedule/date-range?start_date=${t}&end_date=${s}`;return r.team&&(n+=`&team=${encodeURIComponent(r.team)}`),r.duty_type&&(n+=`&duty_type=${encodeURIComponent(r.duty_type)}`),f(n)},async listByTeam(t){return f(`${h}/duty-schedule?team=${encodeURIComponent(t)}`)},async getTeamMembers(t){return f(`${h}/duty-schedule/team-members/${encodeURIComponent(t)}`)}}}function Xa(){return{...A("/time-off"),async listByDateRange(t,s,r={}){let n=`${h}/time-off/date-range?start_date=${t}&end_date=${s}`;return r.team_member_id&&(n+=`&team_member_id=${encodeURIComponent(r.team_member_id)}`),r.type&&(n+=`&type=${encodeURIComponent(r.type)}`),f(n)},async listUpcoming(t=30){return f(`${h}/time-off/upcoming?days=${t}`)},async listByTeamMember(t){return f(`${h}/time-off/team-member/${t}`)}}}function Qa(){return{...A("/capture-inbox"),async accept(t,s={}){return f(`${h}/capture-inbox/${t}/accept`,{method:"POST",body:JSON.stringify(s)})},async reject(t,s={}){return f(`${h}/capture-inbox/${t}/reject`,{method:"POST",body:JSON.stringify(s)})},async bulkAccept(t,s={}){return f(`${h}/capture-inbox/bulk-accept`,{method:"POST",body:JSON.stringify({item_ids:t,...s})})},async bulkReject(t){return f(`${h}/capture-inbox/bulk-reject`,{method:"POST",body:JSON.stringify({item_ids:t})})}}}function Za(){return{...A("/entity-mappings"),async lookup(t){return f(`${h}/entity-mappings/lookup/${encodeURIComponent(t)}`)}}}function er(){const a=A("/notifications");return{...a,async getUnreadCount(){return f(`${h}/notifications/unread-count`)},async markAsRead(t){return a.update(t,{read:!0})},async markAllAsRead(){const s=(await a.list()).filter(r=>!r.read);return await Promise.all(s.map(r=>a.update(r.id,{read:!0}))),{updated:s.length}}}}const ee={entities:{Task:A("/tasks"),Project:A("/projects"),Stakeholder:A("/stakeholders"),TeamMember:A("/team-members"),OneOnOne:A("/one-on-ones"),Meeting:A("/meetings"),CalendarEvent:A("/calendar-events"),Notification:er(),Reminder:A("/reminders"),Comment:A("/comments"),TaskAttribute:Wa(),WorkItem:Ga(),DeveloperGoal:Ha(),PerformanceEvaluation:Ka(),DevOpsDuty:qa(),DutySchedule:Ya(),TimeOff:Xa(),JiraIssue:{...A("/jira-issues"),async listWithFilters(a={}){const t=new URLSearchParams;a.status&&t.append("status",a.status),a.assignee&&t.append("assignee",a.assignee),a.sprint&&t.append("sprint",a.sprint);const s=t.toString(),r=`${h}/jira-issues${s?"?"+s:""}`;return f(r)},async getFilterOptions(){return f(`${h}/jira-issues/filters`)},async getSyncStatus(){return f(`${h}/jira-issues/status`)}},JiraMapping:A("/jira-issues/mappings"),Peer:A("/peers"),Duty:A("/duties"),AgendaItem:A("/agenda-items"),PersonalFileItem:A("/personal-file-items"),CaptureInbox:Qa(),EntityMapping:Za(),CaptureRule:A("/capture-rules")},auth:{async me(){return f(`${h}/auth/me`)},async logout(){return!0}},backup:{async export(){return f(`${h}/backup/export`)},async import(a,t="merge"){return f(`${h}/backup/import`,{method:"POST",body:JSON.stringify({data:a,mode:t})})}},userSettings:{async getGitHubStatus(){return f(`${h}/user-settings/github/status`)},async setGitHubToken(a){return f(`${h}/user-settings/github/token`,{method:"POST",body:JSON.stringify({token:a})})},async deleteGitHubToken(){return f(`${h}/user-settings/github/token`,{method:"DELETE"})},async get(a){return f(`${h}/user-settings/${a}`)},async set(a,t,s=!1){return f(`${h}/user-settings/${a}`,{method:"PUT",body:JSON.stringify({value:t,encrypted:s})})},async delete(a){return f(`${h}/user-settings/${a}`,{method:"DELETE"})}},metrics:{async getOneOnOneCompliance(a=30){return f(`${h}/metrics/one-on-one-compliance?rollingDays=${a}`)},async getOneOnOneCadenceRules(){return f(`${h}/metrics/one-on-one-compliance/cadence-rules`)}},github:{async listRepos(){return f(`${h}/github/repos`)},async addRepo(a){return f(`${h}/github/repos`,{method:"POST",body:JSON.stringify({full_name:a})})},async getRepo(a){return f(`${h}/github/repos/${a}`)},async removeRepo(a){return f(`${h}/github/repos/${a}`,{method:"DELETE"})},async searchRepos(a){return f(`${h}/github/repos/search?q=${encodeURIComponent(a)}`)},async linkRepoToProject(a,t){return f(`${h}/github/repos/${a}/link`,{method:"PUT",body:JSON.stringify({project_id:t})})},async syncRepo(a){return f(`${h}/github/repos/${a}/sync`,{method:"POST"})},async syncAllRepos(){return f(`${h}/github/sync`,{method:"POST"})},async getPullRequests(a,t=null){let s=`${h}/github/repos/${a}/pulls`;return t&&(s+=`?state=${t}`),f(s)},async getIssues(a,t=null){let s=`${h}/github/repos/${a}/issues`;return t&&(s+=`?state=${t}`),f(s)},async getCommits(a,t=50){return f(`${h}/github/repos/${a}/commits?limit=${t}`)}},bugs:{async checkDuplicate(a){return f(`${h}/bugs/uploads/check?weekEnding=${a}`)},async listUploads(){return f(`${h}/bugs/uploads`)},async getUpload(a){return f(`${h}/bugs/uploads/${a}`)},async deleteUpload(a){return await f(`${h}/bugs/uploads/${a}`,{method:"DELETE"}),!0},async getKPIs(a,t=null){let s=`${h}/bugs/kpis?uploadId=${a}`;return t&&(s+=`&component=${encodeURIComponent(t)}`),f(s)},async listBugs(a,t={}){const s=new URLSearchParams;return s.append("uploadId",a),t.component&&s.append("component",t.component),t.status&&s.append("status",t.status),t.priority&&s.append("priority",t.priority),t.limit&&s.append("limit",t.limit),t.offset&&s.append("offset",t.offset),f(`${h}/bugs/list?${s.toString()}`)},async listBugsByDateRange(a,t,s={}){const r=new URLSearchParams;return r.append("startDate",a),r.append("endDate",t),s.component&&r.append("component",s.component),s.status&&r.append("status",s.status),s.priority&&r.append("priority",s.priority),s.limit&&r.append("limit",s.limit),s.offset&&r.append("offset",s.offset),f(`${h}/bugs/by-date-range?${r.toString()}`)},async getKPIsByDateRange(a,t,s=null){let r=`${h}/bugs/kpis-by-date-range?startDate=${a}&endDate=${t}`;return s&&(r+=`&component=${encodeURIComponent(s)}`),f(r)},async getKPIHistory(a=12,t=null){let s=`${h}/bugs/kpis/history?weeks=${a}`;return t&&(s+=`&component=${encodeURIComponent(t)}`),f(s)}},emailPreferences:{async list(){return f(`${h}/email-preferences`)},async get(a){return f(`${h}/email-preferences/${a}`)},async update(a,t){return f(`${h}/email-preferences/${a}`,{method:"PUT",body:JSON.stringify(t)})},async delete(a){return await f(`${h}/email-preferences/${a}`,{method:"DELETE"}),!0}}},M=ee,_t=M.entities.Task,kt=M.entities.Project,At=M.entities.Stakeholder,Pt=M.entities.TeamMember,tr=M.entities.TaskAttribute,Rt=M.entities.OneOnOne,sr=M.entities.Meeting,ar=M.entities.CalendarEvent,he=M.entities.Notification,rr=M.entities.Reminder,nr=M.entities.Comment,or=M.entities.WorkItem,ir=M.entities.OutOfOffice,lr=M.entities.Peer,cr=M.entities.Duty,dr=M.entities.AgendaItem,ur=M.entities.PersonalFileItem,mr=M.entities.DeveloperGoal,pr=M.entities.PerformanceEvaluation,hr=M.entities.DevOpsDuty,fr=M.entities.DutySchedule,xr=M.entities.TimeOff,gr=ee.backup,yr=ee.github,br=ee.userSettings,vr=ee.entities.JiraIssue,wr=ee.entities.JiraMapping,jr=ee.entities.CaptureInbox,Nr=ee.entities.EntityMapping,Tr=ee.entities.CaptureRule,It=ee.auth,Qn=Object.freeze(Object.defineProperty({__proto__:null,AgendaItem:dr,Backup:gr,CalendarEvent:ar,CaptureInbox:jr,CaptureRule:Tr,Comment:nr,DevOpsDuty:hr,DeveloperGoal:mr,Duty:cr,DutySchedule:fr,EntityMapping:Nr,GitHub:yr,JiraIssue:vr,JiraMapping:wr,Meeting:sr,Notification:he,OneOnOne:Rt,OutOfOffice:ir,Peer:lr,PerformanceEvaluation:pr,PersonalFileItem:ur,Project:kt,Reminder:rr,Stakeholder:At,Task:_t,TaskAttribute:tr,TeamMember:Pt,TimeOff:xr,User:It,UserSettings:br,WorkItem:or},Symbol.toStringTag,{value:"Module"})),Ce=o.forwardRef(({className:a,...t},s)=>e.jsx(mt,{ref:s,className:c("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t}));Ce.displayName=mt.displayName;const Sr=o.forwardRef(({className:a,...t},s)=>e.jsx(ht,{ref:s,className:c("aspect-square h-full w-full",a),...t}));Sr.displayName=ht.displayName;const _e=o.forwardRef(({className:a,...t},s)=>e.jsx(pt,{ref:s,className:c("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t}));_e.displayName=pt.displayName;const Dt=o.createContext(null),xe=()=>{const a=o.useContext(Dt);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},Er=({children:a})=>{const[t,s]=o.useState(!1),[r,n]=o.useState(null),[l,m]=o.useState(!0),[u,x]=o.useState(null);o.useEffect(()=>{(async()=>{try{if(x(null),Q.isAuthenticated()){const g=await Q.fetchCurrentUser();g?(n(g),s(!0)):(Q.clearAuthData(),s(!1),n(null))}else s(!1),n(null)}catch(g){console.error("Failed to initialize authentication state:",g),x("Failed to initialize authentication. Please refresh the page."),s(!1),n(null)}finally{m(!1)}})()},[]);const S={isAuthenticated:t,user:r,login:async(b,g)=>{try{if(x(null),!b||!g)return{success:!1,error:"Please fill in all fields"};const d=await Q.login(b,g);return d.success?(n(d.user),s(!0),{success:!0}):{success:!1,error:d.error||"Invalid username or password"}}catch(d){return console.error("Login failed:",d),{success:!1,error:"Authentication failed. Please try again."}}},logout:()=>{try{x(null),Q.clearAuthData(),s(!1),n(null)}catch(b){console.error("Logout failed:",b),s(!1),n(null)}},loading:l,error:u,clearError:()=>{x(null)},refreshUser:async()=>{try{const b=await Q.fetchCurrentUser();b&&n(b)}catch(b){console.error("Failed to refresh user:",b)}}};return e.jsx(Dt.Provider,{value:S,children:a})},it="pe_manager_presentation_mode",Ot=o.createContext(null),Cr=()=>{const a=o.useContext(Ot);if(!a)throw new Error("useDisplayMode must be used within a DisplayModeProvider");return a},_r=({children:a})=>{const[t,s]=o.useState(()=>{try{return localStorage.getItem(it)==="true"}catch{return!1}});o.useEffect(()=>{try{localStorage.setItem(it,t.toString())}catch(u){console.error("Failed to persist presentation mode:",u)}},[t]);const m={isPresentationMode:t,togglePresentationMode:()=>{s(u=>!u)},enablePresentationMode:()=>{s(!0)},disablePresentationMode:()=>{s(!1)}};return e.jsx(Ot.Provider,{value:m,children:a})},lt="pe_manager_app_mode",$t=o.createContext(null),Mt=()=>{const a=o.useContext($t);if(!a)throw new Error("useAppMode must be used within an AppModeProvider");return a},kr=({children:a})=>{const[t,s]=o.useState(()=>{try{return localStorage.getItem(lt)==="true"}catch{return!1}});o.useEffect(()=>{try{localStorage.setItem(lt,t.toString())}catch(u){console.error("Failed to persist app mode:",u)}},[t]);const r=o.useCallback(()=>(s(u=>!u),!t),[t]),n=o.useCallback(()=>{s(!1)},[]),l=o.useCallback(()=>{s(!0)},[]),m={isProductMode:t,isPeopleMode:!t,toggleAppMode:r,enablePeopleMode:n,enableProductMode:l,currentMode:t?"Product & Engineering":"People & Engineering",currentModeShort:t?"Product":"People"};return e.jsx($t.Provider,{value:m,children:a})},Ar=Ae("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),z=o.forwardRef(({className:a,variant:t,size:s,asChild:r=!1,...n},l)=>{const m=r?Ms:"button";return e.jsx(m,{className:c(Ar({variant:t,size:s,className:a})),ref:l,...n})});z.displayName="Button";const Xe=o.forwardRef(({className:a,children:t,...s},r)=>e.jsxs(ft,{ref:r,className:c("relative overflow-hidden",a),...s,children:[e.jsx(Ls,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Lt,{}),e.jsx(Fs,{})]}));Xe.displayName=ft.displayName;const Lt=o.forwardRef(({className:a,orientation:t="vertical",...s},r)=>e.jsx(xt,{ref:r,orientation:t,className:c("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...s,children:e.jsx(Us,{className:"relative flex-1 rounded-full bg-border"})}));Lt.displayName=xt.displayName;const ie="https://pe-manager-backend.cfapps.eu01-canary.hana.ondemand.com/api";async function pe(a,t={}){const s={"Content-Type":"application/json",...t.headers},r=Q.getToken();r&&(s.Authorization=`Bearer ${r}`);const n=await fetch(a,{...t,headers:s});if(!n.ok){const l=new Error(`HTTP ${n.status} - ${n.statusText}`);throw l.status=n.status,l}return n}const je={async getStatus(){return(await pe(`${ie}/ai/status`)).json()},async getTools(){return(await pe(`${ie}/ai/tools`)).json()},async chat(a,t={}){const{history:s=[],useTools:r=!0,pageContext:n=null}=t;return(await pe(`${ie}/ai/chat`,{method:"POST",body:JSON.stringify({messages:a,history:s,useTools:r,pageContext:n})})).json()},async streamChat(a,t={}){const{history:s=[],onChunk:r,onDone:n,onError:l,signal:m}=t;try{const u=Q.getToken(),x=await fetch(`${ie}/ai/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:u?`Bearer ${u}`:""},body:JSON.stringify({messages:a,history:s}),signal:m});if(!x.ok)throw new Error(`HTTP ${x.status} - ${x.statusText}`);const p=x.body.getReader(),y=new TextDecoder;let N="";for(;;){const{done:i,value:S}=await p.read();if(i)break;N+=y.decode(S,{stream:!0});const b=N.split(`
`);N=b.pop()||"";for(const g of b)if(g.startsWith("data: ")){const d=g.slice(6);if(d==="[DONE]"){n&&n();return}try{const v=JSON.parse(d);v.type==="content"&&r?r(v.content):v.type==="done"&&n?n(v):v.type==="error"&&l&&l(new Error(v.message))}catch{console.warn("Failed to parse SSE data:",d)}}}}catch(u){if(u.name==="AbortError")return;if(l)l(u);else throw u}},async executeTool(a,t={}){return(await pe(`${ie}/ai/execute-tool`,{method:"POST",body:JSON.stringify({tool:a,args:t})})).json()},async summarize(a="tasks"){return(await pe(`${ie}/ai/summarize`,{method:"POST",body:JSON.stringify({type:a})})).json()}},Ft=o.createContext(null),Pr=5*60*1e3;function Rr({children:a}){const[t,s]=o.useState([]),[r,n]=o.useState(!1),[l,m]=o.useState(!1),[u,x]=o.useState(null),[p,y]=o.useState(!1),[N,i]=o.useState(null),[S,b]=o.useState(null),[g,d]=o.useState(null),[v,w]=o.useState(!1),T=o.useRef(null),_=o.useCallback(async()=>{try{const k=await je.getStatus();return i(k.available),k.available}catch(k){return console.error("Failed to check AI availability:",k),i(!1),!1}},[]),P=o.useCallback(k=>{b(k),d(new Date().toISOString())},[]),R=o.useCallback(()=>{b(null),d(null)},[]),V=o.useCallback(()=>{w(k=>!k)},[]),B=o.useMemo(()=>{if(!g)return!1;const k=new Date(g).getTime();return Date.now()-k>Pr},[g]),G=o.useMemo(()=>{if(!g)return 0;const k=new Date(g).getTime();return Math.floor((Date.now()-k)/(60*1e3))},[g]),C=o.useCallback(async(k,J={})=>{if(!k.trim())return;const K={role:"user",content:k},X=[...t,K];s(X),n(!0),x(null);try{const W=await je.chat([K],{history:t,useTools:J.useTools!==!1,pageContext:S?{summary:S.summary,page:S.page,timestamp:g,selection:S.selection}:null}),q={role:"assistant",content:W.content};return s([...X,q]),W}catch(W){throw console.error("AI chat error:",W),x(W.message||"Failed to get AI response"),W}finally{n(!1)}},[t,S,g]),O=o.useCallback(async(k,J={})=>{if(!k.trim())return;const K={role:"user",content:k},X=[...t,K];s(X),n(!0),m(!0),x(null),T.current=new AbortController;const W={role:"assistant",content:""};s([...X,W]);try{await je.streamChat([K],{history:t,signal:T.current.signal,onChunk:q=>{s($s=>{const me=[...$s],Re=me.length-1;return me[Re]={...me[Re],content:me[Re].content+q},me})},onDone:q=>{n(!1),m(!1),J.onComplete&&J.onComplete(q)},onError:q=>{x(q.message||"Streaming failed"),n(!1),m(!1)}})}catch(q){q.name!=="AbortError"&&(console.error("AI stream error:",q),x(q.message||"Failed to stream AI response")),n(!1),m(!1)}},[t]),te=o.useCallback(()=>{T.current&&(T.current.abort(),T.current=null,m(!1),n(!1))},[]),be=o.useCallback(()=>{s([]),x(null)},[]),E=o.useCallback(()=>{y(k=>!k)},[]),H=o.useCallback(()=>{y(!0)},[]),Y=o.useCallback(()=>{y(!1)},[]),ae=o.useCallback(async(k="tasks")=>{n(!0),x(null);try{return(await je.summarize(k)).summary}catch(J){throw console.error("Summarize error:",J),x(J.message||"Failed to get summary"),J}finally{n(!1)}},[]),re=o.useCallback(async k=>{const K={summarize_tasks:"Give me a quick summary of my tasks, highlighting anything urgent or overdue.",summarize_projects:"What's the status of my projects? Any that need attention?",analyze_workload:"Analyze my current workload. Am I overloaded? What should I prioritize?",whats_next:"Based on my tasks and deadlines, what should I focus on next?",weekly_review:"Give me a weekly review of my completed tasks and upcoming deadlines."}[k]||k;return O(K)},[O]),ne={messages:t,isLoading:r,isStreaming:l,error:u,isOpen:p,isAvailable:N,pageContext:S,contextTimestamp:g,contextExpanded:v,isContextStale:B,contextStalenessMinutes:G,sendMessage:C,sendMessageStreaming:O,cancelStreaming:te,clearChat:be,toggleChat:E,openChat:H,closeChat:Y,checkAvailability:_,getSummary:ae,quickAction:re,updatePageContext:P,clearPageContext:R,toggleContextExpanded:V,setMessages:s,setError:x,setContextExpanded:w};return e.jsx(Ft.Provider,{value:ne,children:a})}function Ut(){const a=o.useContext(Ft);if(!a)throw new Error("useAI must be used within an AIProvider");return a}function Ir({message:a,isStreaming:t=!1,isProductMode:s=!1}){const r=a.role==="user";return e.jsxs("div",{className:c("flex gap-3 p-4",r?s?"bg-gray-800":"bg-gray-50":s?"bg-gray-900":"bg-white"),children:[e.jsx(Ce,{className:c("h-8 w-8 shrink-0",r?s?"bg-indigo-900":"bg-indigo-100":s?"bg-emerald-900":"bg-emerald-100"),children:e.jsx(_e,{className:c(r?s?"text-indigo-400":"text-indigo-700":s?"text-emerald-400":"text-emerald-700"),children:r?e.jsx(gt,{className:"h-4 w-4"}):e.jsx(zs,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:c("text-xs font-medium mb-1","text-gray-500"),children:r?"You":"AI Assistant"}),e.jsxs("div",{className:c("text-sm whitespace-pre-wrap break-words",s?"text-gray-200":"text-gray-900"),children:[a.content,t&&!r&&e.jsx("span",{className:c("inline-block w-2 h-4 animate-pulse ml-0.5",s?"bg-gray-500":"bg-gray-400")})]})]})]})}const zt=o.forwardRef(({className:a,...t},s)=>e.jsx("textarea",{className:c("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...t}));zt.displayName="Textarea";function Dr({onSend:a,onCancel:t,disabled:s=!1,isLoading:r=!1,isStreaming:n=!1,isProductMode:l=!1,placeholder:m="Ask me anything about your tasks, projects, or team..."}){const[u,x]=o.useState(""),p=o.useRef(null);o.useEffect(()=>{const i=p.current;i&&(i.style.height="auto",i.style.height=`${Math.min(i.scrollHeight,150)}px`)},[u]);const y=i=>{i?.preventDefault(),u.trim()&&!s&&!r&&(a(u.trim()),x(""))},N=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),y())};return e.jsxs("form",{onSubmit:y,className:c("flex gap-2 items-end p-4 border-t",l?"bg-gray-900 border-gray-700":"bg-white border-gray-200"),children:[e.jsx(zt,{ref:p,value:u,onChange:i=>x(i.target.value),onKeyDown:N,placeholder:m,disabled:s||r,className:c("min-h-[44px] max-h-[150px] resize-none flex-1",l&&"bg-gray-800 border-gray-700 text-white placeholder:text-gray-500"),rows:1}),n?e.jsx(z,{type:"button",size:"icon",variant:"destructive",onClick:t,className:"shrink-0",children:e.jsx(Vs,{className:"h-4 w-4"})}):e.jsx(z,{type:"submit",size:"icon",disabled:!u.trim()||s||r,className:c("shrink-0",l&&"bg-purple-600 hover:bg-purple-700"),children:r?e.jsx(yt,{className:"h-4 w-4 animate-spin"}):e.jsx(Bs,{className:"h-4 w-4"})})]})}const Oe={"/":"Dashboard","/tasks":"Tasks","/calendar":"Calendar","/projects":"Projects","/team":"Team","/stakeholders":"Stakeholders","/duties":"Duties","/metrics":"Metrics","/settings":"Settings","/peers":"Peers"};function Or(a){if(Oe[a])return Oe[a];const t="/"+(a.split("/")[1]||"");return Oe[t]||"Page"}function $r({pageContext:a,contextTimestamp:t,isStale:s,stalenessMinutes:r,expanded:n,onToggleExpanded:l,onRefresh:m,className:u}){if(!a)return null;const x=Or(a.page||"/"),p=a.selection?.id;return e.jsxs("div",{className:c("border-b bg-muted/30",u),children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Js,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsxs("span",{className:"font-medium",children:[x," context"]}),p&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(item selected)"}),s&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-600",children:[e.jsx(bt,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs",children:[r,"m ago"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{variant:"ghost",size:"icon",className:c("h-6 w-6",s&&"text-amber-600 hover:text-amber-700"),onClick:m,title:"Refresh context",children:e.jsx(le,{className:"h-3.5 w-3.5"})}),e.jsx(z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:l,title:n?"Collapse context":"Expand context",children:n?e.jsx(Gs,{className:"h-3.5 w-3.5"}):e.jsx(Hs,{className:"h-3.5 w-3.5"})})]})]}),n&&a.summary&&e.jsxs("div",{className:"px-3 pb-2",children:[e.jsx("div",{className:"rounded bg-muted/50 p-2 text-xs text-muted-foreground font-mono whitespace-pre-wrap max-h-32 overflow-y-auto",children:a.summary}),t&&e.jsxs("div",{className:"mt-1 text-[10px] text-muted-foreground",children:["Context captured: ",new Date(t).toLocaleTimeString()]})]})]})}const $e={"/":"Dashboard","/tasks":"Tasks","/calendar":"Calendar","/projects":"Projects","/team":"Team","/stakeholders":"Stakeholders","/duties":"Duties","/metrics":"Metrics","/settings":"Settings","/peers":"Peers"};function Mr(a){if($e[a])return $e[a];const t="/"+(a.split("/")[1]||"");return $e[t]||"Page"}function Lr({currentPath:a,onRefresh:t,onDismiss:s}){const r=Mr(a);return e.jsxs("div",{className:"mx-3 my-2 rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Page changed"}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-0.5",children:["You navigated to ",r,". Refresh context?"]})]}),e.jsx(z,{variant:"ghost",size:"icon",className:"h-6 w-6 text-blue-600 hover:text-blue-800 hover:bg-blue-100 dark:text-blue-400 dark:hover:text-blue-200 dark:hover:bg-blue-900",onClick:s,children:e.jsx(ke,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(z,{size:"sm",variant:"default",className:"h-7 text-xs bg-blue-600 hover:bg-blue-700",onClick:t,children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Refresh Context"]}),e.jsx(z,{size:"sm",variant:"ghost",className:"h-7 text-xs text-blue-700 hover:text-blue-800 hover:bg-blue-100 dark:text-blue-300 dark:hover:bg-blue-900",onClick:s,children:"Keep Current"})]})]})}function Fr(){const{messages:a,isLoading:t,isStreaming:s,error:r,isOpen:n,closeChat:l,sendMessageStreaming:m,cancelStreaming:u,clearChat:x,quickAction:p,pageContext:y,contextTimestamp:N,contextExpanded:i,isContextStale:S,contextStalenessMinutes:b,toggleContextExpanded:g}=Ut(),{isProductMode:d}=Mt(),v=Ct(),w=o.useRef(null),[T,_]=o.useState(v.pathname),[P,R]=o.useState(!1);o.useEffect(()=>{n&&T!==v.pathname&&y&&R(!0),_(v.pathname)},[v.pathname,n,T,y]);const V=()=>{R(!1),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("ai-context-refresh"))},B=()=>{R(!1)},G=()=>{window.dispatchEvent&&window.dispatchEvent(new CustomEvent("ai-context-refresh"))};o.useEffect(()=>{if(w.current){const O=w.current.querySelector("[data-radix-scroll-area-viewport]");O&&(O.scrollTop=O.scrollHeight)}},[a]);const C=[{id:"summarize_tasks",label:"Summarize Tasks",icon:vt},{id:"summarize_projects",label:"Project Status",icon:wt},{id:"analyze_workload",label:"Analyze Workload",icon:ze}];return n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40",onClick:l}),e.jsxs("div",{className:c("fixed right-0 top-0 h-full w-full sm:w-[420px] shadow-2xl z-50","flex flex-col","transform transition-transform duration-300 ease-out",n?"translate-x-0":"translate-x-full",d?"bg-gray-900":"bg-white"),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-gradient-to-r from-indigo-500 to-purple-600",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(Ue,{className:"h-5 w-5"}),e.jsx("h2",{className:"font-semibold",children:"AI Assistant"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{variant:"ghost",size:"icon",onClick:x,className:"text-white/80 hover:text-white hover:bg-white/10",title:"Clear chat",children:e.jsx(Ks,{className:"h-4 w-4"})}),e.jsx(z,{variant:"ghost",size:"icon",onClick:l,className:"text-white/80 hover:text-white hover:bg-white/10",children:e.jsx(ke,{className:"h-5 w-5"})})]})]}),e.jsx($r,{pageContext:y,contextTimestamp:N,isStale:S,stalenessMinutes:b,expanded:i,onToggleExpanded:g,onRefresh:G,className:d?"bg-gray-800/50 border-gray-700":""}),P&&e.jsx(Lr,{currentPath:v.pathname,onRefresh:V,onDismiss:B}),e.jsx(Xe,{ref:w,className:"flex-1",children:a.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:c("w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",d?"bg-gradient-to-br from-purple-900 to-indigo-900":"bg-gradient-to-br from-indigo-100 to-purple-100"),children:e.jsx(Ue,{className:c("h-8 w-8",d?"text-purple-400":"text-indigo-600")})}),e.jsx("h3",{className:c("font-semibold mb-2",d?"text-white":"text-gray-900"),children:"Hi! I'm your AI Assistant"}),e.jsx("p",{className:c("text-sm mb-6",d?"text-gray-400":"text-gray-500"),children:"I can help you manage tasks, analyze projects, and keep track of your team. Ask me anything or try a quick action below."}),e.jsx("div",{className:"space-y-2",children:C.map(O=>e.jsxs("button",{onClick:()=>p(O.id),disabled:t,className:c("w-full flex items-center gap-3 px-4 py-3 rounded-lg border transition-colors text-left disabled:opacity-50",d?"border-gray-700 hover:bg-gray-800 bg-gray-800/50":"border-gray-200 hover:bg-gray-50"),children:[e.jsx(O.icon,{className:c("h-5 w-5",d?"text-purple-400":"text-indigo-600")}),e.jsx("span",{className:c("text-sm font-medium",d?"text-gray-300":"text-gray-700"),children:O.label})]},O.id))})]}):e.jsx("div",{className:c("divide-y",d?"divide-gray-800":"divide-gray-100"),children:a.map((O,te)=>e.jsx(Ir,{message:O,isStreaming:s&&te===a.length-1&&O.role==="assistant",isProductMode:d},te))})}),r&&e.jsx("div",{className:c("px-4 py-2 border-t",d?"bg-red-900/30 border-red-800":"bg-red-50 border-red-100"),children:e.jsx("p",{className:c("text-sm",d?"text-red-400":"text-red-600"),children:r})}),e.jsx(Dr,{onSend:m,onCancel:u,isLoading:t,isStreaming:s,isProductMode:d})]})]}):null}function Ur({className:a}){const{toggleChat:t,isOpen:s,isLoading:r,isAvailable:n}=Ut();return n===!1?null:e.jsx(z,{onClick:t,className:c("fixed bottom-6 right-6 z-30","w-14 h-14 rounded-full shadow-lg","bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700","transition-all duration-200",s&&"scale-0 opacity-0",a),size:"icon",title:"Open AI Assistant",children:e.jsx(Ue,{className:c("h-6 w-6 text-white",r&&"animate-pulse")})})}const zr=Ws,Vr=qs,Vt=o.forwardRef(({className:a,align:t="center",sideOffset:s=4,...r},n)=>e.jsx(Ys,{children:e.jsx(jt,{ref:n,align:t,sideOffset:s,className:c("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}));Vt.displayName=jt.displayName;const Bt=o.createContext(null);function Br({children:a}){const[t,s]=o.useState([]),[r,n]=o.useState(0),[l,m]=o.useState(!0),{isAuthenticated:u}=xe(),x=o.useCallback(async()=>{if(!u){s([]),n(0),m(!1);return}try{m(!0);const[i,S]=await Promise.all([he.list(),he.getUnreadCount()]);s(i),n(S.count)}catch(i){console.error("Failed to fetch notifications:",i)}finally{m(!1)}},[u]);o.useEffect(()=>{x()},[x]);const p=o.useCallback(async i=>{s(S=>S.map(b=>b.id===i?{...b,read:!0}:b)),n(S=>Math.max(0,S-1));try{await he.markAsRead(i)}catch(S){console.error("Failed to mark notification as read:",S),s(b=>b.map(g=>g.id===i?{...g,read:!1}:g)),n(b=>b+1)}},[]),y=o.useCallback(async()=>{const i=t,S=r;s(b=>b.map(g=>({...g,read:!0}))),n(0);try{await he.markAllAsRead()}catch(b){console.error("Failed to mark all as read:",b),s(i),n(S)}},[t,r]),N={notifications:t,unreadCount:r,loading:l,refresh:x,markAsRead:p,markAllAsRead:y};return e.jsx(Bt.Provider,{value:N,children:a})}function Jr(){const a=o.useContext(Bt);if(!a)throw new Error("useNotifications must be used within a NotificationProvider");return a}function Gr({notification:a,onMarkRead:t}){const s=a.notification_type==="kpi_alert";return e.jsx("div",{className:c("px-4 py-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors",!a.read&&"bg-blue-50/50"),onClick:()=>!a.read&&t(a.id),children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:c("flex-shrink-0 mt-0.5",s?"text-red-500":"text-gray-400"),children:s?e.jsx(Nt,{className:"h-4 w-4"}):e.jsx(Ye,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:c("text-sm",a.read?"text-gray-600":"text-gray-900 font-medium"),children:a.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:$a(new Date(a.created_date),{addSuffix:!0})})]}),!a.read&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500 block"})})]})})}function Hr({notifications:a,onMarkRead:t,onMarkAllRead:s}){const r=a.filter(n=>!n.read);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),r.length>0&&e.jsxs(z,{variant:"ghost",size:"sm",className:"text-xs text-blue-600 hover:text-blue-700 h-auto py-1 px-2",onClick:s,children:[e.jsx(Xs,{className:"h-3 w-3 mr-1"}),"Mark all read"]})]}),e.jsx(Xe,{className:"h-[300px]",children:a.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Ye,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No notifications"})]}):a.map(n=>e.jsx(Gr,{notification:n,onMarkRead:t},n.id))})]})}function Kr({className:a}){const{notifications:t,unreadCount:s,markAsRead:r,markAllAsRead:n}=Jr();return e.jsxs(zr,{children:[e.jsx(Vr,{asChild:!0,children:e.jsxs("button",{className:c("relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",a),"aria-label":`Notifications${s>0?` (${s} unread)`:""}`,children:[e.jsx(Ye,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"}),s>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 h-5 w-5 rounded-full bg-red-500 text-white text-xs font-medium flex items-center justify-center",children:s>9?"9+":s})]})}),e.jsx(Vt,{className:"w-80 p-0",align:"end",sideOffset:8,children:e.jsx(Hr,{notifications:t,onMarkRead:r,onMarkAllRead:n})})]})}function Wr({children:a,currentPageName:t}){const[s,r]=o.useState(!1),[n,l]=o.useState(null),[m,u]=o.useState(!0),{logout:x,isAuthenticated:p}=xe(),{isPresentationMode:y,togglePresentationMode:N}=Cr(),{isProductMode:i,toggleAppMode:S}=Mt(),b=Aa();o.useEffect(()=>{(async()=>{if(!p){l(null),u(!1);return}try{u(!0);const P=await It.me();l(P)}catch(P){console.error("Error fetching user data:",P),l(null)}finally{u(!1)}})()},[p]);const g=()=>{x()},d=()=>{S(),b(i?"/Tasks":"/Services")},v=[{name:"Tasks",icon:Qs,href:L("Tasks"),current:t==="Tasks"},{name:"Calendar",icon:Zs,href:L("Calendar"),current:t==="Calendar"},{name:"Duties",icon:ea,href:L("Duties"),current:t==="Duties"},{name:"Projects",icon:wt,href:L("Projects"),current:t==="Projects"},{name:"Metrics",icon:ta,href:L("Metrics"),current:t==="Metrics"},{name:"Team",icon:sa,href:L("Team"),current:t==="Team"},{name:"Stakeholders",icon:ze,href:L("Stakeholders"),current:t==="Stakeholders"},{name:"Peers",icon:ze,href:L("Peers"),current:t==="Peers"},{name:"GitHub",icon:aa,href:L("GitHub"),current:t==="GitHubRepos"},{name:"Jira",icon:at,href:L("Jira"),current:t==="JiraIssues"},{name:"Capture Inbox",icon:ra,href:L("CaptureInbox"),current:t==="CaptureInbox"},{name:"Capture Rules",icon:na,href:L("CaptureRules"),current:t==="CaptureRules"},{name:"Bug Dashboard",icon:at,href:L("BugDashboard"),current:t==="BugDashboard"}],w=[{name:"My Services",icon:oa,href:L("Services"),current:t==="Services"},{name:"My Roadmap",icon:ia,href:L("Roadmap"),current:t==="Roadmap"},{name:"My Backlog",icon:vt,href:L("Backlog"),current:t==="Backlog"},{name:"Usage Analytics",icon:la,href:L("Analytics"),current:t==="Analytics"},{name:"Customer Feedback",icon:ca,href:L("Feedback"),current:t==="Feedback"},{name:"Releases",icon:da,href:L("Releases"),current:t==="Releases"}],T=i?w:v;return e.jsxs("div",{className:c("min-h-screen flex transition-colors duration-300",i?"bg-gray-800":"bg-gray-50"),children:[s&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>r(!1)}),e.jsxs("div",{className:c("fixed inset-y-0 left-0 z-50 w-64 shadow-lg transform transition-all duration-300 ease-in-out lg:translate-x-0 overflow-y-auto",s?"translate-x-0":"-translate-x-full",i?"bg-gray-900":"bg-white"),children:[e.jsx("div",{className:c("sticky top-0 z-10 border-b transition-colors duration-300",i?"bg-gray-900 border-gray-700":"bg-white border-gray-200"),children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[e.jsxs("button",{onClick:d,className:c("flex items-center cursor-pointer rounded-lg px-2 py-1 -ml-2 transition-all duration-200",i?"hover:bg-gray-800":"hover:bg-gray-100"),title:i?"Switch to People & Engineering":"Switch to Product & Engineering",children:[e.jsx(ua,{className:c("h-8 w-8 transition-all duration-300",i?"text-purple-400 fill-purple-400":"text-indigo-600")}),e.jsx("span",{className:c("ml-2 text-xl font-bold transition-colors duration-300",i?"text-white":"text-gray-900"),children:i?"Product & Eng.":"P & Engineering"})]}),e.jsx("button",{onClick:()=>r(!1),className:c("lg:hidden transition-colors",i?"text-gray-400 hover:text-gray-200":"text-gray-500 hover:text-gray-700"),children:e.jsx(ke,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"flex flex-col h-[calc(100%-4rem)] justify-between",children:[e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:T.map(_=>e.jsxs(rt,{to:_.href,onClick:()=>r(!1),className:c("flex items-center px-4 py-3 text-sm font-medium rounded-md transition-colors duration-200",i?_.current?"bg-purple-900/50 text-purple-300":"text-gray-300 hover:bg-gray-800 hover:text-white":_.current?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:[e.jsx(_.icon,{className:"h-5 w-5 mr-3"}),_.name]},_.name))})}),e.jsxs("div",{className:c("p-4 border-t transition-colors duration-300",i?"border-gray-700":"border-gray-200"),children:[m?e.jsxs("div",{className:"mb-4 px-4 py-3 flex items-center gap-3",children:[e.jsx("div",{className:c("h-10 w-10 rounded-full animate-pulse",i?"bg-gray-700":"bg-gray-200")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:c("h-4 rounded animate-pulse mb-1",i?"bg-gray-700":"bg-gray-200")}),e.jsx("div",{className:c("h-3 rounded animate-pulse w-2/3",i?"bg-gray-700":"bg-gray-200")})]})]}):n?e.jsxs("div",{className:"mb-4 px-4 py-3 flex items-center gap-3",children:[e.jsx(Ce,{className:c("h-10 w-10",i?"bg-purple-900":"bg-indigo-100"),children:e.jsx(_e,{className:c(i?"text-purple-300":"text-indigo-700"),children:n.name?.split(" ").map(_=>_[0]).join("").toUpperCase()||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:c("text-sm font-medium truncate transition-colors",i?"text-white":"text-gray-900"),children:n.name||"User"}),e.jsxs("p",{className:c("text-xs truncate transition-colors",i?"text-gray-400":"text-gray-500"),children:["@",n.username||"user"]})]})]}):p&&e.jsxs("div",{className:"mb-4 px-4 py-3 flex items-center gap-3",children:[e.jsx(Ce,{className:c("h-10 w-10",i?"bg-gray-700":"bg-gray-100"),children:e.jsx(_e,{className:c(i?"text-gray-400":"text-gray-500"),children:e.jsx(gt,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:c("text-sm font-medium truncate",i?"text-white":"text-gray-900"),children:"User"}),e.jsx("p",{className:c("text-xs truncate",i?"text-gray-400":"text-gray-500"),children:"Authenticated"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(rt,{to:L("Settings"),onClick:()=>r(!1),className:c("flex items-center px-4 py-3 text-sm font-medium rounded-md transition-colors",i?t==="Settings"?"bg-purple-900/50 text-purple-300":"text-gray-300 hover:bg-gray-800 hover:text-white":t==="Settings"?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:[e.jsx(ma,{className:"h-5 w-5 mr-3"}),"Settings"]}),e.jsxs("button",{onClick:g,className:c("w-full flex items-center px-4 py-3 text-sm font-medium rounded-md transition-colors",i?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-100"),children:[e.jsx(pa,{className:"h-5 w-5 mr-3"}),"Log out"]})]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64",children:[e.jsx("header",{className:c("sticky top-0 shadow-sm z-10 transition-colors duration-300",y?"bg-amber-50":i?"bg-gray-800":"bg-white"),children:e.jsxs("div",{className:"flex justify-between items-center h-16 px-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>r(!0),className:c("lg:hidden mr-4 transition-colors",i?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"),children:e.jsx(ha,{className:"h-6 w-6"})}),e.jsxs("div",{className:c("text-md font-medium transition-colors",i?"text-white":"text-gray-800"),children:[i?"Product & Eng.":"P & Engineering"," Manager",t&&e.jsxs("span",{className:i?"text-gray-400":"text-gray-500",children:[" ","> ",t]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:i?"hover:bg-gray-700":""}),e.jsx("span",{className:c("hidden sm:inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors",i?"bg-purple-900 text-purple-200":"bg-indigo-100 text-indigo-800"),children:i?"Product":"People"}),e.jsx("button",{onClick:N,className:c("flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all",y?"bg-amber-100 text-amber-800 hover:bg-amber-200":i?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"),title:y?"Switch to Working Mode":"Switch to Presentation Mode",children:y?e.jsxs(e.Fragment,{children:[e.jsx(fa,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Presenting"})]}):e.jsxs(e.Fragment,{children:[e.jsx(xa,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Working"})]})})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:a})]}),e.jsx(Ur,{}),e.jsx(Fr,{})]})}const de=o.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("rounded-xl border bg-card text-card-foreground shadow",a),...t}));de.displayName="Card";const ge=o.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("flex flex-col space-y-1.5 p-6",a),...t}));ge.displayName="CardHeader";const Qe=o.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("font-semibold leading-none tracking-tight",a),...t}));Qe.displayName="CardTitle";const Ze=o.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("text-sm text-muted-foreground",a),...t}));Ze.displayName="CardDescription";const ue=o.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("p-6 pt-0",a),...t}));ue.displayName="CardContent";const qr=o.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("flex items-center p-6 pt-0",a),...t}));qr.displayName="CardFooter";const Ve=o.forwardRef(({className:a,type:t,...s},r)=>e.jsx("input",{type:t,className:c("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...s}));Ve.displayName="Input";const Yr=Ae("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Be=o.forwardRef(({className:a,...t},s)=>e.jsx(Tt,{ref:s,className:c(Yr(),a),...t}));Be.displayName=Tt.displayName;const Xr=Ae("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Je=o.forwardRef(({className:a,variant:t,...s},r)=>e.jsx("div",{ref:r,role:"alert",className:c(Xr({variant:t}),a),...s}));Je.displayName="Alert";const Qr=o.forwardRef(({className:a,...t},s)=>e.jsx("h5",{ref:s,className:c("mb-1 font-medium leading-none tracking-tight",a),...t}));Qr.displayName="AlertTitle";const Ge=o.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("text-sm [&_p]:leading-relaxed",a),...t}));Ge.displayName="AlertDescription";const Zr=()=>{const[a,t]=o.useState({username:"",password:""}),[s,r]=o.useState({}),[n,l]=o.useState(!1),[m,u]=o.useState(""),[x,p]=o.useState(0),{login:y,error:N,clearError:i}=xe(),S=()=>{const d={};return a.username.trim()||(d.username="Username is required"),a.password.trim()||(d.password="Password is required"),r(d),Object.keys(d).length===0},b=d=>{const{name:v,value:w}=d.target;t(T=>({...T,[v]:w})),s[v]&&r(T=>({...T,[v]:""})),m&&u(""),N&&i&&i()},g=async d=>{if(d.preventDefault(),!!S()){l(!0),u("");try{const v=await y(a.username,a.password);if(v.success)p(0);else{p(T=>T+1);let w=v.error||"Login failed. Please try again.";x>=2&&v.error?.includes("Invalid username or password")?w='Invalid username or password. Default credentials are username: "admin", password: "password123"':x>=1&&v.error?.includes("storage")&&(w=`${v.error} Try refreshing the page or using a different browser.`),u(w)}}catch(v){console.error("Login error:",v),p(T=>T+1);let w="Authentication failed. Please try again.";v.type==="STORAGE_UNAVAILABLE"?w="Browser storage is not available. Please enable cookies and local storage.":v.type==="STORAGE_QUOTA_EXCEEDED"?w="Browser storage is full. Please clear some browser data and try again.":x>=2&&(w="Repeated authentication failures. Please refresh the page or contact support."),u(w)}finally{l(!1)}}};return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:e.jsxs(de,{className:"w-full max-w-md",children:[e.jsxs(ge,{className:"space-y-1",children:[e.jsx(Qe,{className:"text-2xl font-bold text-center",children:"Sign In"}),e.jsx(Ze,{className:"text-center",children:"Enter your credentials to access the application"})]}),e.jsx(ue,{children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[N&&e.jsx(Je,{variant:"destructive",children:e.jsx(Ge,{children:N})}),m&&e.jsx(Je,{variant:"destructive",children:e.jsx(Ge,{children:m})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Be,{htmlFor:"username",children:"Username"}),e.jsx(Ve,{id:"username",name:"username",type:"text",placeholder:"Enter your username",value:a.username,onChange:b,className:s.username?"border-destructive":"",disabled:n}),s.username&&e.jsx("p",{className:"text-sm text-destructive",children:s.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Be,{htmlFor:"password",children:"Password"}),e.jsx(Ve,{id:"password",name:"password",type:"password",placeholder:"Enter your password",value:a.password,onChange:b,className:s.password?"border-destructive":"",disabled:n}),s.password&&e.jsx("p",{className:"text-sm text-destructive",children:s.password})]}),e.jsx(z,{type:"submit",className:"w-full",disabled:n,children:n?"Signing In...":"Sign In"}),x>=1&&e.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.jsx("strong",{children:"Having trouble signing in?"})}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("li",{children:[" Default username: ",e.jsx("code",{className:"bg-background px-1 rounded",children:"admin"})]}),e.jsxs("li",{children:[" Default password: ",e.jsx("code",{className:"bg-background px-1 rounded",children:"password123"})]}),e.jsx("li",{children:" Make sure cookies and local storage are enabled"}),e.jsx("li",{children:" Try refreshing the page if you see storage errors"})]})]})]})})]})})},en=({size:a="md",className:t="",text:s="",showText:r=!1,variant:n="primary"})=>{const l={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},m={primary:"text-indigo-600",secondary:"text-gray-600",white:"text-white",muted:"text-gray-400"},u={xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"};return e.jsxs("div",{className:c("flex items-center justify-center",t),children:[e.jsx(yt,{className:c("animate-spin",l[a],m[n])}),(r||s)&&e.jsx("span",{className:c("ml-2",u[a],m[n]),children:s||"Loading..."})]})},tn=({children:a})=>{const{isAuthenticated:t,loading:s}=xe();return s?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(en,{})}):t?a:e.jsx(Zr,{})};function j({className:a,...t}){return e.jsx("div",{className:c("animate-pulse rounded-md bg-primary/10",a),...t})}function sn(){return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsx(j,{className:"h-9 w-48 mb-4 sm:mb-0"}),e.jsx(j,{className:"h-10 w-32"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{className:"h-12 w-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((a,t)=>e.jsxs(de,{children:[e.jsxs(ge,{children:[e.jsx(j,{className:"h-6 w-3/4"}),e.jsx(j,{className:"h-4 w-1/2"})]}),e.jsx(ue,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{className:"h-4 w-full"}),e.jsx(j,{className:"h-4 w-2/3"}),e.jsx(j,{className:"h-4 w-1/3"})]})})]},t))})]})]})})}function an(){return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsx(j,{className:"h-9 w-24 mb-4 sm:mb-0"}),e.jsx(j,{className:"h-10 w-28"})]}),e.jsx("div",{className:"mb-6 p-4 border rounded-lg",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(j,{className:"h-10 w-32"}),e.jsx(j,{className:"h-10 w-32"}),e.jsx(j,{className:"h-10 w-32"}),e.jsx(j,{className:"h-10 w-48"})]})}),e.jsx("div",{className:"space-y-4",children:Array.from({length:8}).map((a,t)=>e.jsx(de,{children:e.jsx(ue,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4 rounded"}),e.jsx(j,{className:"h-5 w-3/4"})]}),e.jsx(j,{className:"h-4 w-1/2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{className:"h-6 w-16 rounded-full"}),e.jsx(j,{className:"h-6 w-20 rounded-full"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{className:"h-8 w-8 rounded"}),e.jsx(j,{className:"h-8 w-8 rounded"})]})]})})},t))})]})})}function rn(){return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{className:"h-7 w-40"}),e.jsx("div",{className:"flex space-x-2",children:Array.from({length:5}).map((a,t)=>e.jsx(j,{className:"h-10 w-10 rounded"},t))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-lg",children:Array.from({length:4}).map((a,t)=>e.jsx(j,{className:"h-8 w-20 rounded"},t))})})]}),e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsx("div",{className:"grid grid-cols-7 border-b",children:Array.from({length:7}).map((a,t)=>e.jsx("div",{className:"p-2 text-center",children:e.jsx(j,{className:"h-4 w-16 mx-auto"})},t))}),e.jsx("div",{className:"grid grid-cols-7",children:Array.from({length:35}).map((a,t)=>e.jsxs("div",{className:"min-h-[120px] p-2 border-r border-b",children:[e.jsx(j,{className:"h-4 w-6 mb-2"}),e.jsxs("div",{className:"space-y-1",children:[Math.random()>.5&&e.jsx(j,{className:"h-6 w-full rounded"}),Math.random()>.7&&e.jsx(j,{className:"h-6 w-3/4 rounded"})]})]},t))})]})]})})}function nn(){return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx(j,{className:"h-9 w-48"}),e.jsx(j,{className:"h-10 w-40"})]}),e.jsx("div",{className:"relative mb-6",children:e.jsx(j,{className:"h-10 w-full"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((a,t)=>e.jsxs(de,{children:[e.jsxs(ge,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(j,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{children:[e.jsx(j,{className:"h-6 w-32 mb-1"}),e.jsx(j,{className:"h-4 w-24"})]})]}),e.jsx(j,{className:"h-8 w-8 rounded"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[e.jsx(j,{className:"h-6 w-20 rounded-full"}),e.jsx(j,{className:"h-6 w-16 rounded-full"})]})]}),e.jsxs(ue,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{className:"h-4 w-16 mb-2"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx(j,{className:"h-5 w-12 rounded-full"}),e.jsx(j,{className:"h-5 w-16 rounded-full"}),e.jsx(j,{className:"h-5 w-14 rounded-full"})]})]}),e.jsx(j,{className:"h-4 w-full"}),e.jsx(j,{className:"h-4 w-3/4"})]})]},t))})]})})}const D=(a,t=3,s=1e3)=>a().catch(r=>{if(t>0)return console.warn(`Failed to load chunk, retrying... (${t} attempts left)`,r),new Promise((n,l)=>{setTimeout(()=>{D(a,t-1,s*1.5).then(n).catch(l)},s)});throw console.error("Failed to load chunk after all retries:",r),r});class on extends o.Component{constructor(t){super(t),this.state={hasError:!1,error:null,retryCount:0,isRetrying:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("Page chunk loading error:",t,s),window.reportError&&window.reportError(t,{context:"page_chunk_loading",page:this.props.pageName,errorInfo:s})}handleRetry=async()=>{this.setState({isRetrying:!0});try{await new Promise(t=>setTimeout(t,1500)),this.setState({hasError:!1,error:null,retryCount:this.state.retryCount+1,isRetrying:!1})}catch{this.setState({isRetrying:!1})}};handleGoBack=()=>{window.history.length>1?window.history.back():window.location.href="/"};render(){if(this.state.hasError){const{retryCount:t,isRetrying:s}=this.state,{pageName:r="page"}=this.props;return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gray-50",children:e.jsx("div",{className:"max-w-lg w-full bg-white rounded-lg shadow-sm border p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(bt,{className:"h-6 w-6 text-red-600"})}),e.jsxs("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Failed to load ",r]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We're having trouble loading this page. This could be due to a network issue or a temporary problem with the application."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(z,{onClick:this.handleRetry,disabled:s,className:"w-full",children:s?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Try Again"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(z,{onClick:this.handleGoBack,variant:"outline",className:"flex-1",children:[e.jsx(ga,{className:"mr-2 h-4 w-4"}),"Go Back"]}),e.jsxs(z,{onClick:()=>window.location.reload(),variant:"outline",className:"flex-1",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Reload"]})]})]}),t>0&&e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Retry attempts: ",t]})]})})})}return this.props.children}}function ln(){return e.jsx(sn,{})}function cn(){return e.jsx(an,{})}function dn(){return e.jsx(rn,{})}function un(){return e.jsx(nn,{})}const He=o.lazy(()=>D(()=>$(()=>import("./Tasks-DAPgbdhG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])),3,1e3)),Jt=o.lazy(()=>D(()=>$(()=>import("./Calendar-CLPDnjHe.js"),__vite__mapDeps([18,1,2,17,7,19,8,3,4,5,6,9,10,20,15,12,21])),3,1e3)),Gt=o.lazy(()=>D(()=>$(()=>import("./Metrics-CERSLd8q.js"),__vite__mapDeps([22,1,2,17,7,8,3,4,5,6,9,10,23,24])),3,1e3)),Ht=o.lazy(()=>D(()=>$(()=>import("./Stakeholders-CpNlfmTH.js"),__vite__mapDeps([25,1,2,17,7,19,8,5,26])),3,1e3)),Kt=o.lazy(()=>D(()=>$(()=>import("./Projects-Bd2ZDYny.js"),__vite__mapDeps([27,1,2,8,7,28,29,12,5,6,10,9,17,24])),3,1e3)),Wt=o.lazy(()=>D(()=>$(()=>import("./Settings-CHnq07nq.js"),__vite__mapDeps([30,1,2,31,16,8,7,12,15,5,32])),3,1e3)),qt=o.lazy(()=>D(()=>$(()=>import("./Team-B7dAHZQN.js"),__vite__mapDeps([33,1,2,8,7,5,26,12,10,9,17,19])),3,1e3)),Yt=o.lazy(()=>D(()=>$(()=>import("./ProjectDetails-CYBrFNaG.js"),__vite__mapDeps([34,1,2,4,8,7,31,5,11,12,13,14,15,9])),3,1e3)),Xt=o.lazy(()=>D(()=>$(()=>import("./TeamMemberProfile-Brrj1wOR.js"),__vite__mapDeps([35,1,2,19,8,7,5,6,16,10,9,23,21,28,29,20,15,12])),3,1e3)),Qt=o.lazy(()=>D(()=>$(()=>import("./Peers-C0E3lYSD.js"),__vite__mapDeps([36,1,2,37,8,7,5,12,10,9,14,15])),3,1e3)),Zt=o.lazy(()=>D(()=>$(()=>import("./PeerProfile-vRnxdXZm.js"),__vite__mapDeps([38,1,2,37,5,39,8,7,6,16])),3,1e3)),es=o.lazy(()=>D(()=>$(()=>import("./Duties-CSF4tw5w.js"),__vite__mapDeps([40,1,2,17,7,41,8,5,12,21])),3,1e3)),ts=o.lazy(()=>D(()=>$(()=>import("./GitHubRepos-Dt82xaTT.js"),__vite__mapDeps([42,1,2,8,7,16,31])),3,1e3)),ss=o.lazy(()=>D(()=>$(()=>import("./JiraIssues-CnG4h1QO.js"),__vite__mapDeps([43,1,2,31,8,7,5,16,12])),3,1e3)),as=o.lazy(()=>D(()=>$(()=>import("./Services-b2-kKXF5.js"),__vite__mapDeps([44,1,2,7])),3,1e3)),rs=o.lazy(()=>D(()=>$(()=>import("./Roadmap-DBzVashU.js"),__vite__mapDeps([45,1,2,7])),3,1e3)),ns=o.lazy(()=>D(()=>$(()=>import("./Backlog-CYaAggIu.js"),__vite__mapDeps([46,1,2,7])),3,1e3)),os=o.lazy(()=>D(()=>$(()=>import("./Analytics-DLzc4XPg.js"),__vite__mapDeps([47,1,2,7])),3,1e3)),is=o.lazy(()=>D(()=>$(()=>import("./Feedback-DHWks-hX.js"),__vite__mapDeps([48,1,2,7])),3,1e3)),ls=o.lazy(()=>D(()=>$(()=>import("./Releases-Qf1P4qcK.js"),__vite__mapDeps([49,1,2,7])),3,1e3)),cs=o.lazy(()=>D(()=>$(()=>import("./CaptureInbox-DPCspqq0.js"),__vite__mapDeps([50,1,2,8,7,13,16,5,39,21])),3,1e3)),ds=o.lazy(()=>D(()=>$(()=>import("./CaptureRules-DFIwMbAY.js"),__vite__mapDeps([51,1,2,8,7,32,16,39,5,13])),3,1e3)),us=o.lazy(()=>D(()=>$(()=>import("./BugDashboard-CY96wKZP.js"),__vite__mapDeps([52,1,2,5,24,7,8,21,28,16,41])),3,1e3)),ct={Tasks:He,Calendar:Jt,Metrics:Gt,Stakeholders:Ht,Projects:Kt,Settings:Wt,Team:qt,ProjectDetails:Yt,TeamMemberProfile:Xt,Peers:Qt,PeerProfile:Zt,Duties:es,GitHubRepos:ts,JiraIssues:ss,Services:as,Roadmap:rs,Backlog:ns,Analytics:os,Feedback:is,Releases:ls,CaptureInbox:cs,CaptureRules:ds,BugDashboard:us};function mn(a){a.endsWith("/")&&(a=a.slice(0,-1));let t=a.split("/").pop();return t.includes("?")&&(t=t.split("?")[0]),Object.keys(ct).find(r=>r.toLowerCase()===t.toLowerCase())||Object.keys(ct)[0]}function pn(a){const t=a.toLowerCase();return t.includes("tasks")||t==="/"?e.jsx(cn,{}):t.includes("calendar")?e.jsx(dn,{}):t.includes("team")?e.jsx(un,{}):e.jsx(ln,{})}function hn(){const a=Ct(),t=mn(a.pathname),s=pn(a.pathname);return e.jsx(Wr,{currentPageName:t,children:e.jsx(on,{pageName:t,children:e.jsx(o.Suspense,{fallback:s,children:e.jsxs(Ra,{children:[e.jsx(I,{path:"/",element:e.jsx(He,{})}),e.jsx(I,{path:"/tasks",element:e.jsx(He,{})}),e.jsx(I,{path:"/calendar",element:e.jsx(Jt,{})}),e.jsx(I,{path:"/metrics",element:e.jsx(Gt,{})}),e.jsx(I,{path:"/stakeholders",element:e.jsx(Ht,{})}),e.jsx(I,{path:"/projects",element:e.jsx(Kt,{})}),e.jsx(I,{path:"/settings",element:e.jsx(Wt,{})}),e.jsx(I,{path:"/team",element:e.jsx(qt,{})}),e.jsx(I,{path:"/projectdetails",element:e.jsx(Yt,{})}),e.jsx(I,{path:"/teammemberprofile",element:e.jsx(Xt,{})}),e.jsx(I,{path:"/peers",element:e.jsx(Qt,{})}),e.jsx(I,{path:"/peerprofile",element:e.jsx(Zt,{})}),e.jsx(I,{path:"/duties",element:e.jsx(es,{})}),e.jsx(I,{path:"/github",element:e.jsx(ts,{})}),e.jsx(I,{path:"/jira",element:e.jsx(ss,{})}),e.jsx(I,{path:"/services",element:e.jsx(as,{})}),e.jsx(I,{path:"/roadmap",element:e.jsx(rs,{})}),e.jsx(I,{path:"/backlog",element:e.jsx(ns,{})}),e.jsx(I,{path:"/analytics",element:e.jsx(os,{})}),e.jsx(I,{path:"/feedback",element:e.jsx(is,{})}),e.jsx(I,{path:"/releases",element:e.jsx(ls,{})}),e.jsx(I,{path:"/captureinbox",element:e.jsx(cs,{})}),e.jsx(I,{path:"/capturerules",element:e.jsx(ds,{})}),e.jsx(I,{path:"/bugdashboard",element:e.jsx(us,{})})]})})})})}function fn(){return e.jsx(Pa,{children:e.jsx(tn,{children:e.jsx(hn,{})})})}const xn=20,gn=1e6,se={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let Me=0;function yn(){return Me=(Me+1)%Number.MAX_VALUE,Me.toString()}const Le=new Map,dt=a=>{if(Le.has(a))return;const t=setTimeout(()=>{Le.delete(a),fe({type:se.REMOVE_TOAST,toastId:a})},gn);Le.set(a,t)},bn=(a,t)=>{switch(t.type){case se.ADD_TOAST:return{...a,toasts:[t.toast,...a.toasts].slice(0,xn)};case se.UPDATE_TOAST:return{...a,toasts:a.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case se.DISMISS_TOAST:{const{toastId:s}=t;return s?dt(s):a.toasts.forEach(r=>{dt(r.id)}),{...a,toasts:a.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case se.REMOVE_TOAST:return t.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(s=>s.id!==t.toastId)}}},Te=[];let Se={toasts:[]};function fe(a){Se=bn(Se,a),Te.forEach(t=>{t(Se)})}function vn({...a}){const t=yn(),s=n=>fe({type:se.UPDATE_TOAST,toast:{...n,id:t}}),r=()=>fe({type:se.DISMISS_TOAST,toastId:t});return fe({type:se.ADD_TOAST,toast:{...a,id:t,open:!0,onOpenChange:n=>{n||r()}}}),{id:t,dismiss:r,update:s}}function wn(){const[a,t]=o.useState(Se);return o.useEffect(()=>(Te.push(t),()=>{const s=Te.indexOf(t);s>-1&&Te.splice(s,1)}),[a]),{...a,toast:vn,dismiss:s=>fe({type:se.DISMISS_TOAST,toastId:s})}}var et="ToastProvider",[tt,jn,Nn]=ya("Toast"),[ms,Zn]=ba("Toast",[Nn]),[Tn,Pe]=ms(et),ps=a=>{const{__scopeToast:t,label:s="Notification",duration:r=5e3,swipeDirection:n="right",swipeThreshold:l=50,children:m}=a,[u,x]=o.useState(null),[p,y]=o.useState(0),N=o.useRef(!1),i=o.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${et}\`. Expected non-empty \`string\`.`),e.jsx(tt.Provider,{scope:t,children:e.jsx(Tn,{scope:t,label:s,duration:r,swipeDirection:n,swipeThreshold:l,toastCount:p,viewport:u,onViewportChange:x,onToastAdd:o.useCallback(()=>y(S=>S+1),[]),onToastRemove:o.useCallback(()=>y(S=>S-1),[]),isFocusedToastEscapeKeyDownRef:N,isClosePausedRef:i,children:m})})};ps.displayName=et;var hs="ToastViewport",Sn=["F8"],Ke="toast.viewportPause",We="toast.viewportResume",fs=o.forwardRef((a,t)=>{const{__scopeToast:s,hotkey:r=Sn,label:n="Notifications ({hotkey})",...l}=a,m=Pe(hs,s),u=jn(s),x=o.useRef(null),p=o.useRef(null),y=o.useRef(null),N=o.useRef(null),i=St(t,N,m.onViewportChange),S=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=m.toastCount>0;o.useEffect(()=>{const d=v=>{r.length!==0&&r.every(T=>v[T]||v.code===T)&&N.current?.focus()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[r]),o.useEffect(()=>{const d=x.current,v=N.current;if(b&&d&&v){const w=()=>{if(!m.isClosePausedRef.current){const R=new CustomEvent(Ke);v.dispatchEvent(R),m.isClosePausedRef.current=!0}},T=()=>{if(m.isClosePausedRef.current){const R=new CustomEvent(We);v.dispatchEvent(R),m.isClosePausedRef.current=!1}},_=R=>{!d.contains(R.relatedTarget)&&T()},P=()=>{d.contains(document.activeElement)||T()};return d.addEventListener("focusin",w),d.addEventListener("focusout",_),d.addEventListener("pointermove",w),d.addEventListener("pointerleave",P),window.addEventListener("blur",w),window.addEventListener("focus",T),()=>{d.removeEventListener("focusin",w),d.removeEventListener("focusout",_),d.removeEventListener("pointermove",w),d.removeEventListener("pointerleave",P),window.removeEventListener("blur",w),window.removeEventListener("focus",T)}}},[b,m.isClosePausedRef]);const g=o.useCallback(({tabbingDirection:d})=>{const w=u().map(T=>{const _=T.ref.current,P=[_,...Ln(_)];return d==="forwards"?P:P.reverse()});return(d==="forwards"?w.reverse():w).flat()},[u]);return o.useEffect(()=>{const d=N.current;if(d){const v=w=>{const T=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!T){const P=document.activeElement,R=w.shiftKey;if(w.target===d&&R){p.current?.focus();return}const G=g({tabbingDirection:R?"backwards":"forwards"}),C=G.findIndex(O=>O===P);Fe(G.slice(C+1))?w.preventDefault():R?p.current?.focus():y.current?.focus()}};return d.addEventListener("keydown",v),()=>d.removeEventListener("keydown",v)}},[u,g]),e.jsxs(ja,{ref:x,role:"region","aria-label":n.replace("{hotkey}",S),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&e.jsx(qe,{ref:p,onFocusFromOutsideViewport:()=>{const d=g({tabbingDirection:"forwards"});Fe(d)}}),e.jsx(tt.Slot,{scope:s,children:e.jsx(ce.ol,{tabIndex:-1,...l,ref:i})}),b&&e.jsx(qe,{ref:y,onFocusFromOutsideViewport:()=>{const d=g({tabbingDirection:"backwards"});Fe(d)}})]})});fs.displayName=hs;var xs="ToastFocusProxy",qe=o.forwardRef((a,t)=>{const{__scopeToast:s,onFocusFromOutsideViewport:r,...n}=a,l=Pe(xs,s);return e.jsx(Et,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:m=>{const u=m.relatedTarget;!l.viewport?.contains(u)&&r()}})});qe.displayName=xs;var ye="Toast",En="toast.swipeStart",Cn="toast.swipeMove",_n="toast.swipeCancel",kn="toast.swipeEnd",gs=o.forwardRef((a,t)=>{const{forceMount:s,open:r,defaultOpen:n,onOpenChange:l,...m}=a,[u,x]=va({prop:r,defaultProp:n??!0,onChange:l,caller:ye});return e.jsx(wa,{present:s||u,children:e.jsx(Rn,{open:u,...m,ref:t,onClose:()=>x(!1),onPause:Ee(a.onPause),onResume:Ee(a.onResume),onSwipeStart:Z(a.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Z(a.onSwipeMove,p=>{const{x:y,y:N}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${y}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${N}px`)}),onSwipeCancel:Z(a.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Z(a.onSwipeEnd,p=>{const{x:y,y:N}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${y}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${N}px`),x(!1)})})})});gs.displayName=ye;var[An,Pn]=ms(ye,{onClose(){}}),Rn=o.forwardRef((a,t)=>{const{__scopeToast:s,type:r="foreground",duration:n,open:l,onClose:m,onEscapeKeyDown:u,onPause:x,onResume:p,onSwipeStart:y,onSwipeMove:N,onSwipeCancel:i,onSwipeEnd:S,...b}=a,g=Pe(ye,s),[d,v]=o.useState(null),w=St(t,E=>v(E)),T=o.useRef(null),_=o.useRef(null),P=n||g.duration,R=o.useRef(0),V=o.useRef(P),B=o.useRef(0),{onToastAdd:G,onToastRemove:C}=g,O=Ee(()=>{d?.contains(document.activeElement)&&g.viewport?.focus(),m()}),te=o.useCallback(E=>{!E||E===1/0||(window.clearTimeout(B.current),R.current=new Date().getTime(),B.current=window.setTimeout(O,E))},[O]);o.useEffect(()=>{const E=g.viewport;if(E){const H=()=>{te(V.current),p?.()},Y=()=>{const ae=new Date().getTime()-R.current;V.current=V.current-ae,window.clearTimeout(B.current),x?.()};return E.addEventListener(Ke,Y),E.addEventListener(We,H),()=>{E.removeEventListener(Ke,Y),E.removeEventListener(We,H)}}},[g.viewport,P,x,p,te]),o.useEffect(()=>{l&&!g.isClosePausedRef.current&&te(P)},[l,P,g.isClosePausedRef,te]),o.useEffect(()=>(G(),()=>C()),[G,C]);const be=o.useMemo(()=>d?Ts(d):null,[d]);return g.viewport?e.jsxs(e.Fragment,{children:[be&&e.jsx(In,{__scopeToast:s,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:be}),e.jsx(An,{scope:s,onClose:O,children:Ia.createPortal(e.jsx(tt.ItemSlot,{scope:s,children:e.jsx(Na,{asChild:!0,onEscapeKeyDown:Z(u,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:w,style:{userSelect:"none",touchAction:"none",...a.style},onKeyDown:Z(a.onKeyDown,E=>{E.key==="Escape"&&(u?.(E.nativeEvent),E.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Z(a.onPointerDown,E=>{E.button===0&&(T.current={x:E.clientX,y:E.clientY})}),onPointerMove:Z(a.onPointerMove,E=>{if(!T.current)return;const H=E.clientX-T.current.x,Y=E.clientY-T.current.y,ae=!!_.current,re=["left","right"].includes(g.swipeDirection),ne=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,k=re?ne(0,H):0,J=re?0:ne(0,Y),K=E.pointerType==="touch"?10:2,X={x:k,y:J},W={originalEvent:E,delta:X};ae?(_.current=X,Ne(Cn,N,W,{discrete:!1})):ut(X,g.swipeDirection,K)?(_.current=X,Ne(En,y,W,{discrete:!1}),E.target.setPointerCapture(E.pointerId)):(Math.abs(H)>K||Math.abs(Y)>K)&&(T.current=null)}),onPointerUp:Z(a.onPointerUp,E=>{const H=_.current,Y=E.target;if(Y.hasPointerCapture(E.pointerId)&&Y.releasePointerCapture(E.pointerId),_.current=null,T.current=null,H){const ae=E.currentTarget,re={originalEvent:E,delta:H};ut(H,g.swipeDirection,g.swipeThreshold)?Ne(kn,S,re,{discrete:!0}):Ne(_n,i,re,{discrete:!0}),ae.addEventListener("click",ne=>ne.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),In=a=>{const{__scopeToast:t,children:s,...r}=a,n=Pe(ye,t),[l,m]=o.useState(!1),[u,x]=o.useState(!1);return $n(()=>m(!0)),o.useEffect(()=>{const p=window.setTimeout(()=>x(!0),1e3);return()=>window.clearTimeout(p)},[]),u?null:e.jsx(Ta,{asChild:!0,children:e.jsx(Et,{...r,children:l&&e.jsxs(e.Fragment,{children:[n.label," ",s]})})})},Dn="ToastTitle",ys=o.forwardRef((a,t)=>{const{__scopeToast:s,...r}=a;return e.jsx(ce.div,{...r,ref:t})});ys.displayName=Dn;var On="ToastDescription",bs=o.forwardRef((a,t)=>{const{__scopeToast:s,...r}=a;return e.jsx(ce.div,{...r,ref:t})});bs.displayName=On;var vs="ToastAction",ws=o.forwardRef((a,t)=>{const{altText:s,...r}=a;return s.trim()?e.jsx(Ns,{altText:s,asChild:!0,children:e.jsx(st,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${vs}\`. Expected non-empty \`string\`.`),null)});ws.displayName=vs;var js="ToastClose",st=o.forwardRef((a,t)=>{const{__scopeToast:s,...r}=a,n=Pn(js,s);return e.jsx(Ns,{asChild:!0,children:e.jsx(ce.button,{type:"button",...r,ref:t,onClick:Z(a.onClick,n.onClose)})})});st.displayName=js;var Ns=o.forwardRef((a,t)=>{const{__scopeToast:s,altText:r,...n}=a;return e.jsx(ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...n,ref:t})});function Ts(a){const t=[];return Array.from(a.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Mn(r)){const n=r.ariaHidden||r.hidden||r.style.display==="none",l=r.dataset.radixToastAnnounceExclude==="";if(!n)if(l){const m=r.dataset.radixToastAnnounceAlt;m&&t.push(m)}else t.push(...Ts(r))}}),t}function Ne(a,t,s,{discrete:r}){const n=s.originalEvent.currentTarget,l=new CustomEvent(a,{bubbles:!0,cancelable:!0,detail:s});t&&n.addEventListener(a,t,{once:!0}),r?Ea(n,l):n.dispatchEvent(l)}var ut=(a,t,s=0)=>{const r=Math.abs(a.x),n=Math.abs(a.y),l=r>n;return t==="left"||t==="right"?l&&r>s:!l&&n>s};function $n(a=()=>{}){const t=Ee(a);Sa(()=>{let s=0,r=0;return s=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(r)}},[t])}function Mn(a){return a.nodeType===a.ELEMENT_NODE}function Ln(a){const t=[],s=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Fe(a){const t=document.activeElement;return a.some(s=>s===t?!0:(s.focus(),document.activeElement!==t))}var Fn=ps,Ss=fs,Es=gs,Cs=ys,_s=bs,ks=ws,As=st;const Un=Fn,Ps=o.forwardRef(({className:a,...t},s)=>e.jsx(Ss,{ref:s,className:c("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...t}));Ps.displayName=Ss.displayName;const zn=Ae("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Rs=o.forwardRef(({className:a,variant:t,...s},r)=>e.jsx(Es,{ref:r,className:c(zn({variant:t}),a),...s}));Rs.displayName=Es.displayName;const Vn=o.forwardRef(({className:a,...t},s)=>e.jsx(ks,{ref:s,className:c("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...t}));Vn.displayName=ks.displayName;const Is=o.forwardRef(({className:a,...t},s)=>e.jsx(As,{ref:s,className:c("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...t,children:e.jsx(ke,{className:"h-4 w-4"})}));Is.displayName=As.displayName;const Ds=o.forwardRef(({className:a,...t},s)=>e.jsx(Cs,{ref:s,className:c("text-sm font-semibold",a),...t}));Ds.displayName=Cs.displayName;const Os=o.forwardRef(({className:a,...t},s)=>e.jsx(_s,{ref:s,className:c("text-sm opacity-90",a),...t}));Os.displayName=_s.displayName;function Bn(){const{toasts:a}=wn();return e.jsxs(Un,{children:[a.map(function({id:t,title:s,description:r,action:n,...l}){return e.jsxs(Rs,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(Ds,{children:s}),r&&e.jsx(Os,{children:r})]}),n,e.jsx(Is,{})]},t)}),e.jsx(Ps,{})]})}class Jn extends U.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(t){return{hasError:!0,errorId:Date.now().toString()}}componentDidCatch(t,s){console.error("Error caught by boundary:",t,s),this.setState({error:t,errorInfo:s}),this.props.onError&&this.props.onError(t,s)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})};handleGoHome=()=>{this.handleRetry(),window.location.href="/"};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs(de,{className:"w-full max-w-md",children:[e.jsxs(ge,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 p-3 bg-red-100 rounded-full w-fit",children:e.jsx(Nt,{className:"h-8 w-8 text-red-600"})}),e.jsx(Qe,{className:"text-xl text-gray-900",children:"Something went wrong"}),e.jsx(Ze,{children:this.props.fallbackMessage||"We're sorry, but something unexpected happened. Please try again."})]}),e.jsxs(ue,{className:"space-y-4",children:[!1,this.state.errorId&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Error ID: ",this.state.errorId]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(z,{onClick:this.handleRetry,variant:"outline",className:"flex-1",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Try Again"]}),e.jsxs(z,{onClick:this.handleGoHome,className:"flex-1",children:[e.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Go Home"]})]})]})]})}):this.props.children}}class Gn{static MIGRATION_VERSION="1.0.0";static MIGRATION_KEY="pe_manager_migration_version";static async runMigrations(){localStorage.getItem(this.MIGRATION_KEY)!==this.MIGRATION_VERSION&&(F.info("Running data migrations..."),await this.migrateTasksSchema(),await this.migrateProjectsSchema(),await this.migrateStakeholdersSchema(),await this.migrateTeamMembersSchema(),await this.migrateOneOnOnesSchema(),await this.migrateTaskAttributesSchema(),localStorage.setItem(this.MIGRATION_KEY,this.MIGRATION_VERSION),F.info("Data migration completed successfully"))}static async migrateTasksSchema(){const t=this.getData("tasks");if(!t.length)return;const s=t.map(r=>({...r,due_date:r.due_date||null,assignee:r.assignee||null,estimated_hours:r.estimated_hours||null,actual_hours:r.actual_hours||null,completion_date:r.completion_date||(r.status==="done"?r.updated_date:null)}));this.setData("tasks",s),F.info("Migrated tasks",{count:s.length})}static async migrateProjectsSchema(){const t=this.getData("projects");if(!t.length)return;const s=t.map(r=>({...r,deadline:r.deadline||null,budget:r.budget||null,cost:r.cost||null,priority_level:r.priority_level||"medium",progress_percentage:r.progress_percentage||0}));this.setData("projects",s),F.info("Migrated projects",{count:s.length})}static async migrateStakeholdersSchema(){const t=this.getData("stakeholders");if(!t.length)return;const s=t.map(r=>{const n={...r,phone:r.phone||null,contact_info:r.contact_info||null,company:r.company||r.organization||null};return delete n.organization,n});this.setData("stakeholders",s),F.info("Migrated stakeholders",{count:s.length})}static async migrateTeamMembersSchema(){const t=this.getData("team_members");if(!t.length)return;const s=t.map(r=>({...r,phone:r.phone||null,company:r.company||null,leave_from:r.leave_from||null,leave_to:r.leave_to||null,leave_title:r.leave_title||null,last_activity:r.last_activity||null}));this.setData("team_members",s),F.info("Migrated team members",{count:s.length})}static async migrateOneOnOnesSchema(){const t=this.getData("one_on_ones");if(!t.length)return;const s=t.map(r=>{const n={...r,updated_date:r.updated_date||r.created_date,status:r.status||"scheduled",location:r.location||null,team_member_id:r.team_member_id||r.participant_id||null};return delete n.participant_id,n});this.setData("one_on_ones",s),F.info("Migrated one-on-ones",{count:s.length})}static async migrateTaskAttributesSchema(){const t=this.getData("task_attributes");if(!t.length)return;const s=t.map(r=>({...r,updated_date:r.updated_date||r.created_date}));this.setData("task_attributes",s),F.info("Migrated task attributes",{count:s.length})}static getData(t){try{const s=localStorage.getItem(t);return s?JSON.parse(s):[]}catch(s){return F.error("Error reading data from localStorage",{key:t,error:String(s)}),[]}}static setData(t,s){try{localStorage.setItem(t,JSON.stringify(s))}catch(r){throw F.error("Error saving data to localStorage",{key:t,error:String(r)}),r}}static async calculateLastActivity(){const t=this.getData("team_members"),s=this.getData("tasks"),r=this.getData("meetings"),n=t.map(l=>{let m=null;const u=s.filter(y=>y.metadata?.meeting?.participants?.includes(l.name)),x=r.filter(y=>y.participants?.includes(l.id)||y.participants?.includes(l.name)),p=[...u.map(y=>({date:y.updated_date||y.created_date,type:"task"})),...x.map(y=>({date:y.updated_date||y.created_date,type:"meeting"}))];return p.length>0&&(m=p.sort((N,i)=>new Date(i.date)-new Date(N.date))[0].date),{...l,last_activity:m}});this.setData("team_members",n),F.info("Updated last_activity for all team members")}}function Hn(){return o.useEffect(()=>{Gn.runMigrations().catch(a=>{F.error("Data migration failed",{error:String(a)})})},[]),e.jsxs(Jn,{fallbackMessage:"The application encountered an error. Please refresh the page or try again later.",children:[e.jsx(fn,{}),e.jsx(Bn,{})]})}const Kn=U.createContext(null);function Wn({children:a}){const{isAuthenticated:t,loading:s}=xe(),[r,n]=U.useState([]),[l,m]=U.useState([]),[u,x]=U.useState([]),[p,y]=U.useState([]),[N,i]=U.useState([]),[S,b]=U.useState(!0),[g,d]=U.useState(null),[v,w]=U.useState(!1),T=U.useCallback(async()=>{try{const C=await kt.list("-created_date");n(Array.isArray(C)?C:[])}catch(C){F.error("Failed to load projects (context)",{error:String(C)}),d("Failed to load projects")}},[]),_=U.useCallback(async()=>{try{const C=await _t.list("-created_date");m(Array.isArray(C)?C:[])}catch(C){F.error("Failed to load tasks (context)",{error:String(C)}),d("Failed to load tasks")}},[]),P=U.useCallback(async()=>{try{const C=await At.list();x(Array.isArray(C)?C:[])}catch(C){F.error("Failed to load stakeholders (context)",{error:String(C)}),d("Failed to load stakeholders")}},[]),R=U.useCallback(async()=>{try{const C=await Pt.list();y(Array.isArray(C)?C:[])}catch(C){F.error("Failed to load team members (context)",{error:String(C)}),d("Failed to load team members")}},[]),V=U.useCallback(async()=>{try{const C=await Rt.list();i(Array.isArray(C)?C:[])}catch(C){F.error("Failed to load one-on-ones (context)",{error:String(C)}),d("Failed to load one-on-ones")}},[]),B=U.useCallback(async()=>{b(!0),d(null);try{await Promise.all([T(),_(),P(),R(),V()])}finally{b(!1)}},[T,_,P,R,V]);U.useEffect(()=>{!s&&t&&!v?(w(!0),B()):t||(w(!1),n([]),m([]),x([]),y([]),i([]),b(!1))},[t,s]);const G=U.useMemo(()=>({projects:r,tasks:l,stakeholders:u,teamMembers:p,oneOnOnes:N,loading:S,error:g,refreshProjects:T,refreshTasks:_,refreshStakeholders:P,refreshTeamMembers:R,refreshOneOnOnes:V,refreshAll:B}),[r,l,u,p,N,S,g,T,_,P,R,V,B]);return e.jsx(Kn.Provider,{value:G,children:a})}Fa.createRoot(document.getElementById("root")).render(e.jsx(Er,{children:e.jsx(Br,{children:e.jsx(kr,{children:e.jsx(_r,{children:e.jsx(Wn,{children:e.jsx(Rr,{children:e.jsx(Hn,{})})})})})})}));export{Tr as $,Kn as A,z as B,de as C,hr as D,Sr as E,_e as F,Pt as G,mr as H,Ve as I,pr as J,lr as K,Be as L,ar as M,en as N,Rt as O,zr as P,ir as Q,yr as R,At as S,_t as T,br as U,wr as V,or as W,vr as X,Mt as Y,jr as Z,$ as _,Je as a,Ar as a0,Qn as a1,Qr as b,Ge as c,Cr as d,fr as e,xr as f,c as g,ge as h,Qe as i,ue as j,ee as k,F as l,Ze as m,qr as n,L as o,Xe as p,zt as q,Vr as r,Vt as s,kt as t,Ut as u,Q as v,xe as w,tr as x,gr as y,Ce as z};

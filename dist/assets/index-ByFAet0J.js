const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/calendarService-jP3ReSQA.js","assets/chunk-DHGN2BiO.js","assets/chunk-pjYta8vt.js","assets/chunk-CZDJnSNg.js","assets/calendarSynchronizationService-C_BUFLgK.js","assets/chunk-DZDJsQre.js","assets/Tasks-B7gPjoQr.js","assets/chunk-BgLGKXe7.js","assets/chunk-C6AVtkQH.js","assets/chunk-DebkpaDS.js","assets/chunk-D7j8sKMm.js","assets/chunk-Dt0Bnklg.js","assets/chunk-UtEqcWk6.js","assets/chunk-PmtS5Ynq.js","assets/chunk-D3uHh-f_.js","assets/chunk-BdHZTqfh.js","assets/chunk-BFC3YuxX.js","assets/chunk-Cmp1bz9x.js","assets/chunk-CMJ2xOR1.js","assets/chunk-DIbawoHp.js","assets/chunk-BKHKgTH6.js","assets/Metrics-D7K8shiI.js","assets/chunk-DSBO3d0u.js","assets/chunk-fJmDrOgU.js","assets/Stakeholders-CuxkxfGO.js","assets/Projects-BWNih0RW.js","assets/chunk-KzYfAQy1.js","assets/chunk-AbI5mdPJ.js","assets/chunk-Cwmy-p0V.js","assets/chunk-BxZc7glH.js","assets/Settings-C7Wk1IQW.js","assets/chunk-isMwlWi7.js","assets/Team-85hr5N9Q.js","assets/chunk-zMH1QFF_.js","assets/chunk-bOf-e9Xy.js","assets/ProjectDetails-DGFp3Vhv.js","assets/TeamMemberProfile-BaCXQ5_D.js","assets/chunk-CL12iECM.js","assets/Peers-w7l_HHDE.js","assets/PeerProfile--ehJ5E_v.js"])))=>i.map(i=>d[i]);
import{j as r,b as Xe,F as Je,I as Qe,S as Kt,d as qt,e as Ht,f as Yt,U as Wt,g as $e,h as Xt,X as Ze,i as Jt,k as Qt,L as Zt,M as es,l as ts,m as et,n as ss,o as Te,p as F,A as rs,q as ns,r as as,s as os,t as is,v as L,w as pe,P as J,x as tt,B as cs,y as ls,V as st,z as ds,D as us,E as ms,T as rt,H as fs,G as hs}from"./chunk-DHGN2BiO.js";import{f as ps,g as gs,a as c,L as Ge,B as ys,u as xs,h as _s,i as C,b as ws,R as nt}from"./chunk-pjYta8vt.js";import{t as vs,c as Es,a as xe}from"./chunk-CZDJnSNg.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var ue={},ze;function bs(){if(ze)return ue;ze=1;var t=ps();return ue.createRoot=t.createRoot,ue.hydrateRoot=t.hydrateRoot,ue}var js=bs();const Ss=gs(js),Ns="modulepreload",Ts=function(t){return"/"+t},Ke={},T=function(e,s,n){let a=Promise.resolve();if(s&&s.length>0){let l=function(u){return Promise.all(u.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=d?.nonce||d?.getAttribute("nonce");a=l(s.map(u=>{if(u=Ts(u),u in Ke)return;Ke[u]=!0;const p=u.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Ns,p||(y.as="script"),y.crossOrigin="",y.href=u,g&&y.setAttribute("nonce",g),document.head.appendChild(y),p)return new Promise((w,N)=>{y.addEventListener("load",w),y.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return a.then(l=>{for(const d of l||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function V(t){return"/"+t.toLowerCase().replace(/ /g,"-")}function E(...t){return vs(Es(t))}const As={text:(t,e=255)=>!(typeof t!="string"||t.length>e||t.trim().length===0),email:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),url:t=>{try{return new URL(t),!0}catch{return!1}},array:(t,e=100)=>!(!Array.isArray(t)||t.length>e),required:t=>t==null?!1:typeof t=="string"?t.trim().length>0:Array.isArray(t)?t.length>0:!0},X=()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},Os=t=>{if(!X())return console.warn("localStorage is not available"),null;try{return localStorage.getItem(t)}catch(e){return console.warn(`Failed to get item from localStorage: ${t}`,e),null}},Ds=(t,e)=>{if(!X())return console.warn("localStorage is not available"),!1;try{return localStorage.setItem(t,e),!0}catch(s){return console.warn(`Failed to set item in localStorage: ${t}`,s),!1}},at=t=>{if(!X())return console.warn("localStorage is not available"),!1;try{return localStorage.removeItem(t),!0}catch(e){return console.warn(`Failed to remove item from localStorage: ${t}`,e),!1}},Is=t=>{const e=Os(t);if(!e)return null;try{return JSON.parse(e)}catch(s){return console.warn(`Failed to parse JSON from localStorage: ${t}`,s),at(t),null}},Rs=(t,e)=>{try{const s=JSON.stringify(e);return Ds(t,s)}catch(s){return console.warn(`Failed to stringify and store JSON in localStorage: ${t}`,s),!1}},re={username:"admin",password:"password123"},be="auth_token";class q{static validateCredentials(e,s){return!e||!s?!1:e===re.username&&s===re.password}static generateToken(e){return{value:Math.random().toString(36).substring(2)+Date.now().toString(36),timestamp:Date.now(),username:e}}static isValidToken(e){return!(!e||typeof e!="object"||!e.value||!e.timestamp||!e.username)}static clearAuthData(){if(!X())return console.warn("localStorage is not available - cannot clear authentication data"),!1;try{return at(be)}catch(e){return console.warn("Failed to clear authentication data:",e),!1}}static storeToken(e){if(!X()){const s=new Error("localStorage is not available - browser storage may be disabled");throw s.type="STORAGE_UNAVAILABLE",s}try{if(!Rs(be,e)){const n=new Error("Unable to store authentication data - storage may be full or restricted");throw n.type="STORAGE_QUOTA_EXCEEDED",n}}catch(s){if(s.name==="QuotaExceededError"||s.code===22){const n=new Error("Browser storage is full - please clear some data and try again");throw n.type="STORAGE_QUOTA_EXCEEDED",n}else if(s.name==="SecurityError"){const n=new Error("Browser storage access is restricted - please check your privacy settings");throw n.type="STORAGE_SECURITY_ERROR",n}else{const n=new Error("Failed to save authentication data - please try again");throw n.type="STORAGE_UNKNOWN_ERROR",n.originalError=s,n}}}static getStoredToken(){if(!X()){const e=new Error("localStorage is not available - cannot retrieve authentication token");throw e.type="STORAGE_UNAVAILABLE",e}try{const e=Is(be);return this.isValidToken(e)?e:null}catch{return console.warn("Corrupted authentication token detected, clearing storage"),this.clearAuthData(),null}}static isAuthenticated(){try{return this.getStoredToken()!==null}catch(e){if(e.type==="STORAGE_UNAVAILABLE")throw e;return console.warn("Error checking authentication status:",e),!1}}static async changePassword(e,s,n){if(e!==re.username||s!==re.password)throw new Error("Incorrect current password.");re.password=n,console.log("Password for user '"+e+"' has been changed."),this.clearAuthData()}}const qe=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"})),ot="audit_logs",Cs=()=>{try{return q.getStoredToken()?.username||null}catch(t){return console.warn("Unable to get current user for audit log:",t),null}},Ps=()=>{try{const t=localStorage.getItem(ot);return t?JSON.parse(t):[]}catch(t){return console.error("Error reading audit logs:",t),[]}},ks=t=>{try{localStorage.setItem(ot,JSON.stringify(t))}catch(e){console.error("Error saving audit logs:",e)}},$=(t,e,s,n={})=>{const a=Cs();if(!a){console.warn("Cannot create audit log: no authenticated user");return}const o={id:crypto.randomUUID?crypto.randomUUID():`audit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),user:a,action:t,resource:e,resourceId:s,metadata:n,userAgent:navigator.userAgent,ipAddress:"localhost"},l=Ps();l.unshift(o),l.length>1e3&&l.splice(1e3),ks(l)},G={CREATE:"CREATE",READ:"READ",UPDATE:"UPDATE",DELETE:"DELETE",EXPORT:"EXPORT",PRINT:"PRINT"},z={PERSONAL_FILE_ITEM:"PERSONAL_FILE_ITEM",AGENDA_ITEM:"AGENDA_ITEM",TEAM_MEMBER:"TEAM_MEMBER"};function i(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch(e){return console.error(`Error reading data from localStorage key "${t}":`,e),[]}}function f(t,e){try{if(!As.array(e))throw new Error("Invalid data format - must be an array");localStorage.setItem(t,JSON.stringify(e))}catch(s){throw console.error(`Error saving data to localStorage key "${t}":`,s),s}}function A(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"_"+Date.now().toString(36)+Math.random().toString(36).substr(2,9)}function Ls(){try{return q.getStoredToken()?.username||null}catch(t){return console.warn("Unable to get current user:",t),null}}function K(t,e,s=null){const n=Ls();if(!n)throw new Error("Access denied: User not authenticated");if(s&&s.createdBy&&s.createdBy!==n)throw new Error("Access denied: You can only access your own personal file items");return n}const O={entities:{Task:{async list(){return i("tasks")},async create(t){const e=i("tasks"),s={...t,id:A(),created_date:new Date().toISOString(),updated_date:new Date().toISOString(),due_date:t.due_date||null,assignee:t.assignee||null,estimated_hours:t.estimated_hours||null,actual_hours:t.actual_hours||null,completion_date:null};return e.unshift(s),f("tasks",e),s},async update(t,e){const s=i("tasks"),n=s.findIndex(a=>a.id===t);if(n!==-1){const a=s[n],o={...a,...e,updated_date:new Date().toISOString()};return e.status==="done"&&a.status!=="done"?o.completion_date=new Date().toISOString():e.status&&e.status!=="done"&&a.status==="done"&&(o.completion_date=null),s[n]=o,f("tasks",s),s[n]}throw new Error("Task not found")},async delete(t){let e=i("tasks");return e=e.filter(s=>s.id!==t),f("tasks",e),!0}},Project:{async list(){return i("projects")},async create(t){const e=i("projects"),s={...t,id:A(),created_date:new Date().toISOString(),deadline:t.deadline||null,budget:t.budget||null,cost:t.cost||null,priority_level:t.priority_level||"medium",progress_percentage:t.progress_percentage||0};return e.unshift(s),f("projects",e),s},async update(t,e){const s=i("projects"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e},f("projects",s),s[n];throw new Error("Project not found")},async delete(t){let e=i("projects");return e=e.filter(s=>s.id!==t),f("projects",e),!0}},Stakeholder:{async list(){return i("stakeholders")},async create(t){const e=i("stakeholders"),s={...t,id:A(),created_date:new Date().toISOString(),phone:t.phone||null,contact_info:t.contact_info||null,company:t.company||t.organization||null};return delete s.organization,e.unshift(s),f("stakeholders",e),s},async update(t,e){const s=i("stakeholders"),n=s.findIndex(a=>a.id===t);if(n!==-1){const a={...s[n],...e};return e.organization&&!e.company&&(a.company=e.organization,delete a.organization),s[n]=a,f("stakeholders",s),s[n]}throw new Error("Stakeholder not found")},async delete(t){let e=i("stakeholders");return e=e.filter(s=>s.id!==t),f("stakeholders",e),!0}},TeamMember:{async list(){return i("team_members")},async get(t){return i("team_members").find(s=>s.id===t)||null},async create(t){const e=i("team_members"),s={...t,id:A(),created_date:new Date().toISOString(),phone:t.phone||null,company:t.company||null,birthday:t.birthday||null,duties:t.duties||[],last_activity:null};return e.unshift(s),f("team_members",e),s},async update(t,e){const s=i("team_members"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e},f("team_members",s),s[n];throw new Error("Team member not found")},async delete(t){let e=i("team_members");return e=e.filter(s=>s.id!==t),f("team_members",e),!0},async getDuties(t){return i("duties").filter(s=>s.team_member_id===t)},async getCurrentDuties(t){const e=i("duties"),s=new Date;return e.filter(n=>{if(n.team_member_id!==t)return!1;const a=new Date(n.start_date),o=new Date(n.end_date);return s>=a&&s<=o})}},OneOnOne:{async list(){return i("one_on_ones")},async create(t){const e=i("one_on_ones"),s={...t,id:A(),created_date:new Date().toISOString(),updated_date:new Date().toISOString(),team_member_id:t.team_member_id||t.participant_id||null,status:t.status||"scheduled",location:t.location||null,next_meeting_calendar_event_id:t.next_meeting_calendar_event_id||null};if(delete s.participant_id,e.unshift(s),f("one_on_ones",e),s.next_meeting_date&&s.team_member_id)try{const{CalendarService:n}=await T(async()=>{const{CalendarService:o}=await import("./calendarService-jP3ReSQA.js");return{CalendarService:o}},__vite__mapDeps([0,1,2,3])),a=await n.createAndLinkOneOnOneMeeting(s.id,s.team_member_id,s.next_meeting_date);s.next_meeting_calendar_event_id=a.calendarEvent.id,e[0]=s,f("one_on_ones",e)}catch(n){console.warn("Failed to create calendar event for OneOnone:",n)}try{const{CalendarSynchronizationService:n}=await T(async()=>{const{CalendarSynchronizationService:a}=await import("./calendarSynchronizationService-C_BUFLgK.js");return{CalendarSynchronizationService:a}},__vite__mapDeps([4,0,1,2,3,5]));n.ensureOneOnOneVisibility({teamMemberId:s.team_member_id,createMissing:!0}).catch(a=>{console.warn("Background calendar sync failed after OneOnOne creation:",a)})}catch(n){console.warn("Failed to import CalendarSynchronizationService:",n)}return s},async update(t,e){const s=i("one_on_ones"),n=s.findIndex(a=>a.id===t);if(n!==-1){const a=s[n],o={...a,...e,updated_date:new Date().toISOString()};if(e.participant_id&&!e.team_member_id&&(o.team_member_id=e.participant_id,delete o.participant_id),e.next_meeting_date&&e.next_meeting_date!==a.next_meeting_date)try{const{CalendarService:l}=await T(async()=>{const{CalendarService:d}=await import("./calendarService-jP3ReSQA.js");return{CalendarService:d}},__vite__mapDeps([0,1,2,3]));if(a.next_meeting_calendar_event_id)await l.updateOneOnOneMeeting(a.next_meeting_calendar_event_id,e.next_meeting_date);else if(o.team_member_id){const d=await l.createAndLinkOneOnOneMeeting(t,o.team_member_id,e.next_meeting_date);o.next_meeting_calendar_event_id=d.calendarEvent.id}}catch(l){console.warn("Failed to update calendar event for OneOnOne:",l)}try{const{CalendarSynchronizationService:l}=await T(async()=>{const{CalendarSynchronizationService:d}=await import("./calendarSynchronizationService-C_BUFLgK.js");return{CalendarSynchronizationService:d}},__vite__mapDeps([4,0,1,2,3,5]));l.ensureOneOnOneVisibility({teamMemberId:o.team_member_id,createMissing:!0}).catch(d=>{console.warn("Background calendar sync failed after OneOnOne update:",d)})}catch(l){console.warn("Failed to import CalendarSynchronizationService:",l)}if((e.next_meeting_date===null||e.next_meeting_date==="")&&a.next_meeting_calendar_event_id)try{const{CalendarService:l}=await T(async()=>{const{CalendarService:d}=await import("./calendarService-jP3ReSQA.js");return{CalendarService:d}},__vite__mapDeps([0,1,2,3]));await l.deleteOneOnOneMeeting(a.next_meeting_calendar_event_id),o.next_meeting_calendar_event_id=null}catch(l){console.warn("Failed to delete calendar event for OneOnOne:",l)}return s[n]=o,f("one_on_ones",s),s[n]}throw new Error("OneOnOne not found")},async delete(t){const e=i("one_on_ones"),s=e.find(a=>a.id===t);if(s&&s.next_meeting_calendar_event_id)try{const{CalendarService:a}=await T(async()=>{const{CalendarService:o}=await import("./calendarService-jP3ReSQA.js");return{CalendarService:o}},__vite__mapDeps([0,1,2,3]));await a.deleteOneOnOneMeeting(s.next_meeting_calendar_event_id)}catch(a){console.warn("Failed to delete associated calendar event:",a)}const n=e.filter(a=>a.id!==t);return f("one_on_ones",n),!0}},TaskAttribute:{async list(){return i("task_attributes")},async create(t){const e=i("task_attributes"),s={...t,id:A(),created_date:new Date().toISOString(),updated_date:new Date().toISOString()};return e.unshift(s),f("task_attributes",e),s},async update(t,e){const s=i("task_attributes"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e,updated_date:new Date().toISOString()},f("task_attributes",s),s[n];throw new Error("TaskAttribute not found")},async delete(t){let e=i("task_attributes");return e=e.filter(s=>s.id!==t),f("task_attributes",e),!0}},Meeting:{async list(){return i("meetings")},async get(t){return i("meetings").find(s=>s.id===t)||null},async create(t){const e=i("meetings"),s={...t,id:A(),created_date:new Date().toISOString(),updated_date:new Date().toISOString(),status:t.status||"scheduled",participants:t.participants||[],agenda_items:t.agenda_items||[],action_items:t.action_items||[]};return e.unshift(s),f("meetings",e),s},async update(t,e){const s=i("meetings"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e,updated_date:new Date().toISOString()},f("meetings",s),s[n];throw new Error("Meeting not found")},async delete(t){let e=i("meetings");return e=e.filter(s=>s.id!==t),f("meetings",e),!0}},CalendarEvent:{async list(){return i("calendar_events")},async get(t){return i("calendar_events").find(s=>s.id===t)||null},async create(t){const e=i("calendar_events"),s=["meeting","one_on_one","duty","birthday","out_of_office"];if(t.event_type&&!s.includes(t.event_type))throw new Error(`Invalid event_type. Must be one of: ${s.join(", ")}`);t.event_type==="duty"&&!t.duty_id&&console.warn("Duty event created without duty_id - this may cause display issues"),t.event_type==="out_of_office"&&!t.out_of_office_id&&console.warn("Out of office event created without out_of_office_id - this may cause display issues");const n={...t,id:A(),created_date:new Date().toISOString(),all_day:t.all_day||!1,recurrence_rule:t.recurrence_rule||null,event_type:t.event_type||"meeting",duty_id:t.duty_id||null,out_of_office_id:t.out_of_office_id||null,recurrence:t.recurrence||null};return n.event_type==="birthday"&&!n.recurrence&&(n.recurrence={type:"yearly",interval:1}),e.unshift(n),f("calendar_events",e),n},async update(t,e){const s=i("calendar_events"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e},f("calendar_events",s),s[n];throw new Error("Calendar event not found")},async delete(t){let e=i("calendar_events");return e=e.filter(s=>s.id!==t),f("calendar_events",e),!0},async createDutyEvent(t,e,s,n,a,o=null){return await this.create({title:s,description:o||`Duty assignment: ${s}`,start_date:n,end_date:a,all_day:!0,event_type:"duty",duty_id:t,team_member_id:e,linked_entity_type:"duty",linked_entity_id:t})},async createBirthdayEvent(t,e,s){return await this.create({title:`🎂 ${e}'s Birthday`,description:`Birthday celebration for ${e}`,start_date:s,end_date:s,all_day:!0,event_type:"birthday",team_member_id:t,linked_entity_type:"team_member",linked_entity_id:t,recurrence:{type:"yearly",interval:1}})},async createOutOfOfficeEvent(t,e,s,n,a,o="vacation"){return await this.create({title:`${s} - Out of Office (${o})`,description:`${s} is out of office`,start_date:n,end_date:a,all_day:!0,event_type:"out_of_office",out_of_office_id:t,team_member_id:e,linked_entity_type:"out_of_office",linked_entity_id:t})},async getByType(t){return(await this.list()).filter(s=>s.event_type===t)},async getByDutyId(t){return(await this.list()).filter(s=>s.duty_id===t)},async getByOutOfOfficeId(t){return(await this.list()).filter(s=>s.out_of_office_id===t)},async getBirthdayEvents(){return await this.getByType("birthday")},async getDutyEvents(){return await this.getByType("duty")},async getOutOfOfficeEvents(){return await this.getByType("out_of_office")},async getMeetingEvents(){return(await this.list()).filter(e=>e.event_type==="meeting"||e.event_type==="one_on_one")}},Notification:{async list(){return i("notifications")},async get(t){return i("notifications").find(s=>s.id===t)||null},async create(t){const e=i("notifications"),s={...t,id:A(),created_date:new Date().toISOString(),read:t.read||!1,scheduled_date:t.scheduled_date||null};return e.unshift(s),f("notifications",e),s},async update(t,e){const s=i("notifications"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e},f("notifications",s),s[n];throw new Error("Notification not found")},async delete(t){let e=i("notifications");return e=e.filter(s=>s.id!==t),f("notifications",e),!0}},Reminder:{async list(){return i("reminders")},async get(t){return i("reminders").find(s=>s.id===t)||null},async create(t){const e=i("reminders"),s={...t,id:A(),created_date:new Date().toISOString(),completed:t.completed||!1};return e.unshift(s),f("reminders",e),s},async update(t,e){const s=i("reminders"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e},f("reminders",s),s[n];throw new Error("Reminder not found")},async delete(t){let e=i("reminders");return e=e.filter(s=>s.id!==t),f("reminders",e),!0}},Comment:{async list(){return i("comments")},async get(t){return i("comments").find(s=>s.id===t)||null},async create(t){const e=i("comments"),s={...t,id:A(),created_date:new Date().toISOString(),updated_date:new Date().toISOString(),author_name:t.author_name||"Local User"};return e.unshift(s),f("comments",e),s},async update(t,e){const s=i("comments"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e,updated_date:new Date().toISOString()},f("comments",s),s[n];throw new Error("Comment not found")},async delete(t){let e=i("comments");return e=e.filter(s=>s.id!==t),f("comments",e),!0}},OutOfOffice:{async list(){return i("out_of_office")},async get(t){return i("out_of_office").find(s=>s.id===t)||null},async create(t){const e=i("out_of_office"),s={...t,id:A(),created_date:new Date().toISOString(),updated_date:new Date().toISOString(),notes:t.notes||null,team_member_id:t.team_member_id||null,peer_id:t.peer_id||null};return e.unshift(s),f("out_of_office",e),s},async update(t,e){const s=i("out_of_office"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e,updated_date:new Date().toISOString()},f("out_of_office",s),s[n];throw new Error("OutOfOffice not found")},async delete(t){let e=i("out_of_office");return e=e.filter(s=>s.id!==t),f("out_of_office",e),!0},async getByTeamMember(t){return i("out_of_office").filter(s=>s.team_member_id===t)},async getByPeer(t){return i("out_of_office").filter(s=>s.peer_id===t)},async getActiveForDate(t){const e=i("out_of_office"),s=new Date(t);return e.filter(n=>{const a=new Date(n.start_date),o=new Date(n.end_date);return s>=a&&s<=o})},async getCountForYear(t,e){const n=i("out_of_office").filter(d=>d.team_member_id===t);let a=0;const o=new Date(e,0,1),l=new Date(e,11,31);return n.forEach(d=>{const g=new Date(d.start_date),u=new Date(d.end_date),p=new Date(Math.max(g.getTime(),o.getTime())),h=new Date(Math.min(u.getTime(),l.getTime()));if(p<=h){const y=h.getTime()-p.getTime(),w=Math.floor(y/(1e3*3600*24))+1;a+=w}}),a},async getCountForYearByPeer(t,e){const n=i("out_of_office").filter(d=>d.peer_id===t);let a=0;const o=new Date(e,0,1),l=new Date(e,11,31);return n.forEach(d=>{const g=new Date(d.start_date),u=new Date(d.end_date),p=new Date(Math.max(g.getTime(),o.getTime())),h=new Date(Math.min(u.getTime(),l.getTime()));if(p<=h){const y=h.getTime()-p.getTime(),w=Math.floor(y/(1e3*3600*24))+1;a+=w}}),a}},Peer:{async list(){return i("peers")},async get(t){return i("peers").find(s=>s.id===t)||null},async create(t){const e=i("peers"),s={...t,id:A(),created_date:new Date().toISOString(),last_activity:null,organization:t.organization||"",collaboration_context:t.collaboration_context||"",relationship_type:t.relationship_type||"other",name:t.name,role:t.role||"",email:t.email||"",phone:t.phone||"",department:t.department||"",availability:t.availability||"",skills:Array.isArray(t.skills)?t.skills:[],notes:t.notes||"",avatar:t.avatar||""};return e.unshift(s),f("peers",e),s},async update(t,e){const s=i("peers"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e},f("peers",s),s[n];throw new Error("Peer not found")},async delete(t){let e=i("peers");return e=e.filter(s=>s.id!==t),f("peers",e),!0}},Duty:{async list(){return i("duties")},async get(t){return i("duties").find(s=>s.id===t)||null},async create(t){const e=i("duties");if(!t.team_member_id)throw new Error("team_member_id is required");if(!t.type)throw new Error("duty type is required");if(!t.title)throw new Error("duty title is required");if(!t.start_date)throw new Error("start_date is required");if(!t.end_date)throw new Error("end_date is required");const s=["devops","on_call","other"];if(!s.includes(t.type))throw new Error(`Invalid duty type. Must be one of: ${s.join(", ")}`);const n=new Date(t.start_date),a=new Date(t.end_date);if(n>=a)throw new Error("start_date must be before end_date");e.filter(g=>g.team_member_id===t.team_member_id).some(g=>{const u=new Date(g.start_date),p=new Date(g.end_date);return n<=p&&a>=u})&&console.warn("Duty assignment conflicts with existing duty for this team member");const d={...t,id:A(),created_date:new Date().toISOString(),updated_date:new Date().toISOString(),team_member_id:t.team_member_id,type:t.type,title:t.title,description:t.description||null,start_date:t.start_date,end_date:t.end_date};return e.unshift(d),f("duties",e),d},async update(t,e){const s=i("duties"),n=s.findIndex(g=>g.id===t);if(n===-1)throw new Error("Duty not found");const a=s[n];if(e.type){const g=["devops","on_call","other"];if(!g.includes(e.type))throw new Error(`Invalid duty type. Must be one of: ${g.join(", ")}`)}const o=new Date(e.start_date||a.start_date),l=new Date(e.end_date||a.end_date);if(o>=l)throw new Error("start_date must be before end_date");if(e.start_date||e.end_date||e.team_member_id){const g=e.team_member_id||a.team_member_id;s.filter(h=>h.team_member_id===g&&h.id!==t).some(h=>{const y=new Date(h.start_date),w=new Date(h.end_date);return o<=w&&l>=y})&&console.warn("Updated duty assignment conflicts with existing duty for this team member")}const d={...a,...e,updated_date:new Date().toISOString()};return s[n]=d,f("duties",s),d},async delete(t){let e=i("duties");if(!e.some(n=>n.id===t))throw new Error("Duty not found");return e=e.filter(n=>n.id!==t),f("duties",e),!0},async getByTeamMember(t){return i("duties").filter(s=>s.team_member_id===t)},async getActiveForDate(t){const e=i("duties"),s=new Date(t);return e.filter(n=>{const a=new Date(n.start_date),o=new Date(n.end_date);return s>=a&&s<=o})},async getConflicts(t,e,s,n=null){const a=i("duties"),o=new Date(e),l=new Date(s);return a.filter(d=>{if(n&&d.id===n||d.team_member_id!==t)return!1;const g=new Date(d.start_date),u=new Date(d.end_date);return o<=u&&l>=g})}},AgendaItem:{async list(){return i("agenda_items")},async get(t){return i("agenda_items").find(s=>s.id===t)||null},async create(t){const e=i("agenda_items"),s={...t,id:A(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:t.status||"pending",priority:t.priority||2,tags:t.tags||[]};return e.unshift(s),f("agenda_items",e),s},async update(t,e){const s=i("agenda_items"),n=s.findIndex(a=>a.id===t);if(n!==-1)return s[n]={...s[n],...e,updatedAt:new Date().toISOString()},f("agenda_items",s),s[n];throw new Error("AgendaItem not found")},async delete(t){let e=i("agenda_items");return e=e.filter(s=>s.id!==t),f("agenda_items",e),!0},async getByTeamMember(t){return i("agenda_items").filter(s=>s.teamMemberId===t)},async getByStatus(t){return i("agenda_items").filter(s=>s.status===t)},async getForNextMeeting(t){return i("agenda_items").filter(s=>s.teamMemberId===t&&s.status==="pending")}},PersonalFileItem:{async list(){const t=K(),s=i("personal_file_items").filter(n=>n.createdBy===t);return $(G.READ,z.PERSONAL_FILE_ITEM,"all",{operation:"list",itemCount:s.length}),s},async get(t){const e=K(),n=i("personal_file_items").find(a=>a.id===t);if(!n)return null;if(n.createdBy!==e)throw new Error("Access denied: You can only access your own personal file items");return $(G.READ,z.PERSONAL_FILE_ITEM,t,{operation:"get",teamMemberId:n.teamMemberId}),n},async create(t){const e=K(),s=i("personal_file_items"),n={...t,id:A(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:e,category:t.category||"general",tags:t.tags||[],importance:t.importance||3};return s.unshift(n),f("personal_file_items",s),$(G.CREATE,z.PERSONAL_FILE_ITEM,n.id,{operation:"create",teamMemberId:n.teamMemberId,category:n.category,importance:n.importance}),n},async update(t,e){const s=K(),n=i("personal_file_items"),a=n.findIndex(d=>d.id===t);if(a===-1)throw new Error("PersonalFileItem not found");const o=n[a];if(o.createdBy!==s)throw new Error("Access denied: You can only update your own personal file items");const l={...o,...e,updatedAt:new Date().toISOString(),createdBy:o.createdBy};return n[a]=l,f("personal_file_items",n),$(G.UPDATE,z.PERSONAL_FILE_ITEM,t,{operation:"update",teamMemberId:l.teamMemberId,changes:Object.keys(e)}),l},async delete(t){const e=K();let s=i("personal_file_items");const n=s.find(a=>a.id===t);if(!n)throw new Error("PersonalFileItem not found");if(n.createdBy!==e)throw new Error("Access denied: You can only delete your own personal file items");return s=s.filter(a=>a.id!==t),f("personal_file_items",s),$(G.DELETE,z.PERSONAL_FILE_ITEM,t,{operation:"delete",teamMemberId:n.teamMemberId,category:n.category}),!0},async getByTeamMember(t){const e=K(),n=i("personal_file_items").filter(a=>a.teamMemberId===t&&a.createdBy===e);return $(G.READ,z.PERSONAL_FILE_ITEM,"team_member",{operation:"getByTeamMember",teamMemberId:t,itemCount:n.length}),n},async getByCategory(t){const e=K(),n=i("personal_file_items").filter(a=>a.category===t&&a.createdBy===e);return $(G.READ,z.PERSONAL_FILE_ITEM,"category",{operation:"getByCategory",category:t,itemCount:n.length}),n},async searchByTags(t){if(!Array.isArray(t)||t.length===0)return[];const e=K(),n=i("personal_file_items").filter(a=>a.createdBy===e&&a.tags&&a.tags.some(o=>t.includes(o)));return $(G.READ,z.PERSONAL_FILE_ITEM,"tags",{operation:"searchByTags",tags:t,itemCount:n.length}),n}},EmployeeGoal:{async list(){return i("employee_goals")},async get(t){return i("employee_goals").find(s=>s.id===t)||null},async create(t){const e=i("employee_goals");if(!t.employeeId)throw new Error("employeeId is required");if(!t.title)throw new Error("title is required");if(!t.developmentNeed)throw new Error("developmentNeed is required");if(!t.developmentActivity)throw new Error("developmentActivity is required");if(!t.developmentGoalDescription)throw new Error("developmentGoalDescription is required");const s={...t,id:A(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:t.status||"active",importSource:t.importSource||null};return e.unshift(s),f("employee_goals",e),s},async update(t,e){const s=i("employee_goals"),n=s.findIndex(a=>a.id===t);if(n!==-1){const a={...s[n],...e,updatedAt:new Date().toISOString()};return s[n]=a,f("employee_goals",s),a}throw new Error("Employee goal not found")},async delete(t){let e=i("employee_goals");if(!e.some(n=>n.id===t))throw new Error("Employee goal not found");return e=e.filter(n=>n.id!==t),f("employee_goals",e),!0},async getByTeamMember(t){return i("employee_goals").filter(s=>s.employeeId===t)},async getByStatus(t){return i("employee_goals").filter(s=>s.status===t)},async search(t){if(!t)return[];const e=i("employee_goals"),s=t.toLowerCase();return e.filter(n=>{const a=n.title?.toLowerCase().includes(s),o=n.developmentGoalDescription?.toLowerCase().includes(s),l=n.developmentNeed?.toLowerCase().includes(s),d=n.developmentActivity?.toLowerCase().includes(s);return a||o||l||d})}}}},Ms=O.entities.Task,Fs=O.entities.Project,Us=O.entities.Stakeholder,Bs=O.entities.TeamMember,Vs=O.entities.TaskAttribute,$s=O.entities.OneOnOne,Gs=O.entities.Meeting,zs=O.entities.CalendarEvent,Ks=O.entities.Notification,qs=O.entities.Reminder,Hs=O.entities.Comment,Ys=O.entities.OutOfOffice,Ws=O.entities.Peer,Xs=O.entities.Duty,Js=O.entities.AgendaItem,Qs=O.entities.PersonalFileItem,Zs=O.entities.EmployeeGoal,it={me:async()=>{const e=(await T(async()=>{const{default:n}=await Promise.resolve().then(()=>qe);return{default:n}},void 0)).default.getStoredToken();if(!e)throw new Error("No authenticated user found");return{id:"local-user",name:e.username==="admin"?"Administrator":e.username.charAt(0).toUpperCase()+e.username.slice(1),username:e.username,isAuthenticated:!0,loginTime:new Date(e.timestamp).toISOString()}},logout:async()=>((await T(async()=>{const{default:e}=await Promise.resolve().then(()=>qe);return{default:e}},void 0)).default.clearAuthData(),!0)},an=Object.freeze(Object.defineProperty({__proto__:null,AgendaItem:Js,CalendarEvent:zs,Comment:Hs,Duty:Xs,EmployeeGoal:Zs,Meeting:Gs,Notification:Ks,OneOnOne:$s,OutOfOffice:Ys,Peer:Ws,PersonalFileItem:Qs,Project:Fs,Reminder:qs,Stakeholder:Us,Task:Ms,TaskAttribute:Vs,TeamMember:Bs,User:it},Symbol.toStringTag,{value:"Module"})),Ae=c.forwardRef(({className:t,...e},s)=>r.jsx(Xe,{ref:s,className:E("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Ae.displayName=Xe.displayName;const er=c.forwardRef(({className:t,...e},s)=>r.jsx(Qe,{ref:s,className:E("aspect-square h-full w-full",t),...e}));er.displayName=Qe.displayName;const Oe=c.forwardRef(({className:t,...e},s)=>r.jsx(Je,{ref:s,className:E("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Oe.displayName=Je.displayName;const ct=c.createContext(null),Le=()=>{const t=c.useContext(ct);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},tr=({children:t})=>{const[e,s]=c.useState(!1),[n,a]=c.useState(!0),[o,l]=c.useState(null);c.useEffect(()=>{(async()=>{try{l(null);const y=q.isAuthenticated();s(y)}catch(y){console.error("Failed to initialize authentication state:",y);let w="Failed to initialize authentication. Please refresh the page.";switch(y.type){case"STORAGE_UNAVAILABLE":w="Browser storage is not available. Please enable cookies and local storage in your browser settings.";break;case"STORAGE_SECURITY_ERROR":w="Browser storage access is restricted. Please check your privacy settings.";break;default:y.message?.includes("localStorage")&&(w="Browser storage is not available. Please enable cookies and local storage.")}l(w),s(!1)}finally{a(!1)}})()},[]);const p={isAuthenticated:e,login:async(h,y)=>{try{if(l(null),!h||!y)return{success:!1,error:"Please fill in all fields"};if(!q.validateCredentials(h,y))return{success:!1,error:"Invalid username or password"};const N=q.generateToken(h);return q.storeToken(N),s(!0),{success:!0}}catch(w){console.error("Login failed:",w);let N="Authentication failed. Please try again.";switch(w.type){case"STORAGE_UNAVAILABLE":N="Browser storage is disabled. Please enable cookies and local storage in your browser settings.";break;case"STORAGE_QUOTA_EXCEEDED":N="Browser storage is full. Please clear some browser data and try again.";break;case"STORAGE_SECURITY_ERROR":N="Browser storage access is restricted. Please check your privacy settings and try again.";break;case"STORAGE_UNKNOWN_ERROR":N="Unable to save login session. Please try again or contact support.";break;default:w.message?.includes("localStorage")?N="Unable to save login session. Please check your browser settings.":w.message?.includes("Unable to store")&&(N="Unable to save login session. Your browser storage may be full.")}return{success:!1,error:N}}},logout:()=>{try{l(null);const h=q.clearAuthData();s(!1),h||console.warn("Unable to clear browser storage during logout - session data may persist")}catch(h){console.error("Logout failed:",h),s(!1),h.type==="STORAGE_UNAVAILABLE"?console.warn("localStorage unavailable during logout - session cleared from memory only"):console.warn("Unexpected error during logout:",h)}},loading:n,error:o,clearError:()=>{l(null)}};return r.jsx(ct.Provider,{value:p,children:t})};function sr({children:t,currentPageName:e}){const[s,n]=c.useState(!1),[a,o]=c.useState(null),[l,d]=c.useState(!0),{logout:g,isAuthenticated:u}=Le();c.useEffect(()=>{(async()=>{if(!u){o(null),d(!1);return}try{d(!0);const w=await it.me();o(w)}catch(w){console.error("Error fetching user data:",w),o(null)}finally{d(!1)}})()},[u]);const p=()=>{g()},h=[{name:"Tasks",icon:Kt,href:V("Tasks"),current:e==="Tasks"},{name:"Calendar",icon:qt,href:V("Calendar"),current:e==="Calendar"},{name:"Projects",icon:Ht,href:V("Projects"),current:e==="Projects"},{name:"Metrics",icon:Yt,href:V("Metrics"),current:e==="Metrics"},{name:"Team",icon:Wt,href:V("Team"),current:e==="Team"},{name:"Stakeholders",icon:$e,href:V("Stakeholders"),current:e==="Stakeholders"},{name:"Peers",icon:$e,href:V("Peers"),current:e==="Peers"}];return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s&&r.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>n(!1)}),r.jsxs("div",{className:E("fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-200 ease-in-out lg:translate-x-0 overflow-y-auto",s?"translate-x-0":"-translate-x-full"),children:[r.jsx("div",{className:"sticky top-0 bg-white z-10 border-b",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Xt,{className:"h-8 w-8 text-indigo-600"}),r.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"P&E Manager"})]}),r.jsx("button",{onClick:()=>n(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",children:r.jsx(Ze,{className:"h-5 w-5"})})]})}),r.jsxs("div",{className:"flex flex-col h-[calc(100%-4rem)] justify-between",children:[r.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:r.jsx("div",{className:"space-y-1",children:h.map(y=>r.jsxs(Ge,{to:y.href,onClick:()=>n(!1),className:E("flex items-center px-4 py-3 text-sm font-medium rounded-md",y.current?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:[r.jsx(y.icon,{className:"h-5 w-5 mr-3"}),y.name]},y.name))})}),r.jsxs("div",{className:"p-4 border-t",children:[l?r.jsxs("div",{className:"mb-4 px-4 py-3 flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full animate-pulse"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-1"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-2/3"})]})]}):a?r.jsxs("div",{className:"mb-4 px-4 py-3 flex items-center gap-3",children:[r.jsx(Ae,{className:"h-10 w-10 bg-indigo-100",children:r.jsx(Oe,{className:"text-indigo-700",children:a.name?.split(" ").map(y=>y[0]).join("").toUpperCase()||"U"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.name||"User"}),r.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["@",a.username||"user"]})]})]}):u&&r.jsxs("div",{className:"mb-4 px-4 py-3 flex items-center gap-3",children:[r.jsx(Ae,{className:"h-10 w-10 bg-gray-100",children:r.jsx(Oe,{className:"text-gray-500",children:r.jsx(Jt,{className:"h-5 w-5"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:"User"}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:"Authenticated"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs(Ge,{to:V("Settings"),onClick:()=>n(!1),className:E("flex items-center px-4 py-3 text-sm font-medium rounded-md",e==="Settings"?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:[r.jsx(Qt,{className:"h-5 w-5 mr-3"}),"Settings"]}),r.jsxs("button",{onClick:p,className:"w-full flex items-center px-4 py-3 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100",children:[r.jsx(Zt,{className:"h-5 w-5 mr-3"}),"Log out"]})]})]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64",children:[r.jsx("header",{className:"sticky top-0 bg-white shadow-sm z-10",children:r.jsx("div",{className:"flex justify-between items-center h-16 px-4 sm:px-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>n(!0),className:"lg:hidden text-gray-500 hover:text-gray-700 mr-4",children:r.jsx(es,{className:"h-6 w-6"})}),r.jsxs("div",{className:"text-md font-medium text-gray-800",children:["P&E Manager ",e&&r.jsxs("span",{className:"text-gray-500",children:[" > ",e]})]})]})})}),r.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})}const Y=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:E("rounded-xl border bg-card text-card-foreground shadow",t),...e}));Y.displayName="Card";const Q=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:E("flex flex-col space-y-1.5 p-6",t),...e}));Q.displayName="CardHeader";const _e=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:E("font-semibold leading-none tracking-tight",t),...e}));_e.displayName="CardTitle";const we=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:E("text-sm text-muted-foreground",t),...e}));we.displayName="CardDescription";const W=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:E("p-6 pt-0",t),...e}));W.displayName="CardContent";const rr=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:E("flex items-center p-6 pt-0",t),...e}));rr.displayName="CardFooter";const nr=xe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),k=c.forwardRef(({className:t,variant:e,size:s,asChild:n=!1,...a},o)=>{const l=n?ts:"button";return r.jsx(l,{className:E(nr({variant:e,size:s,className:t})),ref:o,...a})});k.displayName="Button";const De=c.forwardRef(({className:t,type:e,...s},n)=>r.jsx("input",{type:e,className:E("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...s}));De.displayName="Input";const ar=xe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ie=c.forwardRef(({className:t,...e},s)=>r.jsx(et,{ref:s,className:E(ar(),t),...e}));Ie.displayName=et.displayName;const or=xe("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ge=c.forwardRef(({className:t,variant:e,...s},n)=>r.jsx("div",{ref:n,role:"alert",className:E(or({variant:e}),t),...s}));ge.displayName="Alert";const ir=c.forwardRef(({className:t,...e},s)=>r.jsx("h5",{ref:s,className:E("mb-1 font-medium leading-none tracking-tight",t),...e}));ir.displayName="AlertTitle";const ye=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:E("text-sm [&_p]:leading-relaxed",t),...e}));ye.displayName="AlertDescription";const cr=()=>{const[t,e]=c.useState({username:"",password:""}),[s,n]=c.useState({}),[a,o]=c.useState(!1),[l,d]=c.useState(""),[g,u]=c.useState(0),{login:p,error:h,clearError:y}=Le(),w=()=>{const x={};return t.username.trim()||(x.username="Username is required"),t.password.trim()||(x.password="Password is required"),n(x),Object.keys(x).length===0},N=x=>{const{name:b,value:v}=x.target;e(j=>({...j,[b]:v})),s[b]&&n(j=>({...j,[b]:""})),l&&d(""),h&&y&&y()},S=async x=>{if(x.preventDefault(),!!w()){o(!0),d("");try{const b=await p(t.username,t.password);if(b.success)u(0);else{u(j=>j+1);let v=b.error||"Login failed. Please try again.";g>=2&&b.error?.includes("Invalid username or password")?v='Invalid username or password. Default credentials are username: "admin", password: "password123"':g>=1&&b.error?.includes("storage")&&(v=`${b.error} Try refreshing the page or using a different browser.`),d(v)}}catch(b){console.error("Login error:",b),u(j=>j+1);let v="Authentication failed. Please try again.";b.type==="STORAGE_UNAVAILABLE"?v="Browser storage is not available. Please enable cookies and local storage.":b.type==="STORAGE_QUOTA_EXCEEDED"?v="Browser storage is full. Please clear some browser data and try again.":g>=2&&(v="Repeated authentication failures. Please refresh the page or contact support."),d(v)}finally{o(!1)}}};return r.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:r.jsxs(Y,{className:"w-full max-w-md",children:[r.jsxs(Q,{className:"space-y-1",children:[r.jsx(_e,{className:"text-2xl font-bold text-center",children:"Sign In"}),r.jsx(we,{className:"text-center",children:"Enter your credentials to access the application"})]}),r.jsx(W,{children:r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[h&&r.jsx(ge,{variant:"destructive",children:r.jsx(ye,{children:h})}),l&&r.jsx(ge,{variant:"destructive",children:r.jsx(ye,{children:l})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ie,{htmlFor:"username",children:"Username"}),r.jsx(De,{id:"username",name:"username",type:"text",placeholder:"Enter your username",value:t.username,onChange:N,className:s.username?"border-destructive":"",disabled:a}),s.username&&r.jsx("p",{className:"text-sm text-destructive",children:s.username})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ie,{htmlFor:"password",children:"Password"}),r.jsx(De,{id:"password",name:"password",type:"password",placeholder:"Enter your password",value:t.password,onChange:N,className:s.password?"border-destructive":"",disabled:a}),s.password&&r.jsx("p",{className:"text-sm text-destructive",children:s.password})]}),r.jsx(k,{type:"submit",className:"w-full",disabled:a,children:a?"Signing In...":"Sign In"}),g>=1&&r.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:r.jsx("strong",{children:"Having trouble signing in?"})}),r.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[r.jsxs("li",{children:["• Default username: ",r.jsx("code",{className:"bg-background px-1 rounded",children:"admin"})]}),r.jsxs("li",{children:["• Default password: ",r.jsx("code",{className:"bg-background px-1 rounded",children:"password123"})]}),r.jsx("li",{children:"• Make sure cookies and local storage are enabled"}),r.jsx("li",{children:"• Try refreshing the page if you see storage errors"})]})]})]})})]})})},lr=({size:t="md",className:e="",text:s="",showText:n=!1,variant:a="primary"})=>{const o={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},l={primary:"text-indigo-600",secondary:"text-gray-600",white:"text-white",muted:"text-gray-400"},d={xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"};return r.jsxs("div",{className:E("flex items-center justify-center",e),children:[r.jsx(ss,{className:E("animate-spin",o[t],l[a])}),(n||s)&&r.jsx("span",{className:E("ml-2",d[t],l[a]),children:s||"Loading..."})]})},dr=({children:t})=>{const{isAuthenticated:e,loading:s}=Le();return s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(lr,{})}):e?t:r.jsx(cr,{})};function m({className:t,...e}){return r.jsx("div",{className:E("animate-pulse rounded-md bg-primary/10",t),...e})}function ur(){return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[r.jsx(m,{className:"h-9 w-48 mb-4 sm:mb-0"}),r.jsx(m,{className:"h-10 w-32"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(m,{className:"h-12 w-full"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((t,e)=>r.jsxs(Y,{children:[r.jsxs(Q,{children:[r.jsx(m,{className:"h-6 w-3/4"}),r.jsx(m,{className:"h-4 w-1/2"})]}),r.jsx(W,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsx(m,{className:"h-4 w-full"}),r.jsx(m,{className:"h-4 w-2/3"}),r.jsx(m,{className:"h-4 w-1/3"})]})})]},e))})]})]})})}function mr(){return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[r.jsx(m,{className:"h-9 w-24 mb-4 sm:mb-0"}),r.jsx(m,{className:"h-10 w-28"})]}),r.jsx("div",{className:"mb-6 p-4 border rounded-lg",children:r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx(m,{className:"h-10 w-32"}),r.jsx(m,{className:"h-10 w-32"}),r.jsx(m,{className:"h-10 w-32"}),r.jsx(m,{className:"h-10 w-48"})]})}),r.jsx("div",{className:"space-y-4",children:Array.from({length:8}).map((t,e)=>r.jsx(Y,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(m,{className:"h-4 w-4 rounded"}),r.jsx(m,{className:"h-5 w-3/4"})]}),r.jsx(m,{className:"h-4 w-1/2"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(m,{className:"h-6 w-16 rounded-full"}),r.jsx(m,{className:"h-6 w-20 rounded-full"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(m,{className:"h-8 w-8 rounded"}),r.jsx(m,{className:"h-8 w-8 rounded"})]})]})})},e))})]})})}function fr(){return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"space-y-4 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(m,{className:"h-7 w-40"}),r.jsx("div",{className:"flex space-x-2",children:Array.from({length:5}).map((t,e)=>r.jsx(m,{className:"h-10 w-10 rounded"},e))})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-lg",children:Array.from({length:4}).map((t,e)=>r.jsx(m,{className:"h-8 w-20 rounded"},e))})})]}),r.jsxs("div",{className:"bg-white rounded-lg border",children:[r.jsx("div",{className:"grid grid-cols-7 border-b",children:Array.from({length:7}).map((t,e)=>r.jsx("div",{className:"p-2 text-center",children:r.jsx(m,{className:"h-4 w-16 mx-auto"})},e))}),r.jsx("div",{className:"grid grid-cols-7",children:Array.from({length:35}).map((t,e)=>r.jsxs("div",{className:"min-h-[120px] p-2 border-r border-b",children:[r.jsx(m,{className:"h-4 w-6 mb-2"}),r.jsxs("div",{className:"space-y-1",children:[Math.random()>.5&&r.jsx(m,{className:"h-6 w-full rounded"}),Math.random()>.7&&r.jsx(m,{className:"h-6 w-3/4 rounded"})]})]},e))})]})]})})}function hr(){return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[r.jsx(m,{className:"h-9 w-48"}),r.jsx(m,{className:"h-10 w-40"})]}),r.jsx("div",{className:"relative mb-6",children:r.jsx(m,{className:"h-10 w-full"})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((t,e)=>r.jsxs(Y,{children:[r.jsxs(Q,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx(m,{className:"h-12 w-12 rounded-full"}),r.jsxs("div",{children:[r.jsx(m,{className:"h-6 w-32 mb-1"}),r.jsx(m,{className:"h-4 w-24"})]})]}),r.jsx(m,{className:"h-8 w-8 rounded"})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[r.jsx(m,{className:"h-6 w-20 rounded-full"}),r.jsx(m,{className:"h-6 w-16 rounded-full"})]})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(m,{className:"h-4 w-16 mb-2"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.jsx(m,{className:"h-5 w-12 rounded-full"}),r.jsx(m,{className:"h-5 w-16 rounded-full"}),r.jsx(m,{className:"h-5 w-14 rounded-full"})]})]}),r.jsx(m,{className:"h-4 w-full"}),r.jsx(m,{className:"h-4 w-3/4"})]})]},e))})]})})}function on({className:t=""}){return r.jsx("div",{className:`flex items-center justify-center p-8 ${t}`,children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Loading component..."})]})})}function cn(){return r.jsxs("div",{className:"space-y-6 p-6 border rounded-lg",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(m,{className:"h-4 w-20"}),r.jsx(m,{className:"h-10 w-full"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(m,{className:"h-4 w-16"}),r.jsx(m,{className:"h-10 w-full"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(m,{className:"h-4 w-24"}),r.jsx(m,{className:"h-10 w-full"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(m,{className:"h-4 w-28"}),r.jsx(m,{className:"h-20 w-full"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(m,{className:"h-10 w-20"}),r.jsx(m,{className:"h-10 w-16"})]})]})}const P=(t,e=3,s=1e3)=>t().catch(n=>{if(e>0)return console.warn(`Failed to load chunk, retrying... (${e} attempts left)`,n),new Promise((a,o)=>{setTimeout(()=>{P(t,e-1,s*1.5).then(a).catch(o)},s)});throw console.error("Failed to load chunk after all retries:",n),n});class pr extends c.Component{constructor(e){super(e),this.state={hasError:!1,error:null,retryCount:0,isRetrying:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Page chunk loading error:",e,s),window.reportError&&window.reportError(e,{context:"page_chunk_loading",page:this.props.pageName,errorInfo:s})}handleRetry=async()=>{this.setState({isRetrying:!0});try{await new Promise(e=>setTimeout(e,1500)),this.setState({hasError:!1,error:null,retryCount:this.state.retryCount+1,isRetrying:!1})}catch{this.setState({isRetrying:!1})}};handleGoBack=()=>{window.history.length>1?window.history.back():window.location.href="/"};render(){if(this.state.hasError){const{retryCount:e,isRetrying:s}=this.state,{pageName:n="page"}=this.props;return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gray-50",children:r.jsx("div",{className:"max-w-lg w-full bg-white rounded-lg shadow-sm border p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:r.jsx(Te,{className:"h-6 w-6 text-red-600"})}),r.jsxs("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Failed to load ",n]}),r.jsx("p",{className:"text-gray-600 mb-6",children:"We're having trouble loading this page. This could be due to a network issue or a temporary problem with the application."}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(k,{onClick:this.handleRetry,disabled:s,className:"w-full",children:s?r.jsxs(r.Fragment,{children:[r.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):r.jsxs(r.Fragment,{children:[r.jsx(F,{className:"mr-2 h-4 w-4"}),"Try Again"]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(k,{onClick:this.handleGoBack,variant:"outline",className:"flex-1",children:[r.jsx(rs,{className:"mr-2 h-4 w-4"}),"Go Back"]}),r.jsxs(k,{onClick:()=>window.location.reload(),variant:"outline",className:"flex-1",children:[r.jsx(F,{className:"mr-2 h-4 w-4"}),"Reload"]})]})]}),e>0&&r.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Retry attempts: ",e]})]})})})}return this.props.children}}class ln extends c.Component{constructor(e){super(e),this.state={hasError:!1,error:null,retryCount:0,isRetrying:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Component chunk loading error:",e,s),window.reportError&&window.reportError(e,{context:"component_chunk_loading",component:this.props.componentName,errorInfo:s})}handleRetry=async()=>{this.setState({isRetrying:!0});try{await new Promise(e=>setTimeout(e,1e3)),this.setState({hasError:!1,error:null,retryCount:this.state.retryCount+1,isRetrying:!1})}catch{this.setState({isRetrying:!1})}};render(){if(this.state.hasError){const{isRetrying:e}=this.state,{componentName:s="component",inline:n=!1}=this.props;return n?r.jsx("div",{className:"p-4 border border-red-200 bg-red-50 rounded-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Te,{className:"h-4 w-4 text-red-600 mr-2"}),r.jsxs("span",{className:"text-sm text-red-800",children:["Failed to load ",s]})]}),r.jsx(k,{onClick:this.handleRetry,disabled:e,size:"sm",variant:"outline",children:e?r.jsx(F,{className:"h-3 w-3 animate-spin"}):r.jsx(F,{className:"h-3 w-3"})})]})}):r.jsx("div",{className:"flex items-center justify-center p-8 border border-red-200 bg-red-50 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Te,{className:"h-8 w-8 text-red-600 mx-auto mb-3"}),r.jsxs("h3",{className:"text-lg font-medium text-red-900 mb-2",children:["Failed to load ",s]}),r.jsx("p",{className:"text-sm text-red-700 mb-4",children:"There was an error loading this component."}),r.jsx(k,{onClick:this.handleRetry,disabled:e,size:"sm",children:e?r.jsxs(r.Fragment,{children:[r.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Retrying..."]}):r.jsxs(r.Fragment,{children:[r.jsx(F,{className:"mr-2 h-4 w-4"}),"Try Again"]})})]})})}return this.props.children}}function gr(){return r.jsx(ur,{})}function yr(){return r.jsx(mr,{})}function xr(){return r.jsx(fr,{})}function _r(){return r.jsx(hr,{})}const Re=c.lazy(()=>P(()=>T(()=>import("./Tasks-B7gPjoQr.js"),__vite__mapDeps([6,1,2,7,8,3,9,10,11,12,13,14,15,16])),3,1e3)),lt=c.lazy(()=>P(()=>T(()=>import("./chunk-Cmp1bz9x.js").then(t=>t.b),__vite__mapDeps([17,1,2,8,3,18,19,20,5,12,11,13,14,4,0])),3,1e3)),dt=c.lazy(()=>P(()=>T(()=>import("./Metrics-D7K8shiI.js"),__vite__mapDeps([21,1,2,22,3,8,23])),3,1e3)),ut=c.lazy(()=>P(()=>T(()=>import("./Stakeholders-CuxkxfGO.js"),__vite__mapDeps([24,1,2,8,3,14,12,11,13])),3,1e3)),mt=c.lazy(()=>P(()=>T(()=>import("./Projects-BWNih0RW.js"),__vite__mapDeps([25,1,2,26,8,3,27,9,11,14,28,29,15,23])),3,1e3)),ft=c.lazy(()=>P(()=>T(()=>import("./Settings-C7Wk1IQW.js"),__vite__mapDeps([30,1,2,31,16,8,3,9])),3,1e3)),ht=c.lazy(()=>P(()=>T(()=>import("./Team-85hr5N9Q.js"),__vite__mapDeps([32,1,2,33,22,3,34,8,18,11,14,9,29,15,20,5])),3,1e3)),pt=c.lazy(()=>P(()=>T(()=>import("./ProjectDetails-DGFp3Vhv.js"),__vite__mapDeps([35,1,2,26,8,3,31,27,14,7,9,10,11,12,13,15])),3,1e3)),gt=c.lazy(()=>P(()=>T(()=>import("./TeamMemberProfile-BaCXQ5_D.js"),__vite__mapDeps([36,1,2,33,0,3,20,5,22,37,14,19,8,13,12,11,31,9,28,16])),3,1e3)),yt=c.lazy(()=>P(()=>T(()=>import("./Peers-w7l_HHDE.js"),__vite__mapDeps([38,1,2,33,34,11,8,3,14,9,29,15,12,13])),3,1e3)),xt=c.lazy(()=>P(()=>T(()=>import("./PeerProfile--ehJ5E_v.js"),__vite__mapDeps([39,1,2,33,0,3,37,14,19,8,28,16])),3,1e3)),He={Tasks:Re,Calendar:lt,Metrics:dt,Stakeholders:ut,Projects:mt,Settings:ft,Team:ht,ProjectDetails:pt,TeamMemberProfile:gt,Peers:yt,PeerProfile:xt};function wr(t){t.endsWith("/")&&(t=t.slice(0,-1));let e=t.split("/").pop();return e.includes("?")&&(e=e.split("?")[0]),Object.keys(He).find(n=>n.toLowerCase()===e.toLowerCase())||Object.keys(He)[0]}function vr(t){const e=t.toLowerCase();return e.includes("tasks")||e==="/"?r.jsx(yr,{}):e.includes("calendar")?r.jsx(xr,{}):e.includes("team")?r.jsx(_r,{}):r.jsx(gr,{})}function Er(){const t=xs(),e=wr(t.pathname),s=vr(t.pathname);return r.jsx(sr,{currentPageName:e,children:r.jsx(pr,{pageName:e,children:r.jsx(c.Suspense,{fallback:s,children:r.jsxs(_s,{children:[r.jsx(C,{path:"/",element:r.jsx(Re,{})}),r.jsx(C,{path:"/Tasks",element:r.jsx(Re,{})}),r.jsx(C,{path:"/Calendar",element:r.jsx(lt,{})}),r.jsx(C,{path:"/Metrics",element:r.jsx(dt,{})}),r.jsx(C,{path:"/Stakeholders",element:r.jsx(ut,{})}),r.jsx(C,{path:"/Projects",element:r.jsx(mt,{})}),r.jsx(C,{path:"/Settings",element:r.jsx(ft,{})}),r.jsx(C,{path:"/Team",element:r.jsx(ht,{})}),r.jsx(C,{path:"/ProjectDetails",element:r.jsx(pt,{})}),r.jsx(C,{path:"/TeamMemberProfile",element:r.jsx(gt,{})}),r.jsx(C,{path:"/Peers",element:r.jsx(yt,{})}),r.jsx(C,{path:"/PeerProfile",element:r.jsx(xt,{})})]})})})})}function br(){return r.jsx(ys,{children:r.jsx(dr,{children:r.jsx(Er,{})})})}const jr=20,Sr=1e6,U={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let je=0;function Nr(){return je=(je+1)%Number.MAX_VALUE,je.toString()}const Se=new Map,Ye=t=>{if(Se.has(t))return;const e=setTimeout(()=>{Se.delete(t),ne({type:U.REMOVE_TOAST,toastId:t})},Sr);Se.set(t,e)},Tr=(t,e)=>{switch(e.type){case U.ADD_TOAST:return{...t,toasts:[e.toast,...t.toasts].slice(0,jr)};case U.UPDATE_TOAST:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case U.DISMISS_TOAST:{const{toastId:s}=e;return s?Ye(s):t.toasts.forEach(n=>{Ye(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===s||s===void 0?{...n,open:!1}:n)}}case U.REMOVE_TOAST:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)}}},fe=[];let he={toasts:[]};function ne(t){he=Tr(he,t),fe.forEach(e=>{e(he)})}function Ar({...t}){const e=Nr(),s=a=>ne({type:U.UPDATE_TOAST,toast:{...a,id:e}}),n=()=>ne({type:U.DISMISS_TOAST,toastId:e});return ne({type:U.ADD_TOAST,toast:{...t,id:e,open:!0,onOpenChange:a=>{a||n()}}}),{id:e,dismiss:n,update:s}}function Or(){const[t,e]=c.useState(he);return c.useEffect(()=>(fe.push(e),()=>{const s=fe.indexOf(e);s>-1&&fe.splice(s,1)}),[t]),{...t,toast:Ar,dismiss:s=>ne({type:U.DISMISS_TOAST,toastId:s})}}var Me="ToastProvider",[Fe,Dr,Ir]=ns("Toast"),[_t,dn]=as("Toast",[Ir]),[Rr,ve]=_t(Me),wt=t=>{const{__scopeToast:e,label:s="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:l}=t,[d,g]=c.useState(null),[u,p]=c.useState(0),h=c.useRef(!1),y=c.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${Me}\`. Expected non-empty \`string\`.`),r.jsx(Fe.Provider,{scope:e,children:r.jsx(Rr,{scope:e,label:s,duration:n,swipeDirection:a,swipeThreshold:o,toastCount:u,viewport:d,onViewportChange:g,onToastAdd:c.useCallback(()=>p(w=>w+1),[]),onToastRemove:c.useCallback(()=>p(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:y,children:l})})};wt.displayName=Me;var vt="ToastViewport",Cr=["F8"],Ce="toast.viewportPause",Pe="toast.viewportResume",Et=c.forwardRef((t,e)=>{const{__scopeToast:s,hotkey:n=Cr,label:a="Notifications ({hotkey})",...o}=t,l=ve(vt,s),d=Dr(s),g=c.useRef(null),u=c.useRef(null),p=c.useRef(null),h=c.useRef(null),y=tt(e,h,l.onViewportChange),w=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=l.toastCount>0;c.useEffect(()=>{const x=b=>{n.length!==0&&n.every(j=>b[j]||b.code===j)&&h.current?.focus()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),c.useEffect(()=>{const x=g.current,b=h.current;if(N&&x&&b){const v=()=>{if(!l.isClosePausedRef.current){const D=new CustomEvent(Ce);b.dispatchEvent(D),l.isClosePausedRef.current=!0}},j=()=>{if(l.isClosePausedRef.current){const D=new CustomEvent(Pe);b.dispatchEvent(D),l.isClosePausedRef.current=!1}},I=D=>{!x.contains(D.relatedTarget)&&j()},R=()=>{x.contains(document.activeElement)||j()};return x.addEventListener("focusin",v),x.addEventListener("focusout",I),x.addEventListener("pointermove",v),x.addEventListener("pointerleave",R),window.addEventListener("blur",v),window.addEventListener("focus",j),()=>{x.removeEventListener("focusin",v),x.removeEventListener("focusout",I),x.removeEventListener("pointermove",v),x.removeEventListener("pointerleave",R),window.removeEventListener("blur",v),window.removeEventListener("focus",j)}}},[N,l.isClosePausedRef]);const S=c.useCallback(({tabbingDirection:x})=>{const v=d().map(j=>{const I=j.ref.current,R=[I,...qr(I)];return x==="forwards"?R:R.reverse()});return(x==="forwards"?v.reverse():v).flat()},[d]);return c.useEffect(()=>{const x=h.current;if(x){const b=v=>{const j=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!j){const R=document.activeElement,D=v.shiftKey;if(v.target===x&&D){u.current?.focus();return}const ee=S({tabbingDirection:D?"backwards":"forwards"}),ie=ee.findIndex(H=>H===R);Ne(ee.slice(ie+1))?v.preventDefault():D?u.current?.focus():p.current?.focus()}};return x.addEventListener("keydown",b),()=>x.removeEventListener("keydown",b)}},[d,S]),r.jsxs(cs,{ref:g,role:"region","aria-label":a.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&r.jsx(ke,{ref:u,onFocusFromOutsideViewport:()=>{const x=S({tabbingDirection:"forwards"});Ne(x)}}),r.jsx(Fe.Slot,{scope:s,children:r.jsx(J.ol,{tabIndex:-1,...o,ref:y})}),N&&r.jsx(ke,{ref:p,onFocusFromOutsideViewport:()=>{const x=S({tabbingDirection:"backwards"});Ne(x)}})]})});Et.displayName=vt;var bt="ToastFocusProxy",ke=c.forwardRef((t,e)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...a}=t,o=ve(bt,s);return r.jsx(st,{"aria-hidden":!0,tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:l=>{const d=l.relatedTarget;!o.viewport?.contains(d)&&n()}})});ke.displayName=bt;var ae="Toast",Pr="toast.swipeStart",kr="toast.swipeMove",Lr="toast.swipeCancel",Mr="toast.swipeEnd",jt=c.forwardRef((t,e)=>{const{forceMount:s,open:n,defaultOpen:a,onOpenChange:o,...l}=t,[d,g]=os({prop:n,defaultProp:a??!0,onChange:o,caller:ae});return r.jsx(is,{present:s||d,children:r.jsx(Br,{open:d,...l,ref:e,onClose:()=>g(!1),onPause:pe(t.onPause),onResume:pe(t.onResume),onSwipeStart:L(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:L(t.onSwipeMove,u=>{const{x:p,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:L(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:L(t.onSwipeEnd,u=>{const{x:p,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),g(!1)})})})});jt.displayName=ae;var[Fr,Ur]=_t(ae,{onClose(){}}),Br=c.forwardRef((t,e)=>{const{__scopeToast:s,type:n="foreground",duration:a,open:o,onClose:l,onEscapeKeyDown:d,onPause:g,onResume:u,onSwipeStart:p,onSwipeMove:h,onSwipeCancel:y,onSwipeEnd:w,...N}=t,S=ve(ae,s),[x,b]=c.useState(null),v=tt(e,_=>b(_)),j=c.useRef(null),I=c.useRef(null),R=a||S.duration,D=c.useRef(0),Z=c.useRef(R),oe=c.useRef(0),{onToastAdd:ee,onToastRemove:ie}=S,H=pe(()=>{x?.contains(document.activeElement)&&S.viewport?.focus(),l()}),ce=c.useCallback(_=>{!_||_===1/0||(window.clearTimeout(oe.current),D.current=new Date().getTime(),oe.current=window.setTimeout(H,_))},[H]);c.useEffect(()=>{const _=S.viewport;if(_){const M=()=>{ce(Z.current),u?.()},B=()=>{const te=new Date().getTime()-D.current;Z.current=Z.current-te,window.clearTimeout(oe.current),g?.()};return _.addEventListener(Ce,B),_.addEventListener(Pe,M),()=>{_.removeEventListener(Ce,B),_.removeEventListener(Pe,M)}}},[S.viewport,R,g,u,ce]),c.useEffect(()=>{o&&!S.isClosePausedRef.current&&ce(R)},[o,R,S.isClosePausedRef,ce]),c.useEffect(()=>(ee(),()=>ie()),[ee,ie]);const Be=c.useMemo(()=>x?It(x):null,[x]);return S.viewport?r.jsxs(r.Fragment,{children:[Be&&r.jsx(Vr,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:Be}),r.jsx(Fr,{scope:s,onClose:H,children:ws.createPortal(r.jsx(Fe.ItemSlot,{scope:s,children:r.jsx(ls,{asChild:!0,onEscapeKeyDown:L(d,()=>{S.isFocusedToastEscapeKeyDownRef.current||H(),S.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(J.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":S.swipeDirection,...N,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:L(t.onKeyDown,_=>{_.key==="Escape"&&(d?.(_.nativeEvent),_.nativeEvent.defaultPrevented||(S.isFocusedToastEscapeKeyDownRef.current=!0,H()))}),onPointerDown:L(t.onPointerDown,_=>{_.button===0&&(j.current={x:_.clientX,y:_.clientY})}),onPointerMove:L(t.onPointerMove,_=>{if(!j.current)return;const M=_.clientX-j.current.x,B=_.clientY-j.current.y,te=!!I.current,se=["left","right"].includes(S.swipeDirection),le=["left","up"].includes(S.swipeDirection)?Math.min:Math.max,Gt=se?le(0,M):0,zt=se?0:le(0,B),Ee=_.pointerType==="touch"?10:2,de={x:Gt,y:zt},Ve={originalEvent:_,delta:de};te?(I.current=de,me(kr,h,Ve,{discrete:!1})):We(de,S.swipeDirection,Ee)?(I.current=de,me(Pr,p,Ve,{discrete:!1}),_.target.setPointerCapture(_.pointerId)):(Math.abs(M)>Ee||Math.abs(B)>Ee)&&(j.current=null)}),onPointerUp:L(t.onPointerUp,_=>{const M=I.current,B=_.target;if(B.hasPointerCapture(_.pointerId)&&B.releasePointerCapture(_.pointerId),I.current=null,j.current=null,M){const te=_.currentTarget,se={originalEvent:_,delta:M};We(M,S.swipeDirection,S.swipeThreshold)?me(Mr,w,se,{discrete:!0}):me(Lr,y,se,{discrete:!0}),te.addEventListener("click",le=>le.preventDefault(),{once:!0})}})})})}),S.viewport)})]}):null}),Vr=t=>{const{__scopeToast:e,children:s,...n}=t,a=ve(ae,e),[o,l]=c.useState(!1),[d,g]=c.useState(!1);return zr(()=>l(!0)),c.useEffect(()=>{const u=window.setTimeout(()=>g(!0),1e3);return()=>window.clearTimeout(u)},[]),d?null:r.jsx(ds,{asChild:!0,children:r.jsx(st,{...n,children:o&&r.jsxs(r.Fragment,{children:[a.label," ",s]})})})},$r="ToastTitle",St=c.forwardRef((t,e)=>{const{__scopeToast:s,...n}=t;return r.jsx(J.div,{...n,ref:e})});St.displayName=$r;var Gr="ToastDescription",Nt=c.forwardRef((t,e)=>{const{__scopeToast:s,...n}=t;return r.jsx(J.div,{...n,ref:e})});Nt.displayName=Gr;var Tt="ToastAction",At=c.forwardRef((t,e)=>{const{altText:s,...n}=t;return s.trim()?r.jsx(Dt,{altText:s,asChild:!0,children:r.jsx(Ue,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Tt}\`. Expected non-empty \`string\`.`),null)});At.displayName=Tt;var Ot="ToastClose",Ue=c.forwardRef((t,e)=>{const{__scopeToast:s,...n}=t,a=Ur(Ot,s);return r.jsx(Dt,{asChild:!0,children:r.jsx(J.button,{type:"button",...n,ref:e,onClick:L(t.onClick,a.onClose)})})});Ue.displayName=Ot;var Dt=c.forwardRef((t,e)=>{const{__scopeToast:s,altText:n,...a}=t;return r.jsx(J.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:e})});function It(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Kr(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const l=n.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...It(n))}}),e}function me(t,e,s,{discrete:n}){const a=s.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});e&&a.addEventListener(t,e,{once:!0}),n?ms(a,o):a.dispatchEvent(o)}var We=(t,e,s=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),o=n>a;return e==="left"||e==="right"?o&&n>s:!o&&a>s};function zr(t=()=>{}){const e=pe(t);us(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[e])}function Kr(t){return t.nodeType===t.ELEMENT_NODE}function qr(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function Ne(t){const e=document.activeElement;return t.some(s=>s===e?!0:(s.focus(),document.activeElement!==e))}var Hr=wt,Rt=Et,Ct=jt,Pt=St,kt=Nt,Lt=At,Mt=Ue;const Yr=Hr,Ft=c.forwardRef(({className:t,...e},s)=>r.jsx(Rt,{ref:s,className:E("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Ft.displayName=Rt.displayName;const Wr=xe("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ut=c.forwardRef(({className:t,variant:e,...s},n)=>r.jsx(Ct,{ref:n,className:E(Wr({variant:e}),t),...s}));Ut.displayName=Ct.displayName;const Xr=c.forwardRef(({className:t,...e},s)=>r.jsx(Lt,{ref:s,className:E("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Xr.displayName=Lt.displayName;const Bt=c.forwardRef(({className:t,...e},s)=>r.jsx(Mt,{ref:s,className:E("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:r.jsx(Ze,{className:"h-4 w-4"})}));Bt.displayName=Mt.displayName;const Vt=c.forwardRef(({className:t,...e},s)=>r.jsx(Pt,{ref:s,className:E("text-sm font-semibold",t),...e}));Vt.displayName=Pt.displayName;const $t=c.forwardRef(({className:t,...e},s)=>r.jsx(kt,{ref:s,className:E("text-sm opacity-90",t),...e}));$t.displayName=kt.displayName;function Jr(){const{toasts:t}=Or();return r.jsxs(Yr,{children:[t.map(function({id:e,title:s,description:n,action:a,...o}){return r.jsxs(Ut,{...o,children:[r.jsxs("div",{className:"grid gap-1",children:[s&&r.jsx(Vt,{children:s}),n&&r.jsx($t,{children:n})]}),a,r.jsx(Bt,{})]},e)}),r.jsx(Ft,{})]})}class Qr extends nt.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0,errorId:Date.now().toString()}}componentDidCatch(e,s){console.error("Error caught by boundary:",e,s),this.setState({error:e,errorInfo:s}),this.props.onError&&this.props.onError(e,s)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})};handleGoHome=()=>{this.handleRetry(),window.location.href="/"};render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs(Y,{className:"w-full max-w-md",children:[r.jsxs(Q,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 p-3 bg-red-100 rounded-full w-fit",children:r.jsx(rt,{className:"h-8 w-8 text-red-600"})}),r.jsx(_e,{className:"text-xl text-gray-900",children:"Something went wrong"}),r.jsx(we,{children:this.props.fallbackMessage||"We're sorry, but something unexpected happened. Please try again."})]}),r.jsxs(W,{className:"space-y-4",children:[!1,this.state.errorId&&r.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Error ID: ",this.state.errorId]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(k,{onClick:this.handleRetry,variant:"outline",className:"flex-1",children:[r.jsx(F,{className:"h-4 w-4 mr-2"}),"Try Again"]}),r.jsxs(k,{onClick:this.handleGoHome,className:"flex-1",children:[r.jsx(fs,{className:"h-4 w-4 mr-2"}),"Go Home"]})]})]})]})}):this.props.children}}class Zr{static MIGRATION_VERSION="1.1.0";static MIGRATION_KEY="pe_manager_migration_version";static async runMigrations(){localStorage.getItem(this.MIGRATION_KEY)!==this.MIGRATION_VERSION&&(console.log("Running data migrations..."),await this.migrateTasksSchema(),await this.migrateProjectsSchema(),await this.migrateStakeholdersSchema(),await this.migrateTeamMembersSchema(),await this.migrateOneOnOnesSchema(),await this.migrateTaskAttributesSchema(),await this.migrateEmployeeGoalsSchema(),localStorage.setItem(this.MIGRATION_KEY,this.MIGRATION_VERSION),console.log("Data migration completed successfully"))}static async migrateTasksSchema(){const e=this.getData("tasks");if(!e.length)return;const s=e.map(n=>({...n,due_date:n.due_date||null,assignee:n.assignee||null,estimated_hours:n.estimated_hours||null,actual_hours:n.actual_hours||null,completion_date:n.completion_date||(n.status==="done"?n.updated_date:null)}));this.setData("tasks",s),console.log(`Migrated ${s.length} tasks`)}static async migrateProjectsSchema(){const e=this.getData("projects");if(!e.length)return;const s=e.map(n=>({...n,deadline:n.deadline||null,budget:n.budget||null,cost:n.cost||null,priority_level:n.priority_level||"medium",progress_percentage:n.progress_percentage||0}));this.setData("projects",s),console.log(`Migrated ${s.length} projects`)}static async migrateStakeholdersSchema(){const e=this.getData("stakeholders");if(!e.length)return;const s=e.map(n=>{const a={...n,phone:n.phone||null,contact_info:n.contact_info||null,company:n.company||n.organization||null};return delete a.organization,a});this.setData("stakeholders",s),console.log(`Migrated ${s.length} stakeholders`)}static async migrateTeamMembersSchema(){const e=this.getData("team_members");if(!e.length)return;const s=e.map(n=>({...n,phone:n.phone||null,company:n.company||null,last_activity:n.last_activity||null}));this.setData("team_members",s),console.log(`Migrated ${s.length} team members`)}static async migrateOneOnOnesSchema(){const e=this.getData("one_on_ones");if(!e.length)return;const s=e.map(n=>{const a={...n,updated_date:n.updated_date||n.created_date,status:n.status||"scheduled",location:n.location||null,team_member_id:n.team_member_id||n.participant_id||null};return delete a.participant_id,a});this.setData("one_on_ones",s),console.log(`Migrated ${s.length} one-on-ones`)}static async migrateTaskAttributesSchema(){const e=this.getData("task_attributes");if(!e.length)return;const s=e.map(n=>({...n,updated_date:n.updated_date||n.created_date}));this.setData("task_attributes",s),console.log(`Migrated ${s.length} task attributes`)}static async migrateEmployeeGoalsSchema(){const e=this.getData("employee_goals");if(!e.length)return;const s=e.map(n=>({...n,id:n.id||this.generateId(),employeeId:n.employeeId||n.team_member_id||null,title:n.title||"Untitled Goal",developmentNeed:n.developmentNeed||n.development_need||"",developmentActivity:n.developmentActivity||n.development_activity||"",developmentGoalDescription:n.developmentGoalDescription||n.development_goal_description||n.description||"",status:n.status||"active",createdAt:n.createdAt||n.created_date||new Date().toISOString(),updatedAt:n.updatedAt||n.updated_date||new Date().toISOString(),importSource:n.importSource||n.import_source||null}));this.setData("employee_goals",s),console.log(`Migrated ${s.length} employee goals`)}static generateId(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"_"+Date.now().toString(36)+Math.random().toString(36).substr(2,9)}static getData(e){try{const s=localStorage.getItem(e);return s?JSON.parse(s):[]}catch(s){return console.error(`Error reading data from localStorage key "${e}":`,s),[]}}static setData(e,s){try{localStorage.setItem(e,JSON.stringify(s))}catch(n){throw console.error(`Error saving data to localStorage key "${e}":`,n),n}}static async calculateLastActivity(){const e=this.getData("team_members"),s=this.getData("tasks"),n=this.getData("meetings"),a=e.map(o=>{let l=null;const d=s.filter(p=>p.metadata?.meeting?.participants?.includes(o.name)),g=n.filter(p=>p.participants?.includes(o.id)||p.participants?.includes(o.name)),u=[...d.map(p=>({date:p.updated_date||p.created_date,type:"task"})),...g.map(p=>({date:p.updated_date||p.created_date,type:"meeting"}))];return u.length>0&&(l=u.sort((h,y)=>new Date(y.date)-new Date(h.date))[0].date),{...o,last_activity:l}});this.setData("team_members",a),console.log("Updated last_activity for all team members")}}function en(){return c.useEffect(()=>{Zr.runMigrations().catch(t=>{console.error("Data migration failed:",t)})},[]),r.jsxs(Qr,{fallbackMessage:"The application encountered an error. Please refresh the page or try again later.",children:[r.jsx(br,{}),r.jsx(Jr,{})]})}class tn extends nt.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorType:"unknown"}}static getDerivedStateFromError(e){let s="unknown";return e.message?.includes("localStorage")?s="storage":e.message?.includes("authentication")||e.message?.includes("auth")?s="authentication":(e.message?.includes("network")||e.message?.includes("fetch"))&&(s="network"),{hasError:!0,errorType:s}}componentDidCatch(e,s){console.error("Authentication error caught by boundary:",e,s),this.setState({error:e,errorInfo:s}),this.props.onAuthError&&this.props.onAuthError(e,s,this.state.errorType)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorType:"unknown"})};handleForceLogout=()=>{try{localStorage.removeItem("auth_token")}catch{}this.handleRetry(),window.location.reload()};getErrorMessage(){switch(this.state.errorType){case"storage":return{title:"Storage Error",message:"Unable to access browser storage. Please check your browser settings and try again.",suggestion:"Make sure cookies and local storage are enabled in your browser."};case"authentication":return{title:"Authentication Error",message:"There was a problem with the authentication system.",suggestion:"Please try logging in again or contact support if the problem persists."};case"network":return{title:"Connection Error",message:"Unable to connect to the authentication service.",suggestion:"Please check your internet connection and try again."};default:return{title:"Authentication System Error",message:"An unexpected error occurred in the authentication system.",suggestion:"Please try again or contact support if the problem persists."}}}render(){if(this.state.hasError){const e=this.getErrorMessage();return r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:r.jsxs(Y,{className:"w-full max-w-md",children:[r.jsxs(Q,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 p-3 bg-destructive/10 rounded-full w-fit",children:r.jsx(rt,{className:"h-8 w-8 text-destructive"})}),r.jsx(_e,{className:"text-xl",children:e.title}),r.jsx(we,{children:e.message})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsx(ge,{children:r.jsx(ye,{children:e.suggestion})}),!1,r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(k,{onClick:this.handleRetry,variant:"outline",className:"flex-1",children:[r.jsx(F,{className:"h-4 w-4 mr-2"}),"Try Again"]}),r.jsxs(k,{onClick:this.handleForceLogout,className:"flex-1",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Reset Login"]})]})]})]})})}return this.props.children}}Ss.createRoot(document.getElementById("root")).render(r.jsx(tn,{children:r.jsx(tr,{children:r.jsx(en,{})})}));export{ge as A,k as B,ln as C,Xs as D,Ws as E,cn as F,Ar as G,O as H,De as I,an as J,Ie as L,Ys as O,Fs as P,Us as S,Ms as T,T as _,ir as a,ye as b,E as c,zs as d,Bs as e,on as f,Y as g,W as h,Q as i,_e as j,we as k,rr as l,V as m,q as n,Vs as o,Ae as p,er as q,P as r,Oe as s,lr as t,Or as u,$ as v,z as w,G as x,nr as y,$s as z};

import{j as e,bO as $e,bP as ue,aK as pe,aw as Ve,a3 as je,U as ge,bQ as ee,bA as fe,p as be,L as R,y as We,n as Ye,bw as Ne,X as ye,a1 as te,w as Je,N as Qe,ae as Ke,aW as Xe}from"./chunk-WPKCbDK8.js";import{a as r}from"./chunk-BKwDNIOR.js";import{s as we,x as ae,M as qe,a as ve,c as Se,L as G,I as Ce,B as w,a2 as H,C as U,j as P}from"./index-CnhOL4vI.js";import{B as X}from"./chunk-DIYexMSd.js";import{C as Z}from"./chunk-233bsYkc.js";import{T as Ge,a as Ze,b as le,c as T,d as es,e as L}from"./chunk-qi7vZLzc.js";import{S as Y,a as J,b as Q,c as K,d as D}from"./chunk-BOs1hDSJ.js";import{E as ss}from"./chunk-PTkjzjTs.js";import{D as ke,a as _e,b as Ae,c as Fe,e as De,d as ts}from"./chunk-D8_EjMoV.js";import{b as Ee}from"./chunk-DGs6foQ1.js";import{A as re,b as ce,c as ne,d as ie,e as de,f as oe,g as xe,h as he}from"./chunk-uqH6maok.js";import"./chunk-BwuEqr1N.js";function as({item:t,open:N,onOpenChange:u}){if(!t)return null;const b=typeof t.captured_data=="string"?JSON.parse(t.captured_data):t.captured_data,c=o=>{if(!o)return"Unknown";try{return Ee(new Date(o),"MMM d, yyyy 'at' h:mm a")}catch{return o}},g=o=>({pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800";return e.jsx(ke,{open:N,onOpenChange:u,children:e.jsxs(_e,{className:"sm:max-w-2xl max-h-[80vh]",children:[e.jsxs(Ae,{children:[e.jsxs(Fe,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5"}),"Captured Item Details"]}),e.jsx(De,{children:"Review the captured data before accepting or rejecting."})]}),e.jsx(we,{className:"max-h-[60vh] pr-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsx(X,{className:g(t.status),children:t.status}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{children:t.source_url?new URL(t.source_url).hostname:"Unknown source"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{children:c(t.captured_at)})]})]}),t.source_identifier&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Source Identifier"}),e.jsx("p",{className:"text-sm",children:t.source_identifier})]}),t.rule_name&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Capture Rule"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:t.rule_name})]})]}),t.source_url&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Source URL"}),e.jsx("a",{href:t.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline break-all",children:t.source_url})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Captured Data"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:Object.entries(b||{}).length>0?e.jsx("dl",{className:"space-y-3",children:Object.entries(b).map(([o,i])=>e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:o.replace(/_/g," ")}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 break-words",children:typeof i=="object"?JSON.stringify(i,null,2):String(i)})]},o))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No data captured"})})]}),t.processed_at&&e.jsxs("div",{className:"text-xs text-gray-400 border-t pt-4",children:["Processed: ",c(t.processed_at)]})]})})]})})}const S={project:{label:"Project",icon:ee,nameField:"name"},team_member:{label:"Team Member",icon:ge,nameField:"name"},service:{label:"Service",icon:je,nameField:"name"}};function ls(t,N,u,b=3){if(!t||!N?.length)return[];const c=t.toLowerCase().trim(),g=c.split(/\s+/);return N.map(i=>{const n=(i[u]||"").toLowerCase();let h=0;return n===c?h=100:n.includes(c)?h=80:n.startsWith(c)?h=70:g.every(d=>n.includes(d))?h=50+g.length*5:h=g.filter(y=>n.includes(y)).length*10,{entity:i,score:h}}).filter(i=>i.score>0).sort((i,n)=>n.score-i.score).slice(0,b).map(i=>i.entity)}function rs({open:t,onOpenChange:N,inboxItem:u,onAccept:b}){const[c,g]=r.useState("project"),[o,i]=r.useState([]),[n,h]=r.useState(null),[d,y]=r.useState(!0),[j,m]=r.useState(!1),[C,$]=r.useState(!1),[V,k]=r.useState(null),[_,W]=r.useState("");r.useEffect(()=>{t&&c&&q(c)},[t,c]),r.useEffect(()=>{t&&(h(null),W(""),k(null),y(!0))},[t]);const q=async l=>{m(!0),k(null);try{let p=[];switch(l){case"project":p=await ae.list();break;case"team_member":p=await qe.list();break;case"service":p=await ae.list();break;default:p=[]}i(p||[])}catch(p){console.error("Failed to load entities:",p),k("Failed to load entities"),i([])}finally{m(!1)}},A=r.useMemo(()=>{if(!u?.captured_data)return"";const l=typeof u.captured_data=="string"?JSON.parse(u.captured_data):u.captured_data;return l.name||l.title||l.summary||u.source_identifier||""},[u]),M=r.useMemo(()=>{const l=S[c];return!l||!A?[]:ls(A,o,l.nameField)},[A,o,c]),z=r.useMemo(()=>{if(!_.trim())return o;const l=S[c],p=_.toLowerCase();return o.filter(O=>(O[l.nameField]||"").toLowerCase().includes(p))},[o,_,c]),I=async()=>{$(!0),k(null);try{await b({inboxItemId:u.id,target_entity_type:c,target_entity_id:n?.id,create_mapping:d&&n?.id}),N(!1)}catch(l){console.error("Failed to accept item:",l),k(l.message||"Failed to accept item")}finally{$(!1)}},E=()=>{C||N(!1)},F=S[c]?.icon||ee;return e.jsx(ke,{open:t,onOpenChange:E,children:e.jsxs(_e,{className:"sm:max-w-lg",children:[e.jsxs(Ae,{children:[e.jsxs(Fe,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),"Map to Entity"]}),e.jsx(De,{children:"Choose how to map this captured item to a P&E Manager entity."})]}),V&&e.jsx(ve,{variant:"destructive",children:e.jsx(Se,{children:V})}),e.jsxs("div",{className:"space-y-4 py-4",children:[A&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Captured: "}),e.jsx("span",{className:"font-medium",children:A})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"Entity Type"}),e.jsxs(Y,{value:c,onValueChange:g,children:[e.jsx(J,{children:e.jsx(Q,{placeholder:"Select entity type"})}),e.jsx(K,{children:Object.entries(S).map(([l,p])=>{const O=p.icon;return e.jsx(D,{value:l,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),p.label]})},l)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"Select Entity"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ce,{placeholder:`Search ${S[c]?.label||"entities"}...`,value:_,onChange:l=>W(l.target.value),className:"pl-9"})]}),j?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(R,{className:"h-6 w-6 animate-spin text-gray-400"})}):e.jsx(we,{className:"h-[200px] border rounded-lg",children:e.jsxs("div",{className:"p-2 space-y-1",children:[M.length>0&&!_&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-500",children:[e.jsx(We,{className:"h-3 w-3"}),"Suggested matches"]}),M.map(l=>e.jsxs("button",{onClick:()=>h(l),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ${n?.id===l.id?"bg-blue-100 text-blue-900":"bg-blue-50 hover:bg-blue-100 text-blue-800"}`,children:[e.jsx(F,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:l[S[c].nameField]}),e.jsx(X,{variant:"secondary",className:"ml-auto text-xs",children:"Suggested"})]},`suggested-${l.id}`)),e.jsx("div",{className:"border-t my-2"})]}),z.length===0?e.jsxs("p",{className:"text-center text-gray-500 text-sm py-4",children:["No ",S[c]?.label||"entities"," found"]}):z.filter(l=>!M.find(p=>p.id===l.id)||_).map(l=>e.jsxs("button",{onClick:()=>h(l),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ${n?.id===l.id?"bg-primary/10 text-primary":"hover:bg-gray-100"}`,children:[e.jsx(F,{className:"h-4 w-4 flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"truncate",children:l[S[c].nameField]})]},l.id))]})})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded-lg text-sm",children:[e.jsx(F,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-green-800",children:["Selected: ",e.jsx("strong",{children:n[S[c].nameField]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx(Z,{id:"create-mapping",checked:d,onCheckedChange:y,disabled:!n}),e.jsx(G,{htmlFor:"create-mapping",className:`text-sm ${n?"":"text-gray-400"}`,children:"Remember this mapping for future captures"})]})]}),e.jsxs(ts,{className:"gap-2 sm:gap-0",children:[e.jsx(w,{variant:"outline",onClick:E,disabled:C,children:"Cancel"}),e.jsx(w,{onClick:I,disabled:C,children:C?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"}),"Accepting..."]}):"Accept"})]})]})})}const me=[{value:"project",label:"Project",icon:ee},{value:"team_member",label:"Team Member",icon:ge},{value:"service",label:"Service",icon:je}];function cs({selectedCount:t,onBulkAccept:N,onBulkReject:u,onClearSelection:b,loading:c=!1}){const[g,o]=r.useState(!1),[i,n]=r.useState(!1),[h,d]=r.useState("project"),y=async()=>{n(!1),await N(h)},j=async()=>{o(!1),await u()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:[e.jsxs(X,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[t," selected"]}),e.jsxs(Y,{value:h,onValueChange:d,children:[e.jsx(J,{className:"w-[150px] h-8 text-sm",children:e.jsx(Q,{placeholder:"Entity type"})}),e.jsx(K,{children:me.map(m=>{const C=m.icon;return e.jsx(D,{value:m.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),m.label]})},m.value)})})]}),e.jsxs(w,{size:"sm",variant:"default",onClick:()=>n(!0),disabled:c,className:"bg-green-600 hover:bg-green-700",children:[c?e.jsx(R,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Accept All"]}),e.jsxs(w,{size:"sm",variant:"destructive",onClick:()=>o(!0),disabled:c,children:[c?e.jsx(R,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"Reject All"]}),e.jsxs(w,{size:"sm",variant:"ghost",onClick:b,disabled:c,className:"ml-auto",children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"Clear"]})]}),e.jsx(re,{open:i,onOpenChange:n,children:e.jsxs(ce,{children:[e.jsxs(ne,{children:[e.jsxs(ie,{children:["Accept ",t," items?"]}),e.jsxs(de,{children:["This will accept ",t," selected item",t!==1?"s":""," and mark them as "," ",e.jsx("strong",{children:me.find(m=>m.value===h)?.label})," type.",e.jsx("br",{}),e.jsx("br",{}),"No entity mappings will be created. Use individual accept for specific mappings."]})]}),e.jsxs(oe,{children:[e.jsx(xe,{children:"Cancel"}),e.jsxs(he,{onClick:y,className:"bg-green-600 hover:bg-green-700",children:["Accept ",t," Items"]})]})]})}),e.jsx(re,{open:g,onOpenChange:o,children:e.jsxs(ce,{children:[e.jsxs(ne,{children:[e.jsxs(ie,{children:["Reject ",t," items?"]}),e.jsxs(de,{children:["This will reject ",t," selected item",t!==1?"s":"",". Rejected items will be marked as rejected but not deleted.",e.jsx("br",{}),e.jsx("br",{}),"This action can be reviewed later but the items will no longer appear in pending."]})]}),e.jsxs(oe,{children:[e.jsx(xe,{children:"Cancel"}),e.jsxs(he,{onClick:j,className:"bg-red-600 hover:bg-red-700",children:["Reject ",t," Items"]})]})]})})]})}function bs(){const[t,N]=r.useState(!0),[u,b]=r.useState(null),[c,g]=r.useState(!1),[o,i]=r.useState(null),[n,h]=r.useState([]),[d,y]=r.useState({status:"pending",search:"",source:null}),[j,m]=r.useState(new Set),[C,$]=r.useState(null),[V,k]=r.useState(!1),[_,W]=r.useState(null),[q,A]=r.useState(!1);r.useEffect(()=>{M()},[]),r.useEffect(()=>{m(new Set)},[d]);const M=async()=>{N(!0),i(null);try{const s=await H.list();h(s||[])}catch(s){console.error("Failed to load capture inbox:",s),i(s.message||"Failed to load capture inbox")}finally{N(!1)}},z=r.useMemo(()=>{const s=new Set;return n.forEach(a=>{if(a.source_url)try{s.add(new URL(a.source_url).hostname)}catch{}}),Array.from(s).sort()},[n]),I=r.useMemo(()=>n.filter(s=>{if(d.status&&d.status!=="all"&&s.status!==d.status)return!1;if(d.search){const a=d.search.toLowerCase(),x=s.source_identifier?.toLowerCase().includes(a),v=s.source_url?.toLowerCase().includes(a),f=s.rule_name?.toLowerCase().includes(a);if(!x&&!v&&!f)return!1}if(d.source)try{if(new URL(s.source_url).hostname!==d.source)return!1}catch{return!1}return!0}),[n,d]),E=r.useMemo(()=>I.filter(s=>s.status==="pending"),[I]),F=r.useMemo(()=>{const s=n.length,a=n.filter(f=>f.status==="pending").length,x=n.filter(f=>f.status==="accepted").length,v=n.filter(f=>f.status==="rejected").length;return{total:s,pending:a,accepted:x,rejected:v}},[n]),l=E.length>0&&E.every(s=>j.has(s.id)),p=j.size>0&&!l,O=s=>{m(s?new Set(E.map(a=>a.id)):new Set)},Te=(s,a)=>{const x=new Set(j);a?x.add(s):x.delete(s),m(x)},Le=s=>{if(!s)return"Unknown";try{return Ee(new Date(s),"MMM d, h:mm a")}catch{return s}},Re=s=>{if(!s)return"Unknown";try{return new URL(s).hostname}catch{return s}},Me=s=>({pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",se=d.status!=="pending"||d.search!==""||d.source!==null,Ie=()=>{y({status:"pending",search:"",source:null})},Be=s=>{W(s),A(!0)},Ue=async({inboxItemId:s,target_entity_type:a,target_entity_id:x,create_mapping:v})=>{b(s);try{await H.accept(s,{target_entity_type:a,target_entity_id:x,create_mapping:v}),h(f=>f.map(B=>B.id===s?{...B,status:"accepted"}:B)),m(f=>{const B=new Set(f);return B.delete(s),B})}catch(f){throw console.error("Failed to accept item:",f),f}finally{b(null)}},Pe=async s=>{b(s.id);try{await H.reject(s.id,{}),h(a=>a.map(x=>x.id===s.id?{...x,status:"rejected"}:x)),m(a=>{const x=new Set(a);return x.delete(s.id),x})}catch(a){console.error("Failed to reject item:",a),i("Failed to reject item")}finally{b(null)}},ze=s=>{$(s),k(!0)},Oe=async s=>{g(!0),i(null);try{const a=Array.from(j);await H.bulkAccept(a,{target_entity_type:s}),h(x=>x.map(v=>j.has(v.id)?{...v,status:"accepted"}:v)),m(new Set)}catch(a){console.error("Failed to bulk accept:",a),i("Failed to accept selected items")}finally{g(!1)}},He=async()=>{g(!0),i(null);try{const s=Array.from(j);await H.bulkReject(s),h(a=>a.map(x=>j.has(x.id)?{...x,status:"rejected"}:x)),m(new Set)}catch(s){console.error("Failed to bulk reject:",s),i("Failed to reject selected items")}finally{g(!1)}};return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(te,{className:"h-8 w-8"}),"Capture Inbox"]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Review and process captured data from websites"})]}),e.jsxs(w,{variant:"outline",onClick:M,disabled:t,children:[t?e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),o&&e.jsxs(ve,{variant:"destructive",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx(Se,{children:o})]}),t?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(R,{className:"h-8 w-8 animate-spin text-gray-400"}),e.jsx("span",{className:"ml-2 text-gray-500",children:"Loading capture inbox..."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(U,{children:e.jsxs(P,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold",children:F.total}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Items"})]})}),e.jsx(U,{children:e.jsxs(P,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:F.pending}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pending"})]})}),e.jsx(U,{children:e.jsxs(P,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:F.accepted}),e.jsx("p",{className:"text-sm text-gray-500",children:"Accepted"})]})}),e.jsx(U,{children:e.jsxs(P,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:F.rejected}),e.jsx("p",{className:"text-sm text-gray-500",children:"Rejected"})]})})]}),e.jsx(U,{children:e.jsx(P,{className:"py-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ce,{placeholder:"Search by identifier, URL, or rule...",value:d.search,onChange:s=>y(a=>({...a,search:s.target.value})),className:"pl-9"})]}),e.jsxs(Y,{value:d.status||"all",onValueChange:s=>y(a=>({...a,status:s==="all"?null:s})),children:[e.jsx(J,{className:"w-[140px]",children:e.jsx(Q,{placeholder:"All Status"})}),e.jsxs(K,{children:[e.jsx(D,{value:"all",children:"All Status"}),e.jsx(D,{value:"pending",children:"Pending"}),e.jsx(D,{value:"accepted",children:"Accepted"}),e.jsx(D,{value:"rejected",children:"Rejected"})]})]}),z.length>0&&e.jsxs(Y,{value:d.source||"all",onValueChange:s=>y(a=>({...a,source:s==="all"?null:s})),children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(Q,{placeholder:"All Sources"})}),e.jsxs(K,{children:[e.jsx(D,{value:"all",children:"All Sources"}),z.map(s=>e.jsx(D,{value:s,children:s},s))]})]}),se&&e.jsxs(w,{variant:"ghost",size:"sm",onClick:Ie,children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"Clear filters"]})]})})}),j.size>0&&e.jsx(cs,{selectedCount:j.size,onBulkAccept:Oe,onBulkReject:He,onClearSelection:()=>m(new Set),loading:c}),e.jsx(U,{children:e.jsx(P,{className:"p-0",children:I.length===0?e.jsx(ss,{icon:te,title:"No Items Found",description:se?"No items match your current filters.":"Your capture inbox is empty. Captured data will appear here.",size:"md"}):e.jsxs(Ge,{children:[e.jsx(Ze,{children:e.jsxs(le,{children:[e.jsx(T,{className:"w-12",children:e.jsx(Z,{checked:l,onCheckedChange:O,disabled:E.length===0,className:p?"data-[state=checked]:bg-blue-400":""})}),e.jsx(T,{className:"w-[180px]",children:"Source"}),e.jsx(T,{children:"Identifier"}),e.jsx(T,{children:"Rule"}),e.jsx(T,{children:"Captured"}),e.jsx(T,{children:"Status"}),e.jsx(T,{className:"text-right",children:"Actions"})]})}),e.jsx(es,{children:I.map(s=>e.jsxs(le,{className:j.has(s.id)?"bg-blue-50":"",children:[e.jsx(L,{children:e.jsx(Z,{checked:j.has(s.id),onCheckedChange:a=>Te(s.id,a),disabled:s.status!=="pending"})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ue,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"truncate max-w-[140px]",title:s.source_url,children:Re(s.source_url)})]})}),e.jsx(L,{children:e.jsx("span",{className:"text-sm font-medium truncate max-w-[200px] block",children:s.source_identifier||"—"})}),e.jsx(L,{children:e.jsx("span",{className:"text-sm text-gray-600",children:s.rule_name||"—"})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(pe,{className:"h-3 w-3"}),Le(s.captured_at)]})}),e.jsx(L,{children:e.jsx(X,{className:Me(s.status),children:s.status})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>ze(s),title:"Preview",children:e.jsx(Ke,{className:"h-4 w-4"})}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>Be(s),disabled:u===s.id,title:"Accept with mapping",className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:u===s.id?e.jsx(R,{className:"h-4 w-4 animate-spin"}):e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>Pe(s),disabled:u===s.id,title:"Reject",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Ne,{className:"h-4 w-4"})})]}),s.source_url&&e.jsx(w,{variant:"ghost",size:"sm",asChild:!0,title:"Open source",children:e.jsx("a",{href:s.source_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(Xe,{className:"h-4 w-4"})})})]})})]},s.id))})]})})})]}),e.jsx(as,{item:C,open:V,onOpenChange:k}),e.jsx(rs,{open:q,onOpenChange:A,inboxItem:_,onAccept:Ue})]})})}export{bs as default};

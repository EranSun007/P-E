import{j as e,T as X,aj as Ae,ak as Ee,h as ye,_ as Le,p as V,a4 as ts,k as xe,al as ns,am as Ne,ae as ve,S as pe,W as be,an as Ce,N as ls,ao as ke,ap as Se,a2 as De}from"./chunk-CDfVSsCp.js";import{a as r}from"./chunk-pjYta8vt.js";import{C as Z,g as ee,h as se,i as le,f as ae,a as R,b as je,c as M,L as o,I as u,j as is,B as i,m as J,n as $e,o as B,p as Te}from"./index-CjGPc2b_.js";import{T as os,a as cs,b as ds,c as ms}from"./chunk-DfspdIU3.js";import{T as Ie,a as Ue,b as ie,c as g,d as Re,e as w}from"./chunk-CbeUZ2zF.js";import{B as G,D as H,e as Y,f as q,g as Q,i as W,S as hs,a as us,b as ps,c as xs,d as Pe,h as K}from"./chunk-2Vqr1Avx.js";import{D as Me,a as Oe,b as Be,d as oe}from"./chunk-BrWpdzOD.js";import{R as js,a as Fe}from"./chunk-CIxmFPsL.js";import"./chunk-DGzW4aIb.js";function gs(){const[c,F]=r.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[L,C]=r.useState(null),[A,d]=r.useState(null),[p,f]=r.useState(!1),k=(l,m)=>{F(S=>({...S,[l]:m}))},_=async l=>{if(l.preventDefault(),C(null),d(null),c.newPassword!==c.confirmPassword){C("New passwords do not match.");return}if(c.newPassword.length<6){C("New password must be at least 6 characters long.");return}f(!0);try{const m=await J.changePassword(c.currentPassword,c.newPassword);if(!m.success){C(m.error||"Failed to change password.");return}d("Password changed successfully!"),F({currentPassword:"",newPassword:"",confirmPassword:""})}catch(m){C(m.message||"Failed to change password. Please try again.")}finally{f(!1)}};return e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Change Password"}),e.jsx(le,{children:"Update your password here. Your new password must be at least 6 characters long."})]}),e.jsxs("form",{onSubmit:_,children:[e.jsxs(ae,{className:"space-y-4",children:[L&&e.jsxs(R,{variant:"destructive",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(je,{children:"Error"}),e.jsx(M,{children:L})]}),A&&e.jsxs(R,{children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx(je,{children:"Success"}),e.jsx(M,{children:A})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(u,{id:"currentPassword",type:"password",value:c.currentPassword,onChange:l=>k("currentPassword",l.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"newPassword",children:"New Password"}),e.jsx(u,{id:"newPassword",type:"password",value:c.newPassword,onChange:l=>k("newPassword",l.target.value),required:!0,minLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(u,{id:"confirmPassword",type:"password",value:c.confirmPassword,onChange:l=>k("confirmPassword",l.target.value),required:!0})]})]}),e.jsx(is,{children:e.jsxs(i,{type:"submit",disabled:p,children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),p?"Saving...":"Save Changes"]})})]})]})}const ne="https://pe-manager-backend.cfapps.eu01-canary.hana.ondemand.com/api";function ws(){const{user:c}=$e(),[F,L]=r.useState([]),[C,A]=r.useState(!0),[d,p]=r.useState(null),[f,k]=r.useState(null),[_,l]=r.useState(!1),[m,S]=r.useState(!1),[$,I]=r.useState(null),[y,N]=r.useState({username:"",password:"",email:"",name:"",role:"user"}),[D,O]=r.useState(""),[T,P]=r.useState(!1),E=c?.role==="admin";r.useEffect(()=>{E&&x()},[E]);const x=async()=>{A(!0),p(null);try{const a=J.getToken(),t=await fetch(`${ne}/users`,{headers:{Authorization:`Bearer ${a}`}});if(!t.ok)throw new Error("Failed to load users");const j=await t.json();L(j)}catch(a){p(a.message)}finally{A(!1)}},z=async()=>{P(!0),p(null);try{const a=J.getToken(),t=await fetch(`${ne}/users`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(y)}),j=await t.json();if(!t.ok)throw new Error(j.message||"Failed to create user");k(`User "${y.username}" created successfully!`),l(!1),N({username:"",password:"",email:"",name:"",role:"user"}),x()}catch(a){p(a.message)}finally{P(!1)}},ce=async a=>{try{const t=J.getToken(),j=await fetch(`${ne}/users/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({is_active:!a.is_active})});if(!j.ok){const h=await j.json();throw new Error(h.message||"Failed to update user")}k(`User "${a.username}" ${a.is_active?"deactivated":"activated"} successfully!`),x()}catch(t){p(t.message)}},U=async()=>{if(!(!$||!D)){P(!0),p(null);try{const a=J.getToken(),t=await fetch(`${ne}/users/${$.id}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({newPassword:D})});if(!t.ok){const j=await t.json();throw new Error(j.message||"Failed to reset password")}k(`Password for "${$.username}" reset successfully!`),S(!1),I(null),O("")}catch(a){p(a.message)}finally{P(!1)}}},re=a=>{I(a),O(""),S(!0)};return E?e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5"}),"User Management"]}),e.jsx(le,{children:"Create and manage user accounts for your team"})]}),e.jsxs(i,{onClick:()=>l(!0),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Add User"]})]})}),e.jsxs(ae,{className:"space-y-4",children:[d&&e.jsxs(R,{variant:"destructive",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(M,{children:d})]}),f&&e.jsxs(R,{children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx(M,{children:f})]}),C?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(V,{className:"h-8 w-8 animate-spin text-gray-400"})}):F.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found. Create your first user!"}):e.jsxs(Ie,{children:[e.jsx(Ue,{children:e.jsxs(ie,{children:[e.jsx(g,{children:"Username"}),e.jsx(g,{children:"Name"}),e.jsx(g,{children:"Email"}),e.jsx(g,{children:"Role"}),e.jsx(g,{children:"Status"}),e.jsx(g,{children:"Last Login"}),e.jsx(g,{className:"w-[80px]",children:"Actions"})]})}),e.jsx(Re,{children:F.map(a=>e.jsxs(ie,{children:[e.jsx(w,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.role==="admin"?e.jsx(ts,{className:"h-4 w-4 text-amber-500"}):e.jsx(xe,{className:"h-4 w-4 text-gray-400"}),a.username,a.id===c?.id&&e.jsx(G,{variant:"outline",className:"ml-1",children:"You"})]})}),e.jsx(w,{children:a.name||"-"}),e.jsx(w,{children:a.email||"-"}),e.jsx(w,{children:e.jsx(G,{variant:a.role==="admin"?"default":"secondary",children:a.role})}),e.jsx(w,{children:e.jsx(G,{variant:a.is_active?"outline":"destructive",children:a.is_active?"Active":"Inactive"})}),e.jsx(w,{children:a.last_login?new Date(a.last_login).toLocaleDateString():"Never"}),e.jsx(w,{children:e.jsxs(Me,{children:[e.jsx(Oe,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(Be,{align:"end",children:[e.jsx(oe,{onClick:()=>re(a),children:"Reset Password"}),a.id!==c?.id&&e.jsx(oe,{onClick:()=>ce(a),className:a.is_active?"text-red-600":"text-green-600",children:a.is_active?"Deactivate":"Activate"})]})]})})]},a.id))})]})]}),e.jsx(H,{open:_,onOpenChange:l,children:e.jsxs(Y,{children:[e.jsxs(q,{children:[e.jsx(Q,{children:"Create New User"}),e.jsx(W,{children:"Add a new user to the system. They will be able to login with the credentials you provide."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"username",children:"Username *"}),e.jsx(u,{id:"username",value:y.username,onChange:a=>N(t=>({...t,username:a.target.value})),placeholder:"Enter username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password",children:"Password *"}),e.jsx(u,{id:"password",type:"password",value:y.password,onChange:a=>N(t=>({...t,password:a.target.value})),placeholder:"Enter password (min 6 characters)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Full Name"}),e.jsx(u,{id:"name",value:y.name,onChange:a=>N(t=>({...t,name:a.target.value})),placeholder:"Enter full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(u,{id:"email",type:"email",value:y.email,onChange:a=>N(t=>({...t,email:a.target.value})),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"role",children:"Role"}),e.jsxs(hs,{value:y.role,onValueChange:a=>N(t=>({...t,role:a})),children:[e.jsx(us,{children:e.jsx(ps,{placeholder:"Select role"})}),e.jsxs(xs,{children:[e.jsx(Pe,{value:"user",children:"User"}),e.jsx(Pe,{value:"admin",children:"Admin"})]})]})]})]}),e.jsxs(K,{children:[e.jsx(i,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(i,{onClick:z,disabled:T||!y.username||!y.password,children:T?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create User"})]})]})}),e.jsx(H,{open:m,onOpenChange:S,children:e.jsxs(Y,{children:[e.jsxs(q,{children:[e.jsx(Q,{children:"Reset Password"}),e.jsxs(W,{children:["Set a new password for ",$?.username,". They will need to use this password to login."]})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"newPassword",children:"New Password"}),e.jsx(u,{id:"newPassword",type:"password",value:D,onChange:a=>O(a.target.value),placeholder:"Enter new password (min 6 characters)"})]})}),e.jsxs(K,{children:[e.jsx(i,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsx(i,{onClick:U,disabled:T||!D||D.length<6,children:T?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 mr-2 animate-spin"}),"Resetting..."]}):"Reset Password"})]})]})})]}):e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5"}),"User Management"]})}),e.jsx(ae,{children:e.jsxs(R,{children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(M,{children:"You must be an administrator to manage users."})]})})]})}function Ts(){const{user:c}=$e(),[F,L]=r.useState([]),[C,A]=r.useState(!0),[d,p]=r.useState("priorities"),[f,k]=r.useState(""),[_,l]=r.useState(!1),[m,S]=r.useState(null),[$,I]=r.useState(null),[y,N]=r.useState(!1),[D,O]=r.useState(null),[T,P]=r.useState(!1),[E,x]=r.useState(null),[z,ce]=r.useState("merge"),[U,re]=r.useState(null),[a,t]=r.useState(!1),j=r.useRef(null),[h,de]=r.useState({type:"priority",name:"",description:"",color:"",order:0,default:!1}),me={priorities:"priority",taskTypes:"taskType",tags:"tag",statuses:"status"};r.useEffect(()=>{d!=="account"&&he()},[d]);const he=async()=>{A(!0),I(null);try{const s=await B.list();if(s.length===0){await _e();const n=await B.list();L(n)}else L(s)}catch(s){console.error("Failed to load attributes:",s),I("Failed to load task attributes. Please try again.")}finally{A(!1)}},_e=async()=>{const s=[{type:"priority",name:"low",description:"Low priority tasks",color:"blue",order:1,default:!0},{type:"priority",name:"medium",description:"Medium priority tasks",color:"yellow",order:2,default:!0},{type:"priority",name:"high",description:"High priority tasks",color:"orange",order:3,default:!0},{type:"priority",name:"urgent",description:"Urgent priority tasks",color:"red",order:4,default:!0},{type:"taskType",name:"generic",description:"Generic tasks",color:"gray",order:1,default:!0},{type:"taskType",name:"meeting",description:"Meeting tasks",color:"blue",order:2,default:!0},{type:"taskType",name:"metric",description:"Metric tracking tasks",color:"green",order:3,default:!0},{type:"taskType",name:"action",description:"Action items",color:"purple",order:4,default:!0},{type:"status",name:"backlog",description:"Backlog tasks",color:"gray",order:1,default:!0},{type:"status",name:"todo",description:"To-do tasks",color:"blue",order:2,default:!0},{type:"status",name:"in_progress",description:"In-progress tasks",color:"yellow",order:3,default:!0},{type:"status",name:"blocked",description:"Blocked tasks",color:"red",order:4,default:!0},{type:"status",name:"done",description:"Completed tasks",color:"green",order:5,default:!0},{type:"tag",name:"design",description:"Design-related tasks",color:"purple",order:1,default:!0},{type:"tag",name:"development",description:"Development tasks",color:"blue",order:2,default:!0},{type:"tag",name:"research",description:"Research tasks",color:"green",order:3,default:!0},{type:"tag",name:"planning",description:"Planning tasks",color:"yellow",order:4,default:!0}];await B.bulkCreate(s)},ze=s=>({blue:"bg-blue-100 text-blue-800 border-blue-200",green:"bg-green-100 text-green-800 border-green-200",red:"bg-red-100 text-red-800 border-red-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",purple:"bg-purple-100 text-purple-800 border-purple-200",orange:"bg-orange-100 text-orange-800 border-orange-200",pink:"bg-pink-100 text-pink-800 border-pink-200",indigo:"bg-indigo-100 text-indigo-800 border-indigo-200",gray:"bg-gray-100 text-gray-800 border-gray-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",Je=s=>{switch(s){case"priority":return e.jsx(Ne,{className:"h-4 w-4"});case"taskType":return e.jsx(ve,{className:"h-4 w-4"});case"tag":return e.jsx(be,{className:"h-4 w-4"});case"status":return e.jsx(pe,{className:"h-4 w-4"});default:return null}},Ve=s=>{p(s)},ge=F.filter(s=>s.type!==me[d]?!1:f?s.name.toLowerCase().includes(f.toLowerCase())||s.description&&s.description.toLowerCase().includes(f.toLowerCase()):!0).sort((s,n)=>s.order-n.order),Ge=()=>{de({type:me[d],name:"",description:"",color:"blue",order:He(),default:!1}),S(null),l(!0)},He=()=>{const s=F.filter(b=>b.type===me[d]);return s.length===0?1:Math.max(...s.map(b=>b.order||0))+1},Ye=s=>{de({type:s.type,name:s.name||"",description:s.description||"",color:s.color||"blue",order:s.order||0,default:s.default||!1}),S(s),l(!0)},qe=s=>{O(s),N(!0)},Qe=async()=>{if(D)try{await B.delete(D.id),await he(),N(!1),O(null)}catch(s){console.error("Failed to delete attribute:",s),I("Failed to delete attribute. Please try again.")}},te=(s,n)=>{de(b=>({...b,[s]:n}))},We=async()=>{try{m?await B.update(m.id,h):await B.create(h),l(!1),await he()}catch(s){console.error("Failed to save attribute:",s),I("Failed to save attribute. Please try again.")}},Ke=c?.role==="admin",we=[{id:"priorities",label:"Priorities",icon:Ne},{id:"taskTypes",label:"Task Types",icon:ve},{id:"statuses",label:"Statuses",icon:pe},{id:"tags",label:"Tags",icon:be},{id:"account",label:"Account",icon:xe},...Ke?[{id:"users",label:"Users",icon:xe}]:[],{id:"data",label:"Data",icon:Ce}],Xe=async()=>{P(!0),x(null);try{const s=await Te.export(),n=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),b=URL.createObjectURL(n),v=document.createElement("a"),ue=new Date().toISOString().split("T")[0];v.href=b,v.download=`pe-backup-${ue}.json`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(b),x({type:"success",text:"Backup downloaded successfully!"})}catch(s){console.error("Export failed:",s),x({type:"error",text:"Failed to export data. Please try again."})}finally{P(!1)}},Ze=s=>{const n=s.target.files[0];n&&(re(n),x(null))},es=()=>{if(!U){x({type:"error",text:"Please select a backup file first."});return}z==="replace"?t(!0):fe()},fe=async()=>{P(!0),x(null),t(!1);try{const s=await U.text(),n=JSON.parse(s),b=await Te.import(n,z),{summary:v}=b,ue=Object.values(v).reduce((as,rs)=>as+rs,0);x({type:"success",text:`Import completed! ${ue} records imported (${v.tasks} tasks, ${v.projects} projects, ${v.teamMembers} team members, ${v.stakeholders} stakeholders).`}),re(null),j.current&&(j.current.value="")}catch(s){console.error("Import failed:",s),x({type:"error",text:`Import failed: ${s.message}`})}finally{P(!1)}},ss=[{id:"blue",name:"Blue"},{id:"green",name:"Green"},{id:"red",name:"Red"},{id:"yellow",name:"Yellow"},{id:"purple",name:"Purple"},{id:"orange",name:"Orange"},{id:"pink",name:"Pink"},{id:"indigo",name:"Indigo"},{id:"gray",name:"Gray"}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Settings"}),e.jsxs(os,{defaultValue:"priorities",value:d,onValueChange:Ve,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[e.jsx(cs,{className:"bg-gray-100",children:we.map(s=>e.jsxs(ds,{value:s.id,className:"flex items-center gap-2",children:[e.jsx(s.icon,{className:"h-4 w-4"}),e.jsx("span",{children:s.label})]},s.id))}),d!=="account"&&e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(u,{placeholder:`Search ${d}...`,value:f,onChange:s=>k(s.target.value),className:"pl-9"})]}),e.jsxs(i,{onClick:Ge,children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Add New"]})]})]}),$&&e.jsxs(R,{variant:"destructive",className:"mb-6",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(je,{children:"Error"}),e.jsx(M,{children:$})]}),we.map(s=>e.jsx(ms,{value:s.id,className:"space-y-4",children:s.id==="data"?e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),"Data Management"]}),e.jsx(le,{children:"Export and import your data for backup and recovery"})]}),e.jsxs(ae,{className:"space-y-6",children:[E&&e.jsxs(R,{variant:E.type==="error"?"destructive":"default",children:[E.type==="error"?e.jsx(X,{className:"h-4 w-4"}):e.jsx(pe,{className:"h-4 w-4"}),e.jsx(M,{children:E.text})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"Export Backup"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Download all your data as a JSON file. This includes tasks, projects, stakeholders, team members, meetings, and more."}),e.jsx(i,{onClick:Xe,disabled:T,children:T?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Download Backup"]})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Import Backup"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Restore data from a previously exported backup file."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"backup-file",children:"Select Backup File"}),e.jsx(u,{id:"backup-file",type:"file",accept:".json",ref:j,onChange:Ze,className:"cursor-pointer"}),U&&e.jsxs("p",{className:"text-sm text-green-600",children:["Selected: ",U.name]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Import Mode"}),e.jsxs(js,{value:z,onValueChange:ce,className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{value:"merge",id:"merge"}),e.jsxs(o,{htmlFor:"merge",className:"font-normal cursor-pointer",children:[e.jsx("span",{className:"font-medium",children:"Merge"})," - Add imported records to existing data"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{value:"replace",id:"replace"}),e.jsxs(o,{htmlFor:"replace",className:"font-normal cursor-pointer",children:[e.jsx("span",{className:"font-medium",children:"Replace"})," - Clear all existing data and import fresh"]})]})]})]}),e.jsx(i,{onClick:es,disabled:T||!U,children:T?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Import Data"]})})]})]})]}):s.id==="users"?e.jsx(ws,{}):s.id!=="account"?e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(s.icon,{className:"h-5 w-5"}),s.label]}),e.jsxs(le,{children:["Manage ",s.label.toLowerCase()," for your tasks"]})]}),e.jsx(ae,{children:C?e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-indigo-600 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading attributes..."})]}):ge.length===0?e.jsx("div",{className:"text-center p-8 border border-dashed rounded-lg",children:e.jsx("p",{className:"text-gray-500",children:f?`No ${s.label.toLowerCase()} found matching your search`:`No ${s.label.toLowerCase()} found. Add your first one!`})}):e.jsxs(Ie,{children:[e.jsx(Ue,{children:e.jsxs(ie,{children:[e.jsx(g,{children:"Name"}),e.jsx(g,{children:"Description"}),e.jsx(g,{children:"Color"}),e.jsx(g,{children:"Order"}),e.jsx(g,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(Re,{children:ge.map(n=>e.jsxs(ie,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(G,{variant:"outline",className:ze(n.color),children:[Je(n.type),e.jsx("span",{className:"ml-1",children:n.name})]}),n.default&&e.jsx(G,{variant:"outline",className:"text-xs",children:"Default"})]})}),e.jsx(w,{children:n.description||"-"}),e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${n.color?`bg-${n.color}-500`:"bg-gray-300"}`}),e.jsx("span",{className:"capitalize",children:n.color||"None"})]})}),e.jsx(w,{children:n.order}),e.jsx(w,{children:e.jsxs(Me,{children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})]})}),e.jsxs(Be,{align:"end",children:[e.jsx(oe,{onClick:()=>Ye(n),children:"Edit"}),e.jsx(oe,{className:"text-red-600",onClick:()=>qe(n),children:"Delete"})]})]})})]},n.id))})]})})]}):e.jsx(gs,{})},s.id))]})]}),e.jsx(H,{open:_,onOpenChange:l,children:e.jsxs(Y,{className:"sm:max-w-md",children:[e.jsxs(q,{children:[e.jsx(Q,{children:m?`Edit ${h.type}`:`Create new ${h.type}`}),e.jsx(W,{children:m?`Edit the details for this ${h.type}`:`Add a new ${h.type} for your tasks`})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Name"}),e.jsx(u,{id:"name",value:h.name,onChange:s=>te("name",s.target.value),placeholder:`Enter ${h.type} name`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(u,{id:"description",value:h.description,onChange:s=>te("description",s.target.value),placeholder:"Optional description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Color"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ss.map(s=>e.jsxs(i,{type:"button",variant:h.color===s.id?"default":"outline",className:"justify-start",onClick:()=>te("color",s.id),children:[e.jsx("div",{className:`w-4 h-4 rounded-full bg-${s.id}-500 mr-2`}),s.name]},s.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"order",children:"Display Order"}),e.jsx(u,{id:"order",type:"number",min:"1",value:h.order,onChange:s=>te("order",parseInt(s.target.value))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Lower numbers appear first in lists"})]})]}),e.jsxs(K,{children:[e.jsx(i,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsxs(i,{onClick:We,children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),m?"Update":"Create"]})]})]})}),e.jsx(H,{open:y,onOpenChange:N,children:e.jsxs(Y,{className:"sm:max-w-md",children:[e.jsxs(q,{children:[e.jsx(Q,{children:"Confirm Deletion"}),e.jsxs(W,{children:["Are you sure you want to delete ",D?.name,"? This action cannot be undone."]})]}),e.jsxs(K,{className:"mt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsxs(i,{variant:"destructive",onClick:Qe,children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})}),e.jsx(H,{open:a,onOpenChange:t,children:e.jsxs(Y,{className:"sm:max-w-md",children:[e.jsxs(q,{children:[e.jsx(Q,{children:"Confirm Replace Import"}),e.jsx(W,{children:'You selected "Replace" mode. This will DELETE ALL your existing data before importing the backup. This action cannot be undone. Are you sure you want to proceed?'})]}),e.jsxs(K,{className:"mt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsxs(i,{variant:"destructive",onClick:fe,children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Delete All & Import"]})]})]})})]})}export{Ts as default};

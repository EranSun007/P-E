import{j as e,ay as K,az as J,ax as Q,D as ge,aK as je,bc as fe,T as ve,E as re,ar as le,an as _e,aA as be,aB as Ne}from"./chunk-BlD_ekKQ.js";import{a as x}from"./chunk-BKwDNIOR.js";import{e as z,l as H,L as B,q as De,B as M,C as V,j as W,u as we,a as Ce,c as Se,h as Me,i as ke}from"./index-BPpXP9wP.js";import{g as ne}from"./chunk-NOAukTlf.js";import{g as se,l as Ae,f as he,a as ae,b as pe,c as de,d as Te,e as Fe}from"./chunk-CZG1sOuO.js";import{D as Ee,a as $e,b as Oe,c as Ie,e as Re,d as Pe,B as X}from"./chunk-CmitwiBI.js";import{S as O,a as I,b as R,c as P,d as b}from"./chunk-DBni0BOz.js";import{b as f,p as j,r as Le,j as ie,l as ce}from"./chunk-P_BNsj9B.js";import{D as Be,a as Ve,b as We,d as oe}from"./chunk-D-Q6W0fT.js";import{A as Ye,a as qe,b as Ue,c as ze,d as He,e as Ge,f as Ke,g as Je,h as Qe}from"./chunk-DVqya-Gr.js";const me=[{value:"devops",label:"DevOps",duration:14,color:"indigo"},{value:"dev_on_duty",label:"Dev On Duty",duration:7,color:"teal"},{value:"replacement",label:"Replacement (SM Cover)",duration:null,color:"amber"}],Xe=["Metering","Reporting"],xe=({open:s,onOpenChange:D,onSubmit:k,initialData:h=null,preselectedTeam:A=null,currentCycleId:u=null,isLoading:c=!1})=>{const[l,m]=x.useState({team:"",team_member_id:"",duty_type:"",sprint_id:"",week:"",start_date:"",end_date:"",notes:""}),[Y,p]=x.useState([]),[T,F]=x.useState(!1),[n,d]=x.useState({}),g=x.useMemo(()=>{const t=u||se().id;return Ae(t,3)},[u]);x.useEffect(()=>{if(s){if(h){const t=h.start_date?new Date(h.start_date):null,i=t?he(t):"";m({team:h.team||"",team_member_id:h.team_member_id||"",duty_type:h.duty_type||"",sprint_id:i||"",week:"",start_date:h.start_date?h.start_date.split("T")[0]:"",end_date:h.end_date?h.end_date.split("T")[0]:"",notes:h.notes||""})}else{const t=g.length>0?g[0].id:"";m({team:A||"",team_member_id:"",duty_type:"",sprint_id:t,week:"1",start_date:"",end_date:"",notes:""})}d({})}},[s,h,A,g]),x.useEffect(()=>{l.team&&s?w(l.team):p([])},[l.team,s]);const w=async t=>{F(!0);try{const i=await z.getTeamMembers(t);p(i)}catch(i){H.error("Failed to load team members",{error:String(i),team:t}),p([])}finally{F(!1)}},N=(t,i,y)=>{if(!t)return{start_date:"",end_date:""};const a=pe(t);if(!a)return{start_date:"",end_date:""};if(i==="devops")return{start_date:f(a.startDate,"yyyy-MM-dd"),end_date:f(a.endDate,"yyyy-MM-dd")};if(i==="dev_on_duty"&&y){const r=a.weeks.find(o=>o.week===parseInt(y));if(r)return{start_date:f(r.startDate,"yyyy-MM-dd"),end_date:f(r.endDate,"yyyy-MM-dd")}}return{start_date:f(a.startDate,"yyyy-MM-dd"),end_date:f(a.endDate,"yyyy-MM-dd")}},C=t=>{m(i=>{const y=N(i.sprint_id,t,i.week||"1");return{...i,duty_type:t,week:t==="dev_on_duty"?i.week||"1":"",...y}})},q=t=>{m(i=>{const y=N(t,i.duty_type,i.week);return{...i,sprint_id:t,...y}})},Z=t=>{m(i=>{const y=N(i.sprint_id,i.duty_type,t);return{...i,week:t,...y}})},S=(t,i)=>{m(y=>({...y,[t]:i})),n[t]&&d(y=>({...y,[t]:""}))},U=()=>{const t={};return l.team||(t.team="Team is required"),l.team_member_id||(t.team_member_id="Team member is required"),l.duty_type||(t.duty_type="Duty type is required"),l.sprint_id||(t.sprint_id="Sprint is required"),l.duty_type==="dev_on_duty"&&!l.week&&(t.week="Week is required for Dev On Duty"),(!l.start_date||!l.end_date)&&(t.sprint_id="Please select a valid sprint"),d(t),Object.keys(t).length===0},G=async t=>{if(t.preventDefault(),!U())return;const i={team:l.team,team_member_id:l.team_member_id,duty_type:l.duty_type,start_date:l.start_date,end_date:l.end_date,notes:l.notes.trim()||null};await k(i)},v=!!h,ee=me.find(t=>t.value===l.duty_type);return e.jsx(Ee,{open:s,onOpenChange:D,children:e.jsxs($e,{className:"sm:max-w-lg",children:[e.jsxs(Oe,{children:[e.jsx(Ie,{children:v?"Edit Duty Assignment":"Add Duty Assignment"}),e.jsx(Re,{children:v?"Update the duty assignment details.":"Schedule a duty rotation assignment for a team member."})]}),e.jsxs("form",{onSubmit:G,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"team",children:"Team *"}),e.jsxs(O,{value:l.team,onValueChange:t=>{S("team",t),S("team_member_id","")},disabled:c,children:[e.jsx(I,{className:n.team?"border-destructive":"",children:e.jsx(R,{placeholder:"Select team"})}),e.jsx(P,{children:Xe.map(t=>e.jsx(b,{value:t,children:t},t))})]}),n.team&&e.jsx("p",{className:"text-sm text-destructive",children:n.team})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"team_member",children:"Team Member *"}),e.jsxs(O,{value:l.team_member_id,onValueChange:t=>S("team_member_id",t),disabled:c||!l.team||T,children:[e.jsx(I,{className:n.team_member_id?"border-destructive":"",children:e.jsx(R,{placeholder:T?"Loading...":l.team?Y.length===0?"No members in this team":"Select team member":"Select a team first"})}),e.jsx(P,{children:Y.map(t=>e.jsxs(b,{value:t.id,children:[t.name," ",t.role?`(${t.role})`:""]},t.id))})]}),n.team_member_id&&e.jsx("p",{className:"text-sm text-destructive",children:n.team_member_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"duty_type",children:"Duty Type *"}),e.jsxs(O,{value:l.duty_type,onValueChange:C,disabled:c,children:[e.jsx(I,{className:n.duty_type?"border-destructive":"",children:e.jsx(R,{placeholder:"Select duty type"})}),e.jsx(P,{children:me.map(t=>e.jsx(b,{value:t.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full bg-${t.color}-500`}),t.label,t.duration&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",t.duration===7?"1 week":"2 weeks",")"]})]})},t.value))})]}),n.duty_type&&e.jsx("p",{className:"text-sm text-destructive",children:n.duty_type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"sprint",children:"Sprint *"}),e.jsxs(O,{value:l.sprint_id,onValueChange:q,disabled:c,children:[e.jsx(I,{className:n.sprint_id?"border-destructive":"",children:e.jsx(R,{placeholder:"Select sprint"})}),e.jsx(P,{children:g.map(t=>e.jsx(b,{value:t.id,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:t.id}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",ae(t.startDate,t.endDate),")"]})]})},t.id))})]}),n.sprint_id&&e.jsx("p",{className:"text-sm text-destructive",children:n.sprint_id})]}),l.duty_type==="dev_on_duty"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"week",children:"Week *"}),e.jsxs(O,{value:l.week,onValueChange:Z,disabled:c,children:[e.jsx(I,{className:n.week?"border-destructive":"",children:e.jsx(R,{placeholder:"Select week"})}),e.jsxs(P,{children:[e.jsx(b,{value:"1",children:"Week 1 (First week of sprint)"}),e.jsx(b,{value:"2",children:"Week 2 (Second week of sprint)"})]})]}),n.week&&e.jsx("p",{className:"text-sm text-destructive",children:n.week})]}),l.start_date&&l.end_date&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-md border",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Scheduled:"})," ",f(new Date(l.start_date),"MMM d, yyyy")," -"," ",f(new Date(l.end_date),"MMM d, yyyy"),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",ee?.duration===7?"1 week":"2 weeks",")"]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"notes",children:"Notes (optional)"}),e.jsx(De,{id:"notes",placeholder:"Any additional notes about this duty assignment...",value:l.notes,onChange:t=>S("notes",t.target.value),disabled:c,rows:2})]})]}),e.jsxs(Pe,{children:[e.jsx(M,{variant:"outline",onClick:()=>D(!1),disabled:c,children:"Cancel"}),e.jsx(M,{onClick:G,disabled:c,children:c?"Saving...":v?"Update Duty":"Create Duty"})]})]})})},ue={devops:{label:"DevOps",icon:Q,bgClass:"bg-indigo-100",textClass:"text-indigo-800",borderClass:"border-indigo-200",badgeClass:"bg-indigo-100 text-indigo-800"},dev_on_duty:{label:"Dev On Duty",icon:J,bgClass:"bg-teal-100",textClass:"text-teal-800",borderClass:"border-teal-200",badgeClass:"bg-teal-100 text-teal-800"},replacement:{label:"Replacement",icon:K,bgClass:"bg-amber-100",textClass:"text-amber-800",borderClass:"border-amber-200",badgeClass:"bg-amber-100 text-amber-800"}},te=({duty:s,onEdit:D,onDelete:k,compact:h=!1,isLoading:A=!1})=>{const u=ue[s.duty_type]||ue.devops,c=u.icon,m=(()=>{if(s.start_date&&s.end_date){const n=j(s.start_date),d=j(s.end_date);return Le(d,n)+1}return null})(),p=(()=>{if(!s.start_date)return null;const n=j(s.start_date),d=he(n);if(!d)return null;if(m===7&&d){const g=pe(d);if(g){const w=n.getTime(),N=g.weeks[0].startDate.getTime(),C=g.weeks[1].startDate.getTime(),q=Math.abs(w-N)<Math.abs(w-C)?1:2;return`${d} W${q}`}}return d})(),T=()=>{if(!s.start_date)return"No date";const n=f(j(s.start_date),"MMM d");if(!s.end_date)return n;const d=f(j(s.end_date),"MMM d"),g=j(s.start_date).getFullYear(),w=new Date().getFullYear();return g!==w?`${n} - ${f(j(s.end_date),"MMM d, yyyy")}`:`${n} - ${d}`},F=()=>{const n=new Date;n.setHours(0,0,0,0);const d=j(s.start_date),g=j(s.end_date);return n>=d&&n<=g};return h?e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-md ${u.bgClass} ${u.borderClass} border`,children:[e.jsx(c,{className:`h-4 w-4 ${u.textClass}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${u.textClass} truncate`,children:s.team_member_name}),e.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[p&&e.jsx("span",{className:"font-semibold text-gray-700",children:p}),e.jsx("span",{className:"text-gray-400",children:"·"}),T()]})]}),F()&&e.jsx(X,{variant:"outline",className:"text-[10px] px-1 py-0 bg-green-100 text-green-700 border-green-200",children:"Active"})]}):e.jsx(V,{className:`${u.borderClass} border-l-4`,children:e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${u.bgClass}`,children:e.jsx(c,{className:`h-5 w-5 ${u.textClass}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium",children:s.team_member_name}),e.jsx(X,{variant:"outline",className:u.badgeClass,children:u.label}),F()&&e.jsx(X,{variant:"outline",className:"bg-green-100 text-green-700 border-green-200",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ge,{className:"h-3 w-3"}),p&&e.jsx("span",{className:"font-semibold text-gray-700",children:p}),p&&e.jsx("span",{className:"text-gray-400",children:"·"}),T()]}),m&&e.jsxs("span",{className:"text-xs",children:["(",m===7?"1 week":m===14?"2 weeks":`${m} days`,")"]})]}),s.notes&&e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s.notes})]})]}),(D||k)&&e.jsxs(Be,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",disabled:A,children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(We,{align:"end",children:[D&&e.jsxs(oe,{onClick:()=>D(s),children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"Edit"]}),k&&e.jsxs(Ye,{children:[e.jsx(qe,{asChild:!0,children:e.jsxs(oe,{onSelect:n=>n.preventDefault(),className:"text-red-600",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Delete"]})}),e.jsxs(Ue,{children:[e.jsxs(ze,{children:[e.jsx(He,{children:"Delete Duty Assignment?"}),e.jsxs(Ge,{children:["This will permanently delete the ",u.label," duty assignment for ",s.team_member_name,". This action cannot be undone."]})]}),e.jsxs(Ke,{children:[e.jsx(Je,{children:"Cancel"}),e.jsx(Qe,{onClick:()=>k(s.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})]})})})},Ze=["All","Metering","Reporting"];function ot(){const[s,D]=x.useState([]),[k,h]=x.useState(!0),[A,u]=x.useState(null),[c,l]=x.useState(()=>se().id),[m,Y]=x.useState("All"),[p,T]=x.useState("All"),[F,n]=x.useState(!1),[d,g]=x.useState(null),[w,N]=x.useState(!1);x.useEffect(()=>{C()},[c,m,p]);const C=async()=>{h(!0),u(null);try{const a=de(c,3),r=a[0].startDate,o=a[a.length-1].endDate,E={};m!=="All"&&(E.team=m),p!=="All"&&(E.duty_type=p);const _=await z.listByDateRange(f(r,"yyyy-MM-dd"),f(o,"yyyy-MM-dd"),E);D(Array.isArray(_)?_:[])}catch(a){H.error("Failed to load duty schedules",{error:String(a)}),u("Failed to load duty schedules. Please try again."),D([])}finally{h(!1)}},q=async a=>{N(!0);try{await z.create(a),await C(),n(!1)}catch(r){H.error("Failed to create duty",{error:String(r)}),u("Failed to create duty. Please try again.")}finally{N(!1)}},Z=async a=>{if(d){N(!0);try{await z.update(d.id,a),await C(),g(null)}catch(r){H.error("Failed to update duty",{error:String(r)}),u("Failed to update duty. Please try again.")}finally{N(!1)}}},S=async a=>{try{await z.delete(a),await C()}catch(r){H.error("Failed to delete duty",{error:String(r)}),u("Failed to delete duty. Please try again.")}},U=a=>{g(a)},G=x.useMemo(()=>de(c,3).map(r=>{const o=s.filter(_=>{if(!_.start_date)return!1;const L=ie(j(_.start_date));return ce(L,{start:r.startDate,end:r.endDate})}),E=r.sprints.map(_=>{const L=o.filter($=>{const ye=ie(j($.start_date));return ce(ye,{start:_.startDate,end:_.endDate})});return{..._,duties:L,grouped:{devops:L.filter($=>$.duty_type==="devops"),dev_on_duty:L.filter($=>$.duty_type==="dev_on_duty"),replacement:L.filter($=>$.duty_type==="replacement")}}});return{...r,duties:o,sprintGroups:E,label:`Release Cycle ${r.id}`,dateLabel:ae(r.startDate,r.endDate)}}),[s,c]),v=x.useMemo(()=>{const a=new Date,r=s.filter(o=>{const E=j(o.start_date),_=j(o.end_date);return a>=E&&a<=_});return{total:s.length,active:r.length,devops:s.filter(o=>o.duty_type==="devops").length,dev_on_duty:s.filter(o=>o.duty_type==="dev_on_duty").length,replacement:s.filter(o=>o.duty_type==="replacement").length}},[s]),ee=()=>{l(Te(c))},t=()=>{l(Fe(c))},i=()=>{l(se().id)},{updatePageContext:y}=we();return x.useEffect(()=>{const a=ne([],s,d);y({page:"/duties",summary:a,selection:d?{id:d.id,type:"duty_schedule"}:null,data:{dutyCount:s.length,activeDuties:v.active,currentCycleId:c,selectedTeam:m,selectedDutyType:p}})},[s,d,v.active,c,m,p,y]),x.useEffect(()=>{const a=()=>{const r=ne([],s,d);y({page:"/duties",summary:r,selection:d?{id:d.id,type:"duty_schedule"}:null,data:{dutyCount:s.length,activeDuties:v.active,currentCycleId:c,selectedTeam:m,selectedDutyType:p}})};return window.addEventListener("ai-context-refresh",a),()=>window.removeEventListener("ai-context-refresh",a)},[s,d,v.active,c,m,p,y]),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(re,{className:"h-8 w-8"}),"Duties Schedule"]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage duty rotation assignments by release cycle"})]}),e.jsxs(M,{onClick:()=>n(!0),children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Add Duty"]})]}),A&&e.jsx(Ce,{variant:"destructive",className:"mb-6",children:e.jsx(Se,{children:A})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4 text-gray-400"}),e.jsxs(O,{value:m,onValueChange:Y,children:[e.jsx(I,{className:"w-[140px]",children:e.jsx(R,{})}),e.jsx(P,{children:Ze.map(a=>e.jsx(b,{value:a,children:a==="All"?"All Teams":a},a))})]})]}),e.jsxs(O,{value:p,onValueChange:T,children:[e.jsx(I,{className:"w-[160px]",children:e.jsx(R,{})}),e.jsxs(P,{children:[e.jsx(b,{value:"All",children:"All Types"}),e.jsx(b,{value:"devops",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-3 w-3 text-indigo-600"}),"DevOps"]})}),e.jsx(b,{value:"dev_on_duty",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-3 w-3 text-teal-600"}),"Dev On Duty"]})}),e.jsx(b,{value:"replacement",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-3 w-3 text-amber-600"}),"Replacement"]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx(M,{variant:"outline",size:"icon",onClick:ee,children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx(M,{variant:"outline",onClick:i,className:"min-w-[80px]",children:c}),e.jsx(M,{variant:"outline",size:"icon",onClick:t,children:e.jsx(Ne,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsx(V,{children:e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:v.active}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active Now"})]})}),e.jsx(V,{className:"border-indigo-200",children:e.jsxs(W,{className:"p-4 flex items-center gap-3",children:[e.jsx(Q,{className:"h-8 w-8 text-indigo-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:v.devops}),e.jsx("div",{className:"text-sm text-gray-500",children:"DevOps"})]})]})}),e.jsx(V,{className:"border-teal-200",children:e.jsxs(W,{className:"p-4 flex items-center gap-3",children:[e.jsx(J,{className:"h-8 w-8 text-teal-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:v.dev_on_duty}),e.jsx("div",{className:"text-sm text-gray-500",children:"Dev On Duty"})]})]})}),e.jsx(V,{className:"border-amber-200",children:e.jsxs(W,{className:"p-4 flex items-center gap-3",children:[e.jsx(K,{className:"h-8 w-8 text-amber-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:v.replacement}),e.jsx("div",{className:"text-sm text-gray-500",children:"Replacement"})]})]})})]}),k?e.jsxs("div",{className:"text-center p-12",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-indigo-600 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading duty schedules..."})]}):s.length===0?e.jsxs("div",{className:"text-center p-12 border border-dashed rounded-lg",children:[e.jsx(re,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No duties scheduled"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start by adding duty assignments for your teams."}),e.jsxs(M,{onClick:()=>n(!0),children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Add First Duty"]})]}):e.jsx("div",{className:"space-y-6",children:G.map(a=>e.jsxs(V,{children:[e.jsx(Me,{className:"pb-2",children:e.jsxs(ke,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{children:a.label}),e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",a.dateLabel,")"]})]})}),e.jsx(W,{children:a.duties.length===0?e.jsx("p",{className:"text-gray-500 text-sm py-4 text-center",children:"No duties scheduled for this cycle"}):e.jsx("div",{className:"space-y-6",children:a.sprintGroups.map(r=>e.jsxs("div",{className:"border-l-2 border-gray-200 pl-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Sprint ",r.id]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",ae(r.startDate,r.endDate),")"]}),r.duties.length>0&&e.jsxs(X,{variant:"outline",className:"ml-auto",children:[r.duties.length," ",r.duties.length===1?"duty":"duties"]})]}),r.duties.length===0?e.jsx("p",{className:"text-gray-400 text-sm py-2",children:"No duties in this sprint"}):e.jsxs("div",{className:"space-y-3",children:[r.grouped.devops.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Q,{className:"h-3 w-3 text-indigo-600"}),e.jsx("span",{className:"text-xs font-medium text-indigo-700",children:"DevOps"})]}),e.jsx("div",{className:"space-y-1",children:r.grouped.devops.map(o=>e.jsx(te,{duty:o,onEdit:U,onDelete:S,compact:!0},o.id))})]}),r.grouped.dev_on_duty.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(J,{className:"h-3 w-3 text-teal-600"}),e.jsx("span",{className:"text-xs font-medium text-teal-700",children:"Dev On Duty"})]}),e.jsx("div",{className:"space-y-1",children:r.grouped.dev_on_duty.map(o=>e.jsx(te,{duty:o,onEdit:U,onDelete:S,compact:!0},o.id))})]}),r.grouped.replacement.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(K,{className:"h-3 w-3 text-amber-600"}),e.jsx("span",{className:"text-xs font-medium text-amber-700",children:"Replacement"})]}),e.jsx("div",{className:"space-y-1",children:r.grouped.replacement.map(o=>e.jsx(te,{duty:o,onEdit:U,onDelete:S,compact:!0},o.id))})]})]})]},r.id))})})]},a.id))}),e.jsx(xe,{open:F,onOpenChange:n,onSubmit:q,preselectedTeam:m!=="All"?m:null,currentCycleId:c,isLoading:w}),e.jsx(xe,{open:!!d,onOpenChange:a=>!a&&g(null),onSubmit:Z,initialData:d,currentCycleId:c,isLoading:w})]})})}export{ot as default};

---
phase: 29-settings-ui-basic
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/Settings.jsx
  - src/components/settings/NavigationSettings.jsx
autonomous: true

must_haves:
  truths:
    - "User can see Navigation tab in Settings page"
    - "User can create a new folder with a name"
    - "User can rename an existing folder"
    - "User can delete a folder"
    - "Deleted folder's items return to root level"
    - "Folder changes persist after page refresh"
  artifacts:
    - path: "src/components/settings/NavigationSettings.jsx"
      provides: "Navigation settings component with folder CRUD"
      exports: ["NavigationSettings"]
    - path: "src/pages/Settings.jsx"
      provides: "Settings page with Navigation tab"
      contains: "navigation"
  key_links:
    - from: "src/components/settings/NavigationSettings.jsx"
      to: "useNavigation"
      via: "context hook import"
      pattern: "useNavigation\\(\\)"
    - from: "src/components/settings/NavigationSettings.jsx"
      to: "saveConfig"
      via: "context method call"
      pattern: "saveConfig\\("
---

<objective>
Add Navigation tab to Settings page with folder CRUD operations.

Purpose: Enable users to create, rename, and delete folders for organizing sidebar menu items. This is the foundation for menu clustering - folders must exist before items can be assigned to them.

Output: NavigationSettings component with folder management, integrated into Settings page as new tab.
</objective>

<execution_context>
@/Users/i306072/.claude/get-shit-done/workflows/execute-plan.md
@/Users/i306072/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-data-layer-backend-api/28-02-SUMMARY.md
@src/contexts/NavigationContext.jsx
@src/pages/Settings.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create NavigationSettings component with folder list and create dialog</name>
  <files>src/components/settings/NavigationSettings.jsx</files>
  <action>
Create NavigationSettings.jsx component that:

1. Imports and uses useNavigation() hook from NavigationContext
2. Displays current mode indicator ("People Mode" or "Product Mode" badge based on currentMode)
3. Shows folder list in a Card with Table layout (matching existing Settings pattern):
   - Columns: Name, Items Count, Actions (dropdown with Edit, Delete)
   - Empty state: "No folders. Create your first folder to organize navigation."
4. "Add Folder" button opens create dialog:
   - Single input: folder name (required, min 1 char, max 50 chars)
   - Create button calls saveConfig with updated folders array
   - New folder gets: id (uuid generated client-side), name, order (max existing order + 1)
5. Edit dialog (reuse same dialog with different title):
   - Pre-fills current folder name
   - Save updates folder in array and calls saveConfig
6. Delete confirmation dialog:
   - Shows warning: "Items in this folder will be moved to the root level."
   - Delete button removes folder from array AND updates any items with folderId matching deleted folder to folderId: null
   - Calls saveConfig with updated config

Use uuid generation: `crypto.randomUUID()` (native browser API)

Pattern to follow from Settings.jsx:
- Card with CardHeader (CardTitle + CardDescription) and CardContent
- Dialog with DialogHeader, DialogContent, DialogFooter
- DropdownMenu for row actions
- Alert for warnings
- Button with Plus icon for create action

Import lucide-react icons: FolderPlus, Pencil, Trash2, FolderOpen, Info
  </action>
  <verify>
File exists at src/components/settings/NavigationSettings.jsx with:
- useNavigation import
- FolderCreateDialog component or create dialog JSX
- FolderEditDialog component or edit dialog JSX
- Delete confirmation dialog
- saveConfig calls
  </verify>
  <done>
Component renders folder list with create/edit/delete functionality. All CRUD operations call saveConfig to persist changes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate NavigationSettings into Settings page as new tab</name>
  <files>src/pages/Settings.jsx</files>
  <action>
Modify Settings.jsx to add Navigation tab:

1. Import NavigationSettings component:
   `import NavigationSettings from "@/components/settings/NavigationSettings";`

2. Import Navigation icon from lucide-react (already have Menu, but use Navigation2 or FolderTree - use Navigation2):
   Add `Navigation2` to existing lucide-react import

3. Add navigation tab to tabConfigs array (place it AFTER "notifications" and BEFORE "data"):
   ```javascript
   { id: "navigation", label: "Navigation", icon: Navigation2 },
   ```

4. Add TabsContent rendering for navigation tab in the map function. Find the pattern used for existing tabs like 'notifications':
   ```jsx
   tab.id === 'navigation' ? (
     <NavigationSettings />
   ) :
   ```

   This should be added in the chain of conditional rendering, before the default attribute table case.

5. Hide search bar and "Add New" button when navigation tab is active (already hidden for 'account', 'users', 'github', 'notifications', 'data' tabs - add 'navigation' to that condition):
   - Find: `activeTab !== 'account'` condition
   - Update to also exclude 'navigation': `!['account', 'users', 'github', 'notifications', 'data', 'navigation'].includes(activeTab)`
  </action>
  <verify>
Run dev server and navigate to Settings page:
- Navigation tab appears in tab bar with icon
- Clicking Navigation tab shows NavigationSettings component
- Search bar and Add New button are hidden when Navigation tab is active
  </verify>
  <done>
Settings page displays Navigation tab. Clicking tab renders NavigationSettings component. Tab follows existing visual pattern.
  </done>
</task>

<task type="auto">
  <name>Task 3: Test folder CRUD workflow end-to-end</name>
  <files>src/components/settings/NavigationSettings.jsx</files>
  <action>
Verify the complete folder management workflow works:

1. Start dev server: `npm run dev`
2. Navigate to Settings > Navigation tab
3. Test CREATE:
   - Click "Add Folder"
   - Enter name "Tools"
   - Click Create
   - Verify folder appears in list
   - Refresh page - folder should still be there (persisted)
4. Test RENAME:
   - Click dropdown menu on "Tools" row
   - Click Edit
   - Change name to "External Tools"
   - Click Save
   - Verify name updated
   - Refresh - name should persist
5. Test DELETE:
   - Click dropdown menu on "External Tools"
   - Click Delete
   - Confirm in dialog
   - Verify folder removed from list
   - Refresh - folder should stay deleted

If any issues found, fix them in NavigationSettings.jsx:
- Ensure saveConfig is awaited (async)
- Ensure state updates after successful save
- Ensure loading state shown during save operations
  </action>
  <verify>
All CRUD operations work:
- Create adds folder to list and persists across refresh
- Edit updates folder name and persists
- Delete removes folder and persists
- No console errors during operations
  </verify>
  <done>
Folder CRUD workflow complete: create, rename, delete all work with backend persistence.
  </done>
</task>

</tasks>

<verification>
Phase 29 Plan 01 verification:

1. Navigation tab visible in Settings page tab bar
2. NavigationSettings component renders when tab selected
3. Can create a new folder with custom name
4. Can rename existing folder via edit dialog
5. Can delete folder with confirmation
6. Items count column shows 0 for empty folders
7. All changes persist after page refresh
8. Mode badge shows current navigation mode
</verification>

<success_criteria>
- NavigationSettings.jsx exists with folder CRUD logic
- Settings.jsx has Navigation tab integrated
- Create folder: dialog opens, name input, creates folder with UUID
- Edit folder: dialog opens, pre-filled name, saves update
- Delete folder: confirmation dialog, warning about items, removes folder
- All operations call saveConfig and persist to backend
- No TypeScript/ESLint errors, no console errors during operations
</success_criteria>

<output>
After completion, create `.planning/phases/29-settings-ui-basic/29-01-SUMMARY.md`
</output>
